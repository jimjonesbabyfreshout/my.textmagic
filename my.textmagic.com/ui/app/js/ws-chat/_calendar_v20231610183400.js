/*!
* vue-router v3.5.4
* (c) 2022 Evan You
* @license MIT
*/(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,global.VueRouter=factory());}(this,(function(){'use strict';function assert(condition,message){if(!condition){throw new Error(("[vue-router] "+message))}}
function warn(condition,message){if(!condition){typeof console!=='undefined'&&console.warn(("[vue-router] "+message));}}
function extend(a,b){for(var key in b){a[key]=b[key];}
return a}
var encodeReserveRE=/[!'()*]/g;var encodeReserveReplacer=function(c){return '%'+c.charCodeAt(0).toString(16);};var commaRE=/%2C/g;var encode=function(str){return encodeURIComponent(str).replace(encodeReserveRE,encodeReserveReplacer).replace(commaRE,',');};function decode(str){try{return decodeURIComponent(str)}catch(err){{warn(false,("Error decoding \""+str+"\". Leaving it intact."));}}
return str}
function resolveQuery(query,extraQuery,_parseQuery){if(extraQuery===void 0)extraQuery={};var parse=_parseQuery||parseQuery;var parsedQuery;try{parsedQuery=parse(query||'');}catch(e){warn(false,e.message);parsedQuery={};}
for(var key in extraQuery){var value=extraQuery[key];parsedQuery[key]=Array.isArray(value)?value.map(castQueryParamValue):castQueryParamValue(value);}
return parsedQuery}
var castQueryParamValue=function(value){return(value==null||typeof value==='object'?value:String(value));};function parseQuery(query){var res={};query=query.trim().replace(/^(\?|#|&)/,'');if(!query){return res}
query.split('&').forEach(function(param){var parts=param.replace(/\+/g,' ').split('=');var key=decode(parts.shift());var val=parts.length>0?decode(parts.join('=')):null;if(res[key]===undefined){res[key]=val;}else if(Array.isArray(res[key])){res[key].push(val);}else{res[key]=[res[key],val];}});return res}
function stringifyQuery(obj){var res=obj?Object.keys(obj).map(function(key){var val=obj[key];if(val===undefined){return ''}
if(val===null){return encode(key)}
if(Array.isArray(val)){var result=[];val.forEach(function(val2){if(val2===undefined){return}
if(val2===null){result.push(encode(key));}else{result.push(encode(key)+'='+encode(val2));}});return result.join('&')}
return encode(key)+'='+encode(val)}).filter(function(x){return x.length>0;}).join('&'):null;return res?("?"+res):''}
var trailingSlashRE=/\/?$/;function createRoute(record,location,redirectedFrom,router){var stringifyQuery=router&&router.options.stringifyQuery;var query=location.query||{};try{query=clone(query);}catch(e){}
var route={name:location.name||(record&&record.name),meta:(record&&record.meta)||{},path:location.path||'/',hash:location.hash||'',query:query,params:location.params||{},fullPath:getFullPath(location,stringifyQuery),matched:record?formatMatch(record):[]};if(redirectedFrom){route.redirectedFrom=getFullPath(redirectedFrom,stringifyQuery);}
return Object.freeze(route)}
function clone(value){if(Array.isArray(value)){return value.map(clone)}else if(value&&typeof value==='object'){var res={};for(var key in value){res[key]=clone(value[key]);}
return res}else{return value}}
var START=createRoute(null,{path:'/'});function formatMatch(record){var res=[];while(record){res.unshift(record);record=record.parent;}
return res}
function getFullPath(ref,_stringifyQuery){var path=ref.path;var query=ref.query;if(query===void 0)query={};var hash=ref.hash;if(hash===void 0)hash='';var stringify=_stringifyQuery||stringifyQuery;return(path||'/')+stringify(query)+hash}
function isSameRoute(a,b,onlyPath){if(b===START){return a===b}else if(!b){return false}else if(a.path&&b.path){return a.path.replace(trailingSlashRE,'')===b.path.replace(trailingSlashRE,'')&&(onlyPath||a.hash===b.hash&&isObjectEqual(a.query,b.query))}else if(a.name&&b.name){return(a.name===b.name&&(onlyPath||(a.hash===b.hash&&isObjectEqual(a.query,b.query)&&isObjectEqual(a.params,b.params))))}else{return false}}
function isObjectEqual(a,b){if(a===void 0)a={};if(b===void 0)b={};if(!a||!b){return a===b}
var aKeys=Object.keys(a).sort();var bKeys=Object.keys(b).sort();if(aKeys.length!==bKeys.length){return false}
return aKeys.every(function(key,i){var aVal=a[key];var bKey=bKeys[i];if(bKey!==key){return false}
var bVal=b[key];if(aVal==null||bVal==null){return aVal===bVal}
if(typeof aVal==='object'&&typeof bVal==='object'){return isObjectEqual(aVal,bVal)}
return String(aVal)===String(bVal)})}
function isIncludedRoute(current,target){return(current.path.replace(trailingSlashRE,'/').indexOf(target.path.replace(trailingSlashRE,'/'))===0&&(!target.hash||current.hash===target.hash)&&queryIncludes(current.query,target.query))}
function queryIncludes(current,target){for(var key in target){if(!(key in current)){return false}}
return true}
function handleRouteEntered(route){for(var i=0;i<route.matched.length;i++){var record=route.matched[i];for(var name in record.instances){var instance=record.instances[name];var cbs=record.enteredCbs[name];if(!instance||!cbs){continue}
delete record.enteredCbs[name];for(var i$1=0;i$1<cbs.length;i$1++){if(!instance._isBeingDestroyed){cbs[i$1](instance);}}}}}
var View={name:'RouterView',functional:true,props:{name:{type:String,default:'default'}},render:function render(_,ref){var props=ref.props;var children=ref.children;var parent=ref.parent;var data=ref.data;data.routerView=true;var h=parent.$createElement;var name=props.name;var route=parent.$route;var cache=parent._routerViewCache||(parent._routerViewCache={});var depth=0;var inactive=false;while(parent&&parent._routerRoot!==parent){var vnodeData=parent.$vnode?parent.$vnode.data:{};if(vnodeData.routerView){depth++;}
if(vnodeData.keepAlive&&parent._directInactive&&parent._inactive){inactive=true;}
parent=parent.$parent;}
data.routerViewDepth=depth;if(inactive){var cachedData=cache[name];var cachedComponent=cachedData&&cachedData.component;if(cachedComponent){if(cachedData.configProps){fillPropsinData(cachedComponent,data,cachedData.route,cachedData.configProps);}
return h(cachedComponent,data,children)}else{return h()}}
var matched=route.matched[depth];var component=matched&&matched.components[name];if(!matched||!component){cache[name]=null;return h()}
cache[name]={component:component};data.registerRouteInstance=function(vm,val){var current=matched.instances[name];if((val&&current!==vm)||(!val&&current===vm)){matched.instances[name]=val;}};(data.hook||(data.hook={})).prepatch=function(_,vnode){matched.instances[name]=vnode.componentInstance;};data.hook.init=function(vnode){if(vnode.data.keepAlive&&vnode.componentInstance&&vnode.componentInstance!==matched.instances[name]){matched.instances[name]=vnode.componentInstance;}
handleRouteEntered(route);};var configProps=matched.props&&matched.props[name];if(configProps){extend(cache[name],{route:route,configProps:configProps});fillPropsinData(component,data,route,configProps);}
return h(component,data,children)}};function fillPropsinData(component,data,route,configProps){var propsToPass=data.props=resolveProps(route,configProps);if(propsToPass){propsToPass=data.props=extend({},propsToPass);var attrs=data.attrs=data.attrs||{};for(var key in propsToPass){if(!component.props||!(key in component.props)){attrs[key]=propsToPass[key];delete propsToPass[key];}}}}
function resolveProps(route,config){switch(typeof config){case 'undefined':return
case 'object':return config
case 'function':return config(route)
case 'boolean':return config?route.params:undefined
default:{warn(false,"props in \""+(route.path)+"\" is a "+(typeof config)+", "+
"expecting an object, function or boolean.");}}}
function resolvePath(relative,base,append){var firstChar=relative.charAt(0);if(firstChar==='/'){return relative}
if(firstChar==='?'||firstChar==='#'){return base+relative}
var stack=base.split('/');if(!append||!stack[stack.length-1]){stack.pop();}
var segments=relative.replace(/^\//,'').split('/');for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment==='..'){stack.pop();}else if(segment!=='.'){stack.push(segment);}}
if(stack[0]!==''){stack.unshift('');}
return stack.join('/')}
function parsePath(path){var hash='';var query='';var hashIndex=path.indexOf('#');if(hashIndex>=0){hash=path.slice(hashIndex);path=path.slice(0,hashIndex);}
var queryIndex=path.indexOf('?');if(queryIndex>=0){query=path.slice(queryIndex+1);path=path.slice(0,queryIndex);}
return{path:path,query:query,hash:hash}}
function cleanPath(path){return path.replace(/\/(?:\s*\/)+/g,'/')}
var isarray=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=='[object Array]';};var pathToRegexp_1=pathToRegexp;var parse_1=parse;var compile_1=compile;var tokensToFunction_1=tokensToFunction;var tokensToRegExp_1=tokensToRegExp;var PATH_REGEXP=new RegExp(['(\\\\.)','([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))'].join('|'),'g');function parse(str,options){var tokens=[];var key=0;var index=0;var path='';var defaultDelimiter=options&&options.delimiter||'/';var res;while((res=PATH_REGEXP.exec(str))!=null){var m=res[0];var escaped=res[1];var offset=res.index;path+=str.slice(index,offset);index=offset+m.length;if(escaped){path+=escaped[1];continue}
var next=str[index];var prefix=res[2];var name=res[3];var capture=res[4];var group=res[5];var modifier=res[6];var asterisk=res[7];if(path){tokens.push(path);path='';}
var partial=prefix!=null&&next!=null&&next!==prefix;var repeat=modifier==='+'||modifier==='*';var optional=modifier==='?'||modifier==='*';var delimiter=res[2]||defaultDelimiter;var pattern=capture||group;tokens.push({name:name||key++,prefix:prefix||'',delimiter:delimiter,optional:optional,repeat:repeat,partial:partial,asterisk:!!asterisk,pattern:pattern?escapeGroup(pattern):(asterisk?'.*':'[^'+escapeString(delimiter)+']+?')});}
if(index<str.length){path+=str.substr(index);}
if(path){tokens.push(path);}
return tokens}
function compile(str,options){return tokensToFunction(parse(str,options),options)}
function encodeURIComponentPretty(str){return encodeURI(str).replace(/[\/?#]/g,function(c){return '%'+c.charCodeAt(0).toString(16).toUpperCase()})}
function encodeAsterisk(str){return encodeURI(str).replace(/[?#]/g,function(c){return '%'+c.charCodeAt(0).toString(16).toUpperCase()})}
function tokensToFunction(tokens,options){var matches=new Array(tokens.length);for(var i=0;i<tokens.length;i++){if(typeof tokens[i]==='object'){matches[i]=new RegExp('^(?:'+tokens[i].pattern+')$',flags(options));}}
return function(obj,opts){var path='';var data=obj||{};var options=opts||{};var encode=options.pretty?encodeURIComponentPretty:encodeURIComponent;for(var i=0;i<tokens.length;i++){var token=tokens[i];if(typeof token==='string'){path+=token;continue}
var value=data[token.name];var segment;if(value==null){if(token.optional){if(token.partial){path+=token.prefix;}
continue}else{throw new TypeError('Expected "'+token.name+'" to be defined')}}
if(isarray(value)){if(!token.repeat){throw new TypeError('Expected "'+token.name+'" to not repeat, but received `'+JSON.stringify(value)+'`')}
if(value.length===0){if(token.optional){continue}else{throw new TypeError('Expected "'+token.name+'" to not be empty')}}
for(var j=0;j<value.length;j++){segment=encode(value[j]);if(!matches[i].test(segment)){throw new TypeError('Expected all "'+token.name+'" to match "'+token.pattern+'", but received `'+JSON.stringify(segment)+'`')}
path+=(j===0?token.prefix:token.delimiter)+segment;}
continue}
segment=token.asterisk?encodeAsterisk(value):encode(value);if(!matches[i].test(segment)){throw new TypeError('Expected "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"')}
path+=token.prefix+segment;}
return path}}
function escapeString(str){return str.replace(/([.+*?=^!:${}()[\]|\/\\])/g,'\\$1')}
function escapeGroup(group){return group.replace(/([=!:$\/()])/g,'\\$1')}
function attachKeys(re,keys){re.keys=keys;return re}
function flags(options){return options&&options.sensitive?'':'i'}
function regexpToRegexp(path,keys){var groups=path.source.match(/\((?!\?)/g);if(groups){for(var i=0;i<groups.length;i++){keys.push({name:i,prefix:null,delimiter:null,optional:false,repeat:false,partial:false,asterisk:false,pattern:null});}}
return attachKeys(path,keys)}
function arrayToRegexp(path,keys,options){var parts=[];for(var i=0;i<path.length;i++){parts.push(pathToRegexp(path[i],keys,options).source);}
var regexp=new RegExp('(?:'+parts.join('|')+')',flags(options));return attachKeys(regexp,keys)}
function stringToRegexp(path,keys,options){return tokensToRegExp(parse(path,options),keys,options)}
function tokensToRegExp(tokens,keys,options){if(!isarray(keys)){options=(keys||options);keys=[];}
options=options||{};var strict=options.strict;var end=options.end!==false;var route='';for(var i=0;i<tokens.length;i++){var token=tokens[i];if(typeof token==='string'){route+=escapeString(token);}else{var prefix=escapeString(token.prefix);var capture='(?:'+token.pattern+')';keys.push(token);if(token.repeat){capture+='(?:'+prefix+capture+')*';}
if(token.optional){if(!token.partial){capture='(?:'+prefix+'('+capture+'))?';}else{capture=prefix+'('+capture+')?';}}else{capture=prefix+'('+capture+')';}
route+=capture;}}
var delimiter=escapeString(options.delimiter||'/');var endsWithDelimiter=route.slice(-delimiter.length)===delimiter;if(!strict){route=(endsWithDelimiter?route.slice(0,-delimiter.length):route)+'(?:'+delimiter+'(?=$))?';}
if(end){route+='$';}else{route+=strict&&endsWithDelimiter?'':'(?='+delimiter+'|$)';}
return attachKeys(new RegExp('^'+route,flags(options)),keys)}
function pathToRegexp(path,keys,options){if(!isarray(keys)){options=(keys||options);keys=[];}
options=options||{};if(path instanceof RegExp){return regexpToRegexp(path,(keys))}
if(isarray(path)){return arrayToRegexp((path),(keys),options)}
return stringToRegexp((path),(keys),options)}
pathToRegexp_1.parse=parse_1;pathToRegexp_1.compile=compile_1;pathToRegexp_1.tokensToFunction=tokensToFunction_1;pathToRegexp_1.tokensToRegExp=tokensToRegExp_1;var regexpCompileCache=Object.create(null);function fillParams(path,params,routeMsg){params=params||{};try{var filler=regexpCompileCache[path]||(regexpCompileCache[path]=pathToRegexp_1.compile(path));if(typeof params.pathMatch==='string'){params[0]=params.pathMatch;}
return filler(params,{pretty:true})}catch(e){{warn(typeof params.pathMatch==='string',("missing param for "+routeMsg+": "+(e.message)));}
return ''}finally{delete params[0];}}
function normalizeLocation(raw,current,append,router){var next=typeof raw==='string'?{path:raw}:raw;if(next._normalized){return next}else if(next.name){next=extend({},raw);var params=next.params;if(params&&typeof params==='object'){next.params=extend({},params);}
return next}
if(!next.path&&next.params&&current){next=extend({},next);next._normalized=true;var params$1=extend(extend({},current.params),next.params);if(current.name){next.name=current.name;next.params=params$1;}else if(current.matched.length){var rawPath=current.matched[current.matched.length-1].path;next.path=fillParams(rawPath,params$1,("path "+(current.path)));}else{warn(false,"relative params navigation requires a current route.");}
return next}
var parsedPath=parsePath(next.path||'');var basePath=(current&&current.path)||'/';var path=parsedPath.path?resolvePath(parsedPath.path,basePath,append||next.append):basePath;var query=resolveQuery(parsedPath.query,next.query,router&&router.options.parseQuery);var hash=next.hash||parsedPath.hash;if(hash&&hash.charAt(0)!=='#'){hash="#"+hash;}
return{_normalized:true,path:path,query:query,hash:hash}}
var toTypes=[String,Object];var eventTypes=[String,Array];var noop=function(){};var warnedCustomSlot;var warnedTagProp;var warnedEventProp;var Link={name:'RouterLink',props:{to:{type:toTypes,required:true},tag:{type:String,default:'a'},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:'page'},event:{type:eventTypes,default:'click'}},render:function render(h){var this$1=this;var router=this.$router;var current=this.$route;var ref=router.resolve(this.to,current,this.append);var location=ref.location;var route=ref.route;var href=ref.href;var classes={};var globalActiveClass=router.options.linkActiveClass;var globalExactActiveClass=router.options.linkExactActiveClass;var activeClassFallback=globalActiveClass==null?'router-link-active':globalActiveClass;var exactActiveClassFallback=globalExactActiveClass==null?'router-link-exact-active':globalExactActiveClass;var activeClass=this.activeClass==null?activeClassFallback:this.activeClass;var exactActiveClass=this.exactActiveClass==null?exactActiveClassFallback:this.exactActiveClass;var compareTarget=route.redirectedFrom?createRoute(null,normalizeLocation(route.redirectedFrom),null,router):route;classes[exactActiveClass]=isSameRoute(current,compareTarget,this.exactPath);classes[activeClass]=this.exact||this.exactPath?classes[exactActiveClass]:isIncludedRoute(current,compareTarget);var ariaCurrentValue=classes[exactActiveClass]?this.ariaCurrentValue:null;var handler=function(e){if(guardEvent(e)){if(this$1.replace){router.replace(location,noop);}else{router.push(location,noop);}}};var on={click:guardEvent};if(Array.isArray(this.event)){this.event.forEach(function(e){on[e]=handler;});}else{on[this.event]=handler;}
var data={class:classes};var scopedSlot=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:href,route:route,navigate:handler,isActive:classes[activeClass],isExactActive:classes[exactActiveClass]});if(scopedSlot){if(!this.custom){!warnedCustomSlot&&warn(false,'In Vue Router 4, the v-slot API will by default wrap its content with an <a> element. Use the custom prop to remove this warning:\n<router-link v-slot="{ navigate, href }" custom></router-link>\n');warnedCustomSlot=true;}
if(scopedSlot.length===1){return scopedSlot[0]}else if(scopedSlot.length>1||!scopedSlot.length){{warn(false,("<router-link> with to=\""+(this.to)+"\" is trying to use a scoped slot but it didn't provide exactly one child. Wrapping the content with a span element."));}
return scopedSlot.length===0?h():h('span',{},scopedSlot)}}
{if('tag'in this.$options.propsData&&!warnedTagProp){warn(false,"<router-link>'s tag prop is deprecated and has been removed in Vue Router 4. Use the v-slot API to remove this warning: https://next.router.vuejs.org/guide/migration/#removal-of-event-and-tag-props-in-router-link.");warnedTagProp=true;}
if('event'in this.$options.propsData&&!warnedEventProp){warn(false,"<router-link>'s event prop is deprecated and has been removed in Vue Router 4. Use the v-slot API to remove this warning: https://next.router.vuejs.org/guide/migration/#removal-of-event-and-tag-props-in-router-link.");warnedEventProp=true;}}
if(this.tag==='a'){data.on=on;data.attrs={href:href,'aria-current':ariaCurrentValue};}else{var a=findAnchor(this.$slots.default);if(a){a.isStatic=false;var aData=(a.data=extend({},a.data));aData.on=aData.on||{};for(var event in aData.on){var handler$1=aData.on[event];if(event in on){aData.on[event]=Array.isArray(handler$1)?handler$1:[handler$1];}}
for(var event$1 in on){if(event$1 in aData.on){aData.on[event$1].push(on[event$1]);}else{aData.on[event$1]=handler;}}
var aAttrs=(a.data.attrs=extend({},a.data.attrs));aAttrs.href=href;aAttrs['aria-current']=ariaCurrentValue;}else{data.on=on;}}
return h(this.tag,data,this.$slots.default)}};function guardEvent(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey){return}
if(e.defaultPrevented){return}
if(e.button!==undefined&&e.button!==0){return}
if(e.currentTarget&&e.currentTarget.getAttribute){var target=e.currentTarget.getAttribute('target');if(/\b_blank\b/i.test(target)){return}}
if(e.preventDefault){e.preventDefault();}
return true}
function findAnchor(children){if(children){var child;for(var i=0;i<children.length;i++){child=children[i];if(child.tag==='a'){return child}
if(child.children&&(child=findAnchor(child.children))){return child}}}}
var _Vue;function install(Vue){if(install.installed&&_Vue===Vue){return}
install.installed=true;_Vue=Vue;var isDef=function(v){return v!==undefined;};var registerInstance=function(vm,callVal){var i=vm.$options._parentVnode;if(isDef(i)&&isDef(i=i.data)&&isDef(i=i.registerRouteInstance)){i(vm,callVal);}};Vue.mixin({beforeCreate:function beforeCreate(){if(isDef(this.$options.router)){this._routerRoot=this;this._router=this.$options.router;this._router.init(this);Vue.util.defineReactive(this,'_route',this._router.history.current);}else{this._routerRoot=(this.$parent&&this.$parent._routerRoot)||this;}
registerInstance(this,this);},destroyed:function destroyed(){registerInstance(this);}});Object.defineProperty(Vue.prototype,'$router',{get:function get(){return this._routerRoot._router}});Object.defineProperty(Vue.prototype,'$route',{get:function get(){return this._routerRoot._route}});Vue.component('RouterView',View);Vue.component('RouterLink',Link);var strats=Vue.config.optionMergeStrategies;strats.beforeRouteEnter=strats.beforeRouteLeave=strats.beforeRouteUpdate=strats.created;}
var inBrowser=typeof window!=='undefined';function createRouteMap(routes,oldPathList,oldPathMap,oldNameMap,parentRoute){var pathList=oldPathList||[];var pathMap=oldPathMap||Object.create(null);var nameMap=oldNameMap||Object.create(null);routes.forEach(function(route){addRouteRecord(pathList,pathMap,nameMap,route,parentRoute);});for(var i=0,l=pathList.length;i<l;i++){if(pathList[i]==='*'){pathList.push(pathList.splice(i,1)[0]);l--;i--;}}
{var found=pathList.filter(function(path){return path&&path.charAt(0)!=='*'&&path.charAt(0)!=='/';});if(found.length>0){var pathNames=found.map(function(path){return("- "+path);}).join('\n');warn(false,("Non-nested routes must include a leading slash character. Fix the following routes: \n"+pathNames));}}
return{pathList:pathList,pathMap:pathMap,nameMap:nameMap}}
function addRouteRecord(pathList,pathMap,nameMap,route,parent,matchAs){var path=route.path;var name=route.name;{assert(path!=null,"\"path\" is required in a route configuration.");assert(typeof route.component!=='string',"route config \"component\" for path: "+(String(path||name))+" cannot be a "+"string id. Use an actual component instead.");warn(!/[^\u0000-\u007F]+/.test(path),"Route with path \""+path+"\" contains unencoded characters, make sure "+
"your path is correctly encoded before passing it to the router. Use "+
"encodeURI to encode static segments of your path.");}
var pathToRegexpOptions=route.pathToRegexpOptions||{};var normalizedPath=normalizePath(path,parent,pathToRegexpOptions.strict);if(typeof route.caseSensitive==='boolean'){pathToRegexpOptions.sensitive=route.caseSensitive;}
var record={path:normalizedPath,regex:compileRouteRegex(normalizedPath,pathToRegexpOptions),components:route.components||{default:route.component},alias:route.alias?typeof route.alias==='string'?[route.alias]:route.alias:[],instances:{},enteredCbs:{},name:name,parent:parent,matchAs:matchAs,redirect:route.redirect,beforeEnter:route.beforeEnter,meta:route.meta||{},props:route.props==null?{}:route.components?route.props:{default:route.props}};if(route.children){{if(route.name&&!route.redirect&&route.children.some(function(child){return /^\/?$/.test(child.path);})){warn(false,"Named Route '"+(route.name)+"' has a default child route. "+
"When navigating to this named route (:to=\"{name: '"+(route.name)+"'}\"), "+
"the default child route will not be rendered. Remove the name from "+
"this route and use the name of the default child route for named "+
"links instead.");}}
route.children.forEach(function(child){var childMatchAs=matchAs?cleanPath((matchAs+"/"+(child.path))):undefined;addRouteRecord(pathList,pathMap,nameMap,child,record,childMatchAs);});}
if(!pathMap[record.path]){pathList.push(record.path);pathMap[record.path]=record;}
if(route.alias!==undefined){var aliases=Array.isArray(route.alias)?route.alias:[route.alias];for(var i=0;i<aliases.length;++i){var alias=aliases[i];if(alias===path){warn(false,("Found an alias with the same value as the path: \""+path+"\". You have to remove that alias. It will be ignored in development."));continue}
var aliasRoute={path:alias,children:route.children};addRouteRecord(pathList,pathMap,nameMap,aliasRoute,parent,record.path||'/');}}
if(name){if(!nameMap[name]){nameMap[name]=record;}else if(!matchAs){warn(false,"Duplicate named routes definition: "+
"{ name: \""+name+"\", path: \""+(record.path)+"\" }");}}}
function compileRouteRegex(path,pathToRegexpOptions){var regex=pathToRegexp_1(path,[],pathToRegexpOptions);{var keys=Object.create(null);regex.keys.forEach(function(key){warn(!keys[key.name],("Duplicate param keys in route with path: \""+path+"\""));keys[key.name]=true;});}
return regex}
function normalizePath(path,parent,strict){if(!strict){path=path.replace(/\/$/,'');}
if(path[0]==='/'){return path}
if(parent==null){return path}
return cleanPath(((parent.path)+"/"+path))}
function createMatcher(routes,router){var ref=createRouteMap(routes);var pathList=ref.pathList;var pathMap=ref.pathMap;var nameMap=ref.nameMap;function addRoutes(routes){createRouteMap(routes,pathList,pathMap,nameMap);}
function addRoute(parentOrRoute,route){var parent=(typeof parentOrRoute!=='object')?nameMap[parentOrRoute]:undefined;createRouteMap([route||parentOrRoute],pathList,pathMap,nameMap,parent);if(parent&&parent.alias.length){createRouteMap(parent.alias.map(function(alias){return({path:alias,children:[route]});}),pathList,pathMap,nameMap,parent);}}
function getRoutes(){return pathList.map(function(path){return pathMap[path];})}
function match(raw,currentRoute,redirectedFrom){var location=normalizeLocation(raw,currentRoute,false,router);var name=location.name;if(name){var record=nameMap[name];{warn(record,("Route with name '"+name+"' does not exist"));}
if(!record){return _createRoute(null,location)}
var paramNames=record.regex.keys.filter(function(key){return!key.optional;}).map(function(key){return key.name;});if(typeof location.params!=='object'){location.params={};}
if(currentRoute&&typeof currentRoute.params==='object'){for(var key in currentRoute.params){if(!(key in location.params)&&paramNames.indexOf(key)>-1){location.params[key]=currentRoute.params[key];}}}
location.path=fillParams(record.path,location.params,("named route \""+name+"\""));return _createRoute(record,location,redirectedFrom)}else if(location.path){location.params={};for(var i=0;i<pathList.length;i++){var path=pathList[i];var record$1=pathMap[path];if(matchRoute(record$1.regex,location.path,location.params)){return _createRoute(record$1,location,redirectedFrom)}}}
return _createRoute(null,location)}
function redirect(record,location){var originalRedirect=record.redirect;var redirect=typeof originalRedirect==='function'?originalRedirect(createRoute(record,location,null,router)):originalRedirect;if(typeof redirect==='string'){redirect={path:redirect};}
if(!redirect||typeof redirect!=='object'){{warn(false,("invalid redirect option: "+(JSON.stringify(redirect))));}
return _createRoute(null,location)}
var re=redirect;var name=re.name;var path=re.path;var query=location.query;var hash=location.hash;var params=location.params;query=re.hasOwnProperty('query')?re.query:query;hash=re.hasOwnProperty('hash')?re.hash:hash;params=re.hasOwnProperty('params')?re.params:params;if(name){var targetRecord=nameMap[name];{assert(targetRecord,("redirect failed: named route \""+name+"\" not found."));}
return match({_normalized:true,name:name,query:query,hash:hash,params:params},undefined,location)}else if(path){var rawPath=resolveRecordPath(path,record);var resolvedPath=fillParams(rawPath,params,("redirect route with path \""+rawPath+"\""));return match({_normalized:true,path:resolvedPath,query:query,hash:hash},undefined,location)}else{{warn(false,("invalid redirect option: "+(JSON.stringify(redirect))));}
return _createRoute(null,location)}}
function alias(record,location,matchAs){var aliasedPath=fillParams(matchAs,location.params,("aliased route with path \""+matchAs+"\""));var aliasedMatch=match({_normalized:true,path:aliasedPath});if(aliasedMatch){var matched=aliasedMatch.matched;var aliasedRecord=matched[matched.length-1];location.params=aliasedMatch.params;return _createRoute(aliasedRecord,location)}
return _createRoute(null,location)}
function _createRoute(record,location,redirectedFrom){if(record&&record.redirect){return redirect(record,redirectedFrom||location)}
if(record&&record.matchAs){return alias(record,location,record.matchAs)}
return createRoute(record,location,redirectedFrom,router)}
return{match:match,addRoute:addRoute,getRoutes:getRoutes,addRoutes:addRoutes}}
function matchRoute(regex,path,params){var m=path.match(regex);if(!m){return false}else if(!params){return true}
for(var i=1,len=m.length;i<len;++i){var key=regex.keys[i-1];if(key){params[key.name||'pathMatch']=typeof m[i]==='string'?decode(m[i]):m[i];}}
return true}
function resolveRecordPath(path,record){return resolvePath(path,record.parent?record.parent.path:'/',true)}
var Time=inBrowser&&window.performance&&window.performance.now?window.performance:Date;function genStateKey(){return Time.now().toFixed(3)}
var _key=genStateKey();function getStateKey(){return _key}
function setStateKey(key){return(_key=key)}
var positionStore=Object.create(null);function setupScroll(){if('scrollRestoration'in window.history){window.history.scrollRestoration='manual';}
var protocolAndPath=window.location.protocol+'//'+window.location.host;var absolutePath=window.location.href.replace(protocolAndPath,'');var stateCopy=extend({},window.history.state);stateCopy.key=getStateKey();window.history.replaceState(stateCopy,'',absolutePath);window.addEventListener('popstate',handlePopState);return function(){window.removeEventListener('popstate',handlePopState);}}
function handleScroll(router,to,from,isPop){if(!router.app){return}
var behavior=router.options.scrollBehavior;if(!behavior){return}
{assert(typeof behavior==='function',"scrollBehavior must be a function");}
router.app.$nextTick(function(){var position=getScrollPosition();var shouldScroll=behavior.call(router,to,from,isPop?position:null);if(!shouldScroll){return}
if(typeof shouldScroll.then==='function'){shouldScroll.then(function(shouldScroll){scrollToPosition((shouldScroll),position);}).catch(function(err){{assert(false,err.toString());}});}else{scrollToPosition(shouldScroll,position);}});}
function saveScrollPosition(){var key=getStateKey();if(key){positionStore[key]={x:window.pageXOffset,y:window.pageYOffset};}}
function handlePopState(e){saveScrollPosition();if(e.state&&e.state.key){setStateKey(e.state.key);}}
function getScrollPosition(){var key=getStateKey();if(key){return positionStore[key]}}
function getElementPosition(el,offset){var docEl=document.documentElement;var docRect=docEl.getBoundingClientRect();var elRect=el.getBoundingClientRect();return{x:elRect.left-docRect.left-offset.x,y:elRect.top-docRect.top-offset.y}}
function isValidPosition(obj){return isNumber(obj.x)||isNumber(obj.y)}
function normalizePosition(obj){return{x:isNumber(obj.x)?obj.x:window.pageXOffset,y:isNumber(obj.y)?obj.y:window.pageYOffset}}
function normalizeOffset(obj){return{x:isNumber(obj.x)?obj.x:0,y:isNumber(obj.y)?obj.y:0}}
function isNumber(v){return typeof v==='number'}
var hashStartsWithNumberRE=/^#\d/;function scrollToPosition(shouldScroll,position){var isObject=typeof shouldScroll==='object';if(isObject&&typeof shouldScroll.selector==='string'){var el=hashStartsWithNumberRE.test(shouldScroll.selector)?document.getElementById(shouldScroll.selector.slice(1)):document.querySelector(shouldScroll.selector);if(el){var offset=shouldScroll.offset&&typeof shouldScroll.offset==='object'?shouldScroll.offset:{};offset=normalizeOffset(offset);position=getElementPosition(el,offset);}else if(isValidPosition(shouldScroll)){position=normalizePosition(shouldScroll);}}else if(isObject&&isValidPosition(shouldScroll)){position=normalizePosition(shouldScroll);}
if(position){if('scrollBehavior'in document.documentElement.style){window.scrollTo({left:position.x,top:position.y,behavior:shouldScroll.behavior});}else{window.scrollTo(position.x,position.y);}}}
var supportsPushState=inBrowser&&(function(){var ua=window.navigator.userAgent;if((ua.indexOf('Android 2.')!==-1||ua.indexOf('Android 4.0')!==-1)&&ua.indexOf('Mobile Safari')!==-1&&ua.indexOf('Chrome')===-1&&ua.indexOf('Windows Phone')===-1){return false}
return window.history&&typeof window.history.pushState==='function'})();function pushState(url,replace){saveScrollPosition();var history=window.history;try{if(replace){var stateCopy=extend({},history.state);stateCopy.key=getStateKey();history.replaceState(stateCopy,'',url);}else{history.pushState({key:setStateKey(genStateKey())},'',url);}}catch(e){window.location[replace?'replace':'assign'](url);}}
function replaceState(url){pushState(url,true);}
function runQueue(queue,fn,cb){var step=function(index){if(index>=queue.length){cb();}else{if(queue[index]){fn(queue[index],function(){step(index+1);});}else{step(index+1);}}};step(0);}
var NavigationFailureType={redirected:2,aborted:4,cancelled:8,duplicated:16};function createNavigationRedirectedError(from,to){return createRouterError(from,to,NavigationFailureType.redirected,("Redirected when going from \""+(from.fullPath)+"\" to \""+(stringifyRoute(to))+"\" via a navigation guard."))}
function createNavigationDuplicatedError(from,to){var error=createRouterError(from,to,NavigationFailureType.duplicated,("Avoided redundant navigation to current location: \""+(from.fullPath)+"\"."));error.name='NavigationDuplicated';return error}
function createNavigationCancelledError(from,to){return createRouterError(from,to,NavigationFailureType.cancelled,("Navigation cancelled from \""+(from.fullPath)+"\" to \""+(to.fullPath)+"\" with a new navigation."))}
function createNavigationAbortedError(from,to){return createRouterError(from,to,NavigationFailureType.aborted,("Navigation aborted from \""+(from.fullPath)+"\" to \""+(to.fullPath)+"\" via a navigation guard."))}
function createRouterError(from,to,type,message){var error=new Error(message);error._isRouter=true;error.from=from;error.to=to;error.type=type;return error}
var propertiesToLog=['params','query','hash'];function stringifyRoute(to){if(typeof to==='string'){return to}
if('path'in to){return to.path}
var location={};propertiesToLog.forEach(function(key){if(key in to){location[key]=to[key];}});return JSON.stringify(location,null,2)}
function isError(err){return Object.prototype.toString.call(err).indexOf('Error')>-1}
function isNavigationFailure(err,errorType){return(isError(err)&&err._isRouter&&(errorType==null||err.type===errorType))}
function resolveAsyncComponents(matched){return function(to,from,next){var hasAsync=false;var pending=0;var error=null;flatMapComponents(matched,function(def,_,match,key){if(typeof def==='function'&&def.cid===undefined){hasAsync=true;pending++;var resolve=once(function(resolvedDef){if(isESModule(resolvedDef)){resolvedDef=resolvedDef.default;}
def.resolved=typeof resolvedDef==='function'?resolvedDef:_Vue.extend(resolvedDef);match.components[key]=resolvedDef;pending--;if(pending<=0){next();}});var reject=once(function(reason){var msg="Failed to resolve async component "+key+": "+reason;warn(false,msg);if(!error){error=isError(reason)?reason:new Error(msg);next(error);}});var res;try{res=def(resolve,reject);}catch(e){reject(e);}
if(res){if(typeof res.then==='function'){res.then(resolve,reject);}else{var comp=res.component;if(comp&&typeof comp.then==='function'){comp.then(resolve,reject);}}}}});if(!hasAsync){next();}}}
function flatMapComponents(matched,fn){return flatten(matched.map(function(m){return Object.keys(m.components).map(function(key){return fn(m.components[key],m.instances[key],m,key);})}))}
function flatten(arr){return Array.prototype.concat.apply([],arr)}
var hasSymbol=typeof Symbol==='function'&&typeof Symbol.toStringTag==='symbol';function isESModule(obj){return obj.__esModule||(hasSymbol&&obj[Symbol.toStringTag]==='Module')}
function once(fn){var called=false;return function(){var args=[],len=arguments.length;while(len--)args[len]=arguments[len];if(called){return}
called=true;return fn.apply(this,args)}}
var History=function History(router,base){this.router=router;this.base=normalizeBase(base);this.current=START;this.pending=null;this.ready=false;this.readyCbs=[];this.readyErrorCbs=[];this.errorCbs=[];this.listeners=[];};History.prototype.listen=function listen(cb){this.cb=cb;};History.prototype.onReady=function onReady(cb,errorCb){if(this.ready){cb();}else{this.readyCbs.push(cb);if(errorCb){this.readyErrorCbs.push(errorCb);}}};History.prototype.onError=function onError(errorCb){this.errorCbs.push(errorCb);};History.prototype.transitionTo=function transitionTo(location,onComplete,onAbort){var this$1=this;var route;try{route=this.router.match(location,this.current);}catch(e){this.errorCbs.forEach(function(cb){cb(e);});throw e}
var prev=this.current;this.confirmTransition(route,function(){this$1.updateRoute(route);onComplete&&onComplete(route);this$1.ensureURL();this$1.router.afterHooks.forEach(function(hook){hook&&hook(route,prev);});if(!this$1.ready){this$1.ready=true;this$1.readyCbs.forEach(function(cb){cb(route);});}},function(err){if(onAbort){onAbort(err);}
if(err&&!this$1.ready){if(!isNavigationFailure(err,NavigationFailureType.redirected)||prev!==START){this$1.ready=true;this$1.readyErrorCbs.forEach(function(cb){cb(err);});}}});};History.prototype.confirmTransition=function confirmTransition(route,onComplete,onAbort){var this$1=this;var current=this.current;this.pending=route;var abort=function(err){if(!isNavigationFailure(err)&&isError(err)){if(this$1.errorCbs.length){this$1.errorCbs.forEach(function(cb){cb(err);});}else{{warn(false,'uncaught error during route navigation:');}
console.error(err);}}
onAbort&&onAbort(err);};var lastRouteIndex=route.matched.length-1;var lastCurrentIndex=current.matched.length-1;if(isSameRoute(route,current)&&lastRouteIndex===lastCurrentIndex&&route.matched[lastRouteIndex]===current.matched[lastCurrentIndex]){this.ensureURL();if(route.hash){handleScroll(this.router,current,route,false);}
return abort(createNavigationDuplicatedError(current,route))}
var ref=resolveQueue(this.current.matched,route.matched);var updated=ref.updated;var deactivated=ref.deactivated;var activated=ref.activated;var queue=[].concat(extractLeaveGuards(deactivated),this.router.beforeHooks,extractUpdateHooks(updated),activated.map(function(m){return m.beforeEnter;}),resolveAsyncComponents(activated));var iterator=function(hook,next){if(this$1.pending!==route){return abort(createNavigationCancelledError(current,route))}
try{hook(route,current,function(to){if(to===false){this$1.ensureURL(true);abort(createNavigationAbortedError(current,route));}else if(isError(to)){this$1.ensureURL(true);abort(to);}else if(typeof to==='string'||(typeof to==='object'&&(typeof to.path==='string'||typeof to.name==='string'))){abort(createNavigationRedirectedError(current,route));if(typeof to==='object'&&to.replace){this$1.replace(to);}else{this$1.push(to);}}else{next(to);}});}catch(e){abort(e);}};runQueue(queue,iterator,function(){var enterGuards=extractEnterGuards(activated);var queue=enterGuards.concat(this$1.router.resolveHooks);runQueue(queue,iterator,function(){if(this$1.pending!==route){return abort(createNavigationCancelledError(current,route))}
this$1.pending=null;onComplete(route);if(this$1.router.app){this$1.router.app.$nextTick(function(){handleRouteEntered(route);});}});});};History.prototype.updateRoute=function updateRoute(route){this.current=route;this.cb&&this.cb(route);};History.prototype.setupListeners=function setupListeners(){};History.prototype.teardown=function teardown(){this.listeners.forEach(function(cleanupListener){cleanupListener();});this.listeners=[];this.current=START;this.pending=null;};function normalizeBase(base){if(!base){if(inBrowser){var baseEl=document.querySelector('base');base=(baseEl&&baseEl.getAttribute('href'))||'/';base=base.replace(/^https?:\/\/[^\/]+/,'');}else{base='/';}}
if(base.charAt(0)!=='/'){base='/'+base;}
return base.replace(/\/$/,'')}
function resolveQueue(current,next){var i;var max=Math.max(current.length,next.length);for(i=0;i<max;i++){if(current[i]!==next[i]){break}}
return{updated:next.slice(0,i),activated:next.slice(i),deactivated:current.slice(i)}}
function extractGuards(records,name,bind,reverse){var guards=flatMapComponents(records,function(def,instance,match,key){var guard=extractGuard(def,name);if(guard){return Array.isArray(guard)?guard.map(function(guard){return bind(guard,instance,match,key);}):bind(guard,instance,match,key)}});return flatten(reverse?guards.reverse():guards)}
function extractGuard(def,key){if(typeof def!=='function'){def=_Vue.extend(def);}
return def.options[key]}
function extractLeaveGuards(deactivated){return extractGuards(deactivated,'beforeRouteLeave',bindGuard,true)}
function extractUpdateHooks(updated){return extractGuards(updated,'beforeRouteUpdate',bindGuard)}
function bindGuard(guard,instance){if(instance){return function boundRouteGuard(){return guard.apply(instance,arguments)}}}
function extractEnterGuards(activated){return extractGuards(activated,'beforeRouteEnter',function(guard,_,match,key){return bindEnterGuard(guard,match,key)})}
function bindEnterGuard(guard,match,key){return function routeEnterGuard(to,from,next){return guard(to,from,function(cb){if(typeof cb==='function'){if(!match.enteredCbs[key]){match.enteredCbs[key]=[];}
match.enteredCbs[key].push(cb);}
next(cb);})}}
var HTML5History=(function(History){function HTML5History(router,base){History.call(this,router,base);this._startLocation=getLocation(this.base);}
if(History)HTML5History.__proto__=History;HTML5History.prototype=Object.create(History&&History.prototype);HTML5History.prototype.constructor=HTML5History;HTML5History.prototype.setupListeners=function setupListeners(){var this$1=this;if(this.listeners.length>0){return}
var router=this.router;var expectScroll=router.options.scrollBehavior;var supportsScroll=supportsPushState&&expectScroll;if(supportsScroll){this.listeners.push(setupScroll());}
var handleRoutingEvent=function(){var current=this$1.current;var location=getLocation(this$1.base);if(this$1.current===START&&location===this$1._startLocation){return}
this$1.transitionTo(location,function(route){if(supportsScroll){handleScroll(router,route,current,true);}});};window.addEventListener('popstate',handleRoutingEvent);this.listeners.push(function(){window.removeEventListener('popstate',handleRoutingEvent);});};HTML5History.prototype.go=function go(n){window.history.go(n);};HTML5History.prototype.push=function push(location,onComplete,onAbort){var this$1=this;var ref=this;var fromRoute=ref.current;this.transitionTo(location,function(route){pushState(cleanPath(this$1.base+route.fullPath));handleScroll(this$1.router,route,fromRoute,false);onComplete&&onComplete(route);},onAbort);};HTML5History.prototype.replace=function replace(location,onComplete,onAbort){var this$1=this;var ref=this;var fromRoute=ref.current;this.transitionTo(location,function(route){replaceState(cleanPath(this$1.base+route.fullPath));handleScroll(this$1.router,route,fromRoute,false);onComplete&&onComplete(route);},onAbort);};HTML5History.prototype.ensureURL=function ensureURL(push){if(getLocation(this.base)!==this.current.fullPath){var current=cleanPath(this.base+this.current.fullPath);push?pushState(current):replaceState(current);}};HTML5History.prototype.getCurrentLocation=function getCurrentLocation(){return getLocation(this.base)};return HTML5History;}(History));function getLocation(base){var path=window.location.pathname;var pathLowerCase=path.toLowerCase();var baseLowerCase=base.toLowerCase();if(base&&((pathLowerCase===baseLowerCase)||(pathLowerCase.indexOf(cleanPath(baseLowerCase+'/'))===0))){path=path.slice(base.length);}
return(path||'/')+window.location.search+window.location.hash}
var HashHistory=(function(History){function HashHistory(router,base,fallback){History.call(this,router,base);if(fallback&&checkFallback(this.base)){return}
ensureSlash();}
if(History)HashHistory.__proto__=History;HashHistory.prototype=Object.create(History&&History.prototype);HashHistory.prototype.constructor=HashHistory;HashHistory.prototype.setupListeners=function setupListeners(){var this$1=this;if(this.listeners.length>0){return}
var router=this.router;var expectScroll=router.options.scrollBehavior;var supportsScroll=supportsPushState&&expectScroll;if(supportsScroll){this.listeners.push(setupScroll());}
var handleRoutingEvent=function(){var current=this$1.current;if(!ensureSlash()){return}
this$1.transitionTo(getHash(),function(route){if(supportsScroll){handleScroll(this$1.router,route,current,true);}
if(!supportsPushState){replaceHash(route.fullPath);}});};var eventType=supportsPushState?'popstate':'hashchange';window.addEventListener(eventType,handleRoutingEvent);this.listeners.push(function(){window.removeEventListener(eventType,handleRoutingEvent);});};HashHistory.prototype.push=function push(location,onComplete,onAbort){var this$1=this;var ref=this;var fromRoute=ref.current;this.transitionTo(location,function(route){pushHash(route.fullPath);handleScroll(this$1.router,route,fromRoute,false);onComplete&&onComplete(route);},onAbort);};HashHistory.prototype.replace=function replace(location,onComplete,onAbort){var this$1=this;var ref=this;var fromRoute=ref.current;this.transitionTo(location,function(route){replaceHash(route.fullPath);handleScroll(this$1.router,route,fromRoute,false);onComplete&&onComplete(route);},onAbort);};HashHistory.prototype.go=function go(n){window.history.go(n);};HashHistory.prototype.ensureURL=function ensureURL(push){var current=this.current.fullPath;if(getHash()!==current){push?pushHash(current):replaceHash(current);}};HashHistory.prototype.getCurrentLocation=function getCurrentLocation(){return getHash()};return HashHistory;}(History));function checkFallback(base){var location=getLocation(base);if(!/^\/#/.test(location)){window.location.replace(cleanPath(base+'/#'+location));return true}}
function ensureSlash(){var path=getHash();if(path.charAt(0)==='/'){return true}
replaceHash('/'+path);return false}
function getHash(){var href=window.location.href;var index=href.indexOf('#');if(index<0){return ''}
href=href.slice(index+1);return href}
function getUrl(path){var href=window.location.href;var i=href.indexOf('#');var base=i>=0?href.slice(0,i):href;return(base+"#"+path)}
function pushHash(path){if(supportsPushState){pushState(getUrl(path));}else{window.location.hash=path;}}
function replaceHash(path){if(supportsPushState){replaceState(getUrl(path));}else{window.location.replace(getUrl(path));}}
var AbstractHistory=(function(History){function AbstractHistory(router,base){History.call(this,router,base);this.stack=[];this.index=-1;}
if(History)AbstractHistory.__proto__=History;AbstractHistory.prototype=Object.create(History&&History.prototype);AbstractHistory.prototype.constructor=AbstractHistory;AbstractHistory.prototype.push=function push(location,onComplete,onAbort){var this$1=this;this.transitionTo(location,function(route){this$1.stack=this$1.stack.slice(0,this$1.index+1).concat(route);this$1.index++;onComplete&&onComplete(route);},onAbort);};AbstractHistory.prototype.replace=function replace(location,onComplete,onAbort){var this$1=this;this.transitionTo(location,function(route){this$1.stack=this$1.stack.slice(0,this$1.index).concat(route);onComplete&&onComplete(route);},onAbort);};AbstractHistory.prototype.go=function go(n){var this$1=this;var targetIndex=this.index+n;if(targetIndex<0||targetIndex>=this.stack.length){return}
var route=this.stack[targetIndex];this.confirmTransition(route,function(){var prev=this$1.current;this$1.index=targetIndex;this$1.updateRoute(route);this$1.router.afterHooks.forEach(function(hook){hook&&hook(route,prev);});},function(err){if(isNavigationFailure(err,NavigationFailureType.duplicated)){this$1.index=targetIndex;}});};AbstractHistory.prototype.getCurrentLocation=function getCurrentLocation(){var current=this.stack[this.stack.length-1];return current?current.fullPath:'/'};AbstractHistory.prototype.ensureURL=function ensureURL(){};return AbstractHistory;}(History));var VueRouter=function VueRouter(options){if(options===void 0)options={};{warn(this instanceof VueRouter,"Router must be called with the new operator.");}
this.app=null;this.apps=[];this.options=options;this.beforeHooks=[];this.resolveHooks=[];this.afterHooks=[];this.matcher=createMatcher(options.routes||[],this);var mode=options.mode||'hash';this.fallback=mode==='history'&&!supportsPushState&&options.fallback!==false;if(this.fallback){mode='hash';}
if(!inBrowser){mode='abstract';}
this.mode=mode;switch(mode){case 'history':this.history=new HTML5History(this,options.base);break
case 'hash':this.history=new HashHistory(this,options.base,this.fallback);break
case 'abstract':this.history=new AbstractHistory(this,options.base);break
default:{assert(false,("invalid mode: "+mode));}}};var prototypeAccessors={currentRoute:{configurable:true}};VueRouter.prototype.match=function match(raw,current,redirectedFrom){return this.matcher.match(raw,current,redirectedFrom)};prototypeAccessors.currentRoute.get=function(){return this.history&&this.history.current};VueRouter.prototype.init=function init(app){var this$1=this;assert(install.installed,"not installed. Make sure to call `Vue.use(VueRouter)` "+
"before creating root instance.");this.apps.push(app);app.$once('hook:destroyed',function(){var index=this$1.apps.indexOf(app);if(index>-1){this$1.apps.splice(index,1);}
if(this$1.app===app){this$1.app=this$1.apps[0]||null;}
if(!this$1.app){this$1.history.teardown();}});if(this.app){return}
this.app=app;var history=this.history;if(history instanceof HTML5History||history instanceof HashHistory){var handleInitialScroll=function(routeOrError){var from=history.current;var expectScroll=this$1.options.scrollBehavior;var supportsScroll=supportsPushState&&expectScroll;if(supportsScroll&&'fullPath'in routeOrError){handleScroll(this$1,routeOrError,from,false);}};var setupListeners=function(routeOrError){history.setupListeners();handleInitialScroll(routeOrError);};history.transitionTo(history.getCurrentLocation(),setupListeners,setupListeners);}
history.listen(function(route){this$1.apps.forEach(function(app){app._route=route;});});};VueRouter.prototype.beforeEach=function beforeEach(fn){return registerHook(this.beforeHooks,fn)};VueRouter.prototype.beforeResolve=function beforeResolve(fn){return registerHook(this.resolveHooks,fn)};VueRouter.prototype.afterEach=function afterEach(fn){return registerHook(this.afterHooks,fn)};VueRouter.prototype.onReady=function onReady(cb,errorCb){this.history.onReady(cb,errorCb);};VueRouter.prototype.onError=function onError(errorCb){this.history.onError(errorCb);};VueRouter.prototype.push=function push(location,onComplete,onAbort){var this$1=this;if(!onComplete&&!onAbort&&typeof Promise!=='undefined'){return new Promise(function(resolve,reject){this$1.history.push(location,resolve,reject);})}else{this.history.push(location,onComplete,onAbort);}};VueRouter.prototype.replace=function replace(location,onComplete,onAbort){var this$1=this;if(!onComplete&&!onAbort&&typeof Promise!=='undefined'){return new Promise(function(resolve,reject){this$1.history.replace(location,resolve,reject);})}else{this.history.replace(location,onComplete,onAbort);}};VueRouter.prototype.go=function go(n){this.history.go(n);};VueRouter.prototype.back=function back(){this.go(-1);};VueRouter.prototype.forward=function forward(){this.go(1);};VueRouter.prototype.getMatchedComponents=function getMatchedComponents(to){var route=to?to.matched?to:this.resolve(to).route:this.currentRoute;if(!route){return[]}
return[].concat.apply([],route.matched.map(function(m){return Object.keys(m.components).map(function(key){return m.components[key]})}))};VueRouter.prototype.resolve=function resolve(to,current,append){current=current||this.history.current;var location=normalizeLocation(to,current,append,this);var route=this.match(location,current);var fullPath=route.redirectedFrom||route.fullPath;var base=this.history.base;var href=createHref(base,fullPath,this.mode);return{location:location,route:route,href:href,normalizedTo:location,resolved:route}};VueRouter.prototype.getRoutes=function getRoutes(){return this.matcher.getRoutes()};VueRouter.prototype.addRoute=function addRoute(parentOrRoute,route){this.matcher.addRoute(parentOrRoute,route);if(this.history.current!==START){this.history.transitionTo(this.history.getCurrentLocation());}};VueRouter.prototype.addRoutes=function addRoutes(routes){{warn(false,'router.addRoutes() is deprecated and has been removed in Vue Router 4. Use router.addRoute() instead.');}
this.matcher.addRoutes(routes);if(this.history.current!==START){this.history.transitionTo(this.history.getCurrentLocation());}};Object.defineProperties(VueRouter.prototype,prototypeAccessors);function registerHook(list,fn){list.push(fn);return function(){var i=list.indexOf(fn);if(i>-1){list.splice(i,1);}}}
function createHref(base,fullPath,mode){var path=mode==='hash'?'#'+fullPath:fullPath;return base?cleanPath(base+'/'+path):path}
VueRouter.install=install;VueRouter.version='3.5.4';VueRouter.isNavigationFailure=isNavigationFailure;VueRouter.NavigationFailureType=NavigationFailureType;VueRouter.START_LOCATION=START;if(inBrowser&&window.Vue){window.Vue.use(VueRouter);}
return VueRouter;})));!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rrule=e():t.rrule=e()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Frequency:()=>U,RRule:()=>Dt,RRuleSet:()=>Mt,Weekday:()=>r,rrulestr:()=>Yt});var n=["MO","TU","WE","TH","FR","SA","SU"],r=function(){function t(t,e){if(0===e)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=e}return t.fromStr=function(e){return new t(n.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},t.prototype.toString=function(){var t=n[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},t.prototype.getJsWeekday=function(){return 6===this.weekday?0:this.weekday+1},t}(),i=function(t){return null!=t},o=function(t){return"number"==typeof t},a=function(t){return"string"==typeof t&&n.includes(t)},s=Array.isArray,u=function(t,e){void 0===e&&(e=t),1===arguments.length&&(e=t,t=0);for(var n=[],r=t;r<e;r++)n.push(r);return n},h=function(t,e){var n=0,r=[];if(s(t))for(;n<e;n++)r[n]=[].concat(t);else for(;n<e;n++)r[n]=t;return r};function y(t,e,n){void 0===n&&(n=" ");var r=String(t);return e>>=0,r.length>e?String(r):((e-=r.length)>n.length&&(n+=h(n,e/n.length)),n.slice(0,e)+String(r))}var c,d=function(t,e){var n=t%e;return n*e<0?n+e:n},l=function(t,e){return{div:Math.floor(t/e),mod:d(t,e)}},f=function(t){return!i(t)||0===t.length},p=function(t){return!f(t)},m=function(t,e){return p(t)&&-1!==t.indexOf(e)};!function(t){t.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],t.ONE_DAY=864e5,t.MAXYEAR=9999,t.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),t.PY_WEEKDAYS=[6,0,1,2,3,4,5],t.getYearDay=function(e){var n=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((n.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/t.ONE_DAY)+1},t.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},t.isDate=function(t){return t instanceof Date},t.isValidDate=function(e){return t.isDate(e)&&!isNaN(e.getTime())},t.tzOffset=function(t){return 60*t.getTimezoneOffset()*1e3},t.daysBetween=function(e,n){var r=e.getTime()-t.tzOffset(e)-(n.getTime()-t.tzOffset(n));return Math.round(r/t.ONE_DAY)},t.toOrdinal=function(e){return t.daysBetween(e,t.ORDINAL_BASE)},t.fromOrdinal=function(e){return new Date(t.ORDINAL_BASE.getTime()+e*t.ONE_DAY)},t.getMonthDays=function(e){var n=e.getUTCMonth();return 1===n&&t.isLeapYear(e.getUTCFullYear())?29:t.MONTH_DAYS[n]},t.getWeekday=function(e){return t.PY_WEEKDAYS[e.getUTCDay()]},t.monthRange=function(e,n){var r=new Date(Date.UTC(e,n,1));return[t.getWeekday(r),t.getMonthDays(r)]},t.combine=function(t,e){return e=e||t,new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},t.clone=function(t){return new Date(t.getTime())},t.cloneDates=function(e){for(var n=[],r=0;r<e.length;r++)n.push(t.clone(e[r]));return n},t.sort=function(t){t.sort((function(t,e){return t.getTime()-e.getTime()}))},t.timeToUntilString=function(t,e){void 0===e&&(e=!0);var n=new Date(t);return[y(n.getUTCFullYear().toString(),4,"0"),y(n.getUTCMonth()+1,2,"0"),y(n.getUTCDate(),2,"0"),"T",y(n.getUTCHours(),2,"0"),y(n.getUTCMinutes(),2,"0"),y(n.getUTCSeconds(),2,"0"),e?"Z":""].join("")},t.untilStringToDate=function(t){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/.exec(t);if(!e)throw new Error("Invalid UNTIL value: ".concat(t));return new Date(Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[5],10)||0,parseInt(e[6],10)||0,parseInt(e[7],10)||0))}}(c||(c={}));const b=c;const w=function(){function t(t,e){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=e,"between"===t?(this.maxDate=e.inc?e.before:new Date(e.before.getTime()-1),this.minDate=e.inc?e.after:new Date(e.after.getTime()+1)):"before"===t?this.maxDate=e.inc?e.dt:new Date(e.dt.getTime()-1):"after"===t&&(this.minDate=e.inc?e.dt:new Date(e.dt.getTime()+1))}return t.prototype.accept=function(t){++this.total;var e=this.minDate&&t<this.minDate,n=this.maxDate&&t>this.maxDate;if("between"===this.method){if(e)return!0;if(n)return!1}else if("before"===this.method){if(n)return!1}else if("after"===this.method)return!!e||(this.add(t),!1);return this.add(t)},t.prototype.add=function(t){return this._result.push(t),!0},t.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;default:return t.length?t[t.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}();var v=function(t,e){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},v(t,e)};function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var k=function(){return k=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},k.apply(this,arguments)};Object.create;function E(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;const T=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.iterator=r,i}return g(e,t),e.prototype.add=function(t){return!!this.iterator(t,this._result.length)&&(this._result.push(t),!0)},e}(w);const D={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}};var O=function(t,e){return-1!==t.indexOf(e)},x=function(t){return t.toString()},Y=function(t,e,n){return"".concat(e," ").concat(n,", ").concat(t)};const S=function(){function t(t,e,n,r){if(void 0===e&&(e=x),void 0===n&&(n=D),void 0===r&&(r=Y),this.text=[],this.language=n||D,this.gettext=e,this.dateFormatter=r,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var o=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);o.sort((function(t,e){return t-e})),a.sort((function(t,e){return e-t})),this.bymonthday=o.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(i(this.origOptions.byweekday)){var u=s(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],h=String(u);this.byweekday={allWeeks:u.filter((function(t){return!t.n})),someWeeks:u.filter((function(t){return Boolean(t.n)})),isWeekdays:-1!==h.indexOf("MO")&&-1!==h.indexOf("TU")&&-1!==h.indexOf("WE")&&-1!==h.indexOf("TH")&&-1!==h.indexOf("FR")&&-1===h.indexOf("SA")&&-1===h.indexOf("SU"),isEveryDay:-1!==h.indexOf("MO")&&-1!==h.indexOf("TU")&&-1!==h.indexOf("WE")&&-1!==h.indexOf("TH")&&-1!==h.indexOf("FR")&&-1!==h.indexOf("SA")&&-1!==h.indexOf("SU")};var y=function(t,e){return t.weekday-e.weekday};this.byweekday.allWeeks.sort(y),this.byweekday.someWeeks.sort(y),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){if(!(e.options.freq in t.IMPLEMENTED))return!1;if(e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(O(["dtstart","wkst","freq"],n))return!0;if(!O(t.IMPLEMENTED[e.options.freq],n))return!1}return!0},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[Dt.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},t.prototype.MINUTELY=function(){var t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},t.prototype.DAILY=function(){var t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?1===this.options.interval?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(1===this.options.interval&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},t.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},t.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},t.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},t.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(t){var e;t=parseInt(t.toString(),10);var n=this.gettext;if(-1===t)return n("last");var r=Math.abs(t);switch(r){case 1:case 21:case 31:e=r+n("st");break;case 2:case 22:e=r+n("nd");break;case 3:case 23:e=r+n("rd");break;default:e=r+n("th")}return t<0?e+" "+n("last"):e},t.prototype.monthtext=function(t){return this.language.monthNames[t-1]},t.prototype.weekdaytext=function(t){var e=o(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[e]},t.prototype.plural=function(t){return t%100!=1},t.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},t.prototype.list=function(t,e,n,r){var i=this;void 0===r&&(r=","),s(t)||(t=[t]);e=e||function(t){return t.toString()};var o=function(t){return e&&e.call(i,t)};return n?function(t,e,n){for(var r="",i=0;i<t.length;i++)0!==i&&(i===t.length-1?r+=" "+n+" ":r+=e+" "),r+=t[i];return r}(t.map(o),r,n):t.map(o).join(r+" ")},t}();var U,L=function(){function t(t){this.done=!0,this.rules=t}return t.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&null===this.symbol},t.prototype.nextSymbol=function(){var t,e;this.symbol=null,this.value=null;do{if(this.done)return!1;for(var n in t=null,this.rules){var r=this.rules[n].exec(this.text);r&&(null===t||r[0].length>t[0].length)&&(t=r,e=n)}if(null!=t&&(this.text=this.text.substr(t[0].length),""===this.text&&(this.done=!0)),null==t)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"===e);return this.symbol=e,this.value=t,!0},t.prototype.accept=function(t){if(this.symbol===t){if(this.value){var e=this.value;return this.nextSymbol(),e}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},t}();function M(t,e){void 0===e&&(e=D);var n={},r=new L(e.tokens);return r.start(t)?(function(){r.expect("every");var t=r.acceptNumber();t&&(n.interval=parseInt(t[0],10));if(r.isDone())throw new Error("Unexpected end");switch(r.symbol){case"day(s)":n.freq=Dt.DAILY,r.nextSymbol()&&(!function(){if(!r.accept("at"))return;do{var t=r.acceptNumber();if(!t)throw new Error("Unexpected symbol "+r.symbol+", expected hour");for(n.byhour=[parseInt(t[0],10)];r.accept("comma");){if(!(t=r.acceptNumber()))throw new Error("Unexpected symbol "+r.symbol+"; expected hour");n.byhour.push(parseInt(t[0],10))}}while(r.accept("comma")||r.accept("at"))}(),u());break;case"weekday(s)":n.freq=Dt.WEEKLY,n.byweekday=[Dt.MO,Dt.TU,Dt.WE,Dt.TH,Dt.FR],r.nextSymbol(),u();break;case"week(s)":n.freq=Dt.WEEKLY,r.nextSymbol()&&(i(),u());break;case"hour(s)":n.freq=Dt.HOURLY,r.nextSymbol()&&(i(),u());break;case"minute(s)":n.freq=Dt.MINUTELY,r.nextSymbol()&&(i(),u());break;case"month(s)":n.freq=Dt.MONTHLY,r.nextSymbol()&&(i(),u());break;case"year(s)":n.freq=Dt.YEARLY,r.nextSymbol()&&(i(),u());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=Dt.WEEKLY;var e=r.symbol.substr(0,2).toUpperCase();if(n.byweekday=[Dt[e]],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var h=a();if(!h)throw new Error("Unexpected symbol "+r.symbol+", expected weekday");n.byweekday.push(Dt[h]),r.nextSymbol()}!function(){r.accept("on"),r.accept("the");var t=s();if(!t)return;n.bymonthday=[t],r.nextSymbol();for(;r.accept("comma");){if(!(t=s()))throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.bymonthday.push(t),r.nextSymbol()}}(),u();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=Dt.YEARLY,n.bymonth=[o()],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var y=o();if(!y)throw new Error("Unexpected symbol "+r.symbol+", expected month");n.bymonth.push(y),r.nextSymbol()}i(),u();break;default:throw new Error("Unknown symbol")}}(),n):null;function i(){var t=r.accept("on"),e=r.accept("the");if(t||e)do{var i=s(),u=a(),h=o();if(i)u?(r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(Dt[u].nth(i))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(i),r.accept("day(s)"));else if(u)r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(Dt[u]);else if("weekday(s)"===r.symbol)r.nextSymbol(),n.byweekday||(n.byweekday=[Dt.MO,Dt.TU,Dt.WE,Dt.TH,Dt.FR]);else if("week(s)"===r.symbol){r.nextSymbol();var y=r.acceptNumber();if(!y)throw new Error("Unexpected symbol "+r.symbol+", expected week number");for(n.byweekno=[parseInt(y[0],10)];r.accept("comma");){if(!(y=r.acceptNumber()))throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.byweekno.push(parseInt(y[0],10))}}else{if(!h)return;r.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(h)}}while(r.accept("comma")||r.accept("the")||r.accept("on"))}function o(){switch(r.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function a(){switch(r.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return r.symbol.substr(0,2).toUpperCase();default:return!1}}function s(){switch(r.symbol){case"last":return r.nextSymbol(),-1;case"first":return r.nextSymbol(),1;case"second":return r.nextSymbol(),r.accept("last")?-2:2;case"third":return r.nextSymbol(),r.accept("last")?-3:3;case"nth":var t=parseInt(r.value[1],10);if(t<-366||t>366)throw new Error("Nth out of range: "+t);return r.nextSymbol(),r.accept("last")?-t:t;default:return!1}}function u(){if("until"===r.symbol){var t=Date.parse(r.text);if(!t)throw new Error("Cannot parse until date:"+r.text);n.until=new Date(t)}else r.accept("for")&&(n.count=parseInt(r.value[0],10),r.expect("number"))}}function _(t){return t<U.HOURLY}!function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"}(U||(U={}));var R=function(t,e){return void 0===e&&(e=D),new Dt(M(t,e)||void 0)},A=["count","until","interval","byweekday","bymonthday","bymonth"];S.IMPLEMENTED=[],S.IMPLEMENTED[U.HOURLY]=A,S.IMPLEMENTED[U.MINUTELY]=A,S.IMPLEMENTED[U.DAILY]=["byhour"].concat(A),S.IMPLEMENTED[U.WEEKLY]=A,S.IMPLEMENTED[U.MONTHLY]=A,S.IMPLEMENTED[U.YEARLY]=["byweekno","byyearday"].concat(A);var N=S.isFullyConvertible,C=function(){function t(t,e,n,r){this.hour=t,this.minute=e,this.second=n,this.millisecond=r||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)+this.millisecond},t}(),I=function(t){function e(e,n,r,i,o,a,s){var u=t.call(this,i,o,a,s)||this;return u.year=e,u.month=n,u.day=r,u}return g(e,t),e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return c.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var e=Math.floor(this.month/12),n=d(this.month,12);this.month=n,this.year+=e,0===this.month&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,e){e>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-e))+7*t:this.day+=-(this.getWeekday()-e)+7*t,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,e,n){for(e&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var r=l(this.hour,24),i=r.div,o=r.mod;if(i&&(this.hour=o,this.addDaily(i)),f(n)||m(n,this.hour))break}},e.prototype.addMinutes=function(t,e,n,r){for(e&&(this.minute+=Math.floor((1439-(60*this.hour+this.minute))/t)*t);;){this.minute+=t;var i=l(this.minute,60),o=i.div,a=i.mod;if(o&&(this.minute=a,this.addHours(o,!1,n)),(f(n)||m(n,this.hour))&&(f(r)||m(r,this.minute)))break}},e.prototype.addSeconds=function(t,e,n,r,i){for(e&&(this.second+=Math.floor((86399-(3600*this.hour+60*this.minute+this.second))/t)*t);;){this.second+=t;var o=l(this.second,60),a=o.div,s=o.mod;if(a&&(this.second=s,this.addMinutes(a,!1,n,r)),(f(n)||m(n,this.hour))&&(f(r)||m(r,this.minute))&&(f(i)||m(i,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=c.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,13===this.month&&(this.month=1,++this.year,this.year>c.MAXYEAR))return;t=c.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,e){var n=t.freq,r=t.interval,i=t.wkst,o=t.byhour,a=t.byminute,s=t.bysecond;switch(n){case U.YEARLY:return this.addYears(r);case U.MONTHLY:return this.addMonths(r);case U.WEEKLY:return this.addWeekly(r,i);case U.DAILY:return this.addDaily(r);case U.HOURLY:return this.addHours(r,e,o);case U.MINUTELY:return this.addMinutes(r,e,o,a);case U.SECONDLY:return this.addSeconds(r,e,o,a,s)}},e}(C);function W(t){for(var e=[],n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];m(Tt,i)||e.push(i),b.isDate(t[i])&&!b.isValidDate(t[i])&&e.push(i)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return k({},t)}function j(t){var e=k(k({},Et),W(t));if(i(e.byeaster)&&(e.freq=Dt.YEARLY),!i(e.freq)||!Dt.FREQUENCIES[e.freq])throw new Error("Invalid frequency: ".concat(e.freq," ").concat(t.freq));if(e.dtstart||(e.dtstart=new Date((new Date).setMilliseconds(0))),i(e.wkst)?o(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=Dt.MO.weekday,i(e.bysetpos)){o(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var n=0;n<e.bysetpos.length;n++){if(0===(y=e.bysetpos[n])||!(y>=-366&&y<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||p(e.byweekno)||p(e.byyearday)||Boolean(e.bymonthday)||p(e.bymonthday)||i(e.byweekday)||i(e.byeaster)))switch(e.freq){case Dt.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case Dt.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case Dt.WEEKLY:e.byweekday=[b.getWeekday(e.dtstart)]}if(i(e.bymonth)&&!s(e.bymonth)&&(e.bymonth=[e.bymonth]),i(e.byyearday)&&!s(e.byyearday)&&o(e.byyearday)&&(e.byyearday=[e.byyearday]),i(e.bymonthday))if(s(e.bymonthday)){var u=[],h=[];for(n=0;n<e.bymonthday.length;n++){var y;(y=e.bymonthday[n])>0?u.push(y):y<0&&h.push(y)}e.bymonthday=u,e.bynmonthday=h}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);else e.bymonthday=[],e.bynmonthday=[];if(i(e.byweekno)&&!s(e.byweekno)&&(e.byweekno=[e.byweekno]),i(e.byweekday))if(o(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(a(e.byweekday))e.byweekday=[r.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof r)!e.byweekday.n||e.freq>Dt.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{var c=[],d=[];for(n=0;n<e.byweekday.length;n++){var l=e.byweekday[n];o(l)?c.push(l):a(l)?c.push(r.fromStr(l).weekday):!l.n||e.freq>Dt.MONTHLY?c.push(l.weekday):d.push([l.weekday,l.n])}e.byweekday=p(c)?c:null,e.bynweekday=p(d)?d:null}else e.bynweekday=null;return i(e.byhour)?o(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<Dt.HOURLY?[e.dtstart.getUTCHours()]:null,i(e.byminute)?o(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<Dt.MINUTELY?[e.dtstart.getUTCMinutes()]:null,i(e.bysecond)?o(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<Dt.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function H(t){var e=t.split("\n").map(P).filter((function(t){return null!==t}));return k(k({},e[0]),e[1])}function q(t){var e={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!n)return e;var r=n[1],i=n[2];return r&&(e.tzid=r),e.dtstart=b.untilStringToDate(i),e}function P(t){if(!(t=t.replace(/^\s+|\s+$/,"")).length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return z(t);var n=e[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return z(t);case"DTSTART":return q(t);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(t))}}function z(t){var e=q(t.replace(/^RRULE:/i,""));return t.replace(/^(?:RRULE|EXRULE):/i,"").split(";").forEach((function(n){var i=n.split("="),o=i[0],a=i[1];switch(o.toUpperCase()){case"FREQ":e.freq=U[a.toUpperCase()];break;case"WKST":e.wkst=kt[a.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var s=function(t){if(-1!==t.indexOf(",")){return t.split(",").map(F)}return F(t)}(a),u=o.toLowerCase();e[u]=s;break;case"BYWEEKDAY":case"BYDAY":e.byweekday=function(t){return t.split(",").map((function(t){if(2===t.length)return kt[t];var e=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!e||e.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var n=Number(e[1]),i=e[2],o=kt[i].weekday;return new r(o,n)}))}(a);break;case"DTSTART":case"TZID":var h=q(t);e.tzid=h.tzid,e.dtstart=h.dtstart;break;case"UNTIL":e.until=b.untilStringToDate(a);break;case"BYEASTER":e.byeaster=Number(a);break;default:throw new Error("Unknown RRULE property '"+o+"'")}})),e}function F(t){return/^[+-]?\d+$/.test(t)?Number(t):t}var K=function(){function t(t,e){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=e}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||"UTC"===this.tzid.toUpperCase()},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=b.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){var t;if(this.isUTC)return this.date;var e=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:e})),r=new Date(this.date.toLocaleString(void 0,{timeZone:null!==(t=this.tzid)&&void 0!==t?t:"UTC"})).getTime()-n.getTime();return new Date(this.date.getTime()-r)},t}();function B(t){for(var e,n=[],a="",u=Object.keys(t),h=Object.keys(Et),y=0;y<u.length;y++)if("tzid"!==u[y]&&m(h,u[y])){var c=u[y].toUpperCase(),d=t[u[y]],l="";if(i(d)&&(!s(d)||d.length)){switch(c){case"FREQ":l=Dt.FREQUENCIES[t.freq];break;case"WKST":l=o(d)?new r(d).toString():d.toString();break;case"BYWEEKDAY":c="BYDAY",l=(e=d,s(e)?e:[e]).map((function(t){return t instanceof r?t:s(t)?new r(t[0],t[1]):new r(t)})).toString();break;case"DTSTART":a=Z(d,t.tzid);break;case"UNTIL":l=b.timeToUntilString(d,!t.tzid);break;default:if(s(d)){for(var f=[],p=0;p<d.length;p++)f[p]=String(d[p]);l=f.toString()}else l=String(d)}l&&n.push([c,l])}}var w=n.map((function(t){var e=t[0],n=t[1];return"".concat(e,"=").concat(n.toString())})).join(";"),v="";return""!==w&&(v="RRULE:".concat(w)),[a,v].filter((function(t){return!!t})).join("\n")}function Z(t,e){return t?"DTSTART"+new K(new Date(t),e).toString():""}function V(t,e){return Array.isArray(t)?!!Array.isArray(e)&&(t.length===e.length&&t.every((function(t,n){return t.getTime()===e[n].getTime()}))):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var X=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(t,e,n){e&&(e=e instanceof Date?b.clone(e):b.cloneDates(e)),"all"===t?this.all=e:(n._value=e,this[t].push(n))},t.prototype._cacheGet=function(t,e){var n=!1,r=e?Object.keys(e):[],i=function(t){for(var n=0;n<r.length;n++){var i=r[n];if(!V(e[i],t[i]))return!0}return!1},o=this[t];if("all"===t)n=this.all;else if(s(o))for(var a=0;a<o.length;a++){var u=o[a];if(!r.length||!i(u)){n=u._value;break}}if(!n&&this.all){var h=new w(t,e);for(a=0;a<this.all.length&&h.accept(this.all[a]);a++);n=h.getValue(),this._cacheAdd(t,n,e)}return s(n)?b.cloneDates(n):n instanceof Date?b.clone(n):n},t}(),G=E(E(E(E(E(E(E(E(E(E(E(E(E([],h(1,31),!0),h(2,28),!0),h(3,31),!0),h(4,30),!0),h(5,31),!0),h(6,30),!0),h(7,31),!0),h(8,31),!0),h(9,30),!0),h(10,31),!0),h(11,30),!0),h(12,31),!0),h(1,7),!0),Q=E(E(E(E(E(E(E(E(E(E(E(E(E([],h(1,31),!0),h(2,29),!0),h(3,31),!0),h(4,30),!0),h(5,31),!0),h(6,30),!0),h(7,31),!0),h(8,31),!0),h(9,30),!0),h(10,31),!0),h(11,30),!0),h(12,31),!0),h(1,7),!0),$=u(1,29),J=u(1,30),tt=u(1,31),et=u(1,32),nt=E(E(E(E(E(E(E(E(E(E(E(E(E([],et,!0),J,!0),et,!0),tt,!0),et,!0),tt,!0),et,!0),et,!0),tt,!0),et,!0),tt,!0),et,!0),et.slice(0,7),!0),rt=E(E(E(E(E(E(E(E(E(E(E(E(E([],et,!0),$,!0),et,!0),tt,!0),et,!0),tt,!0),et,!0),et,!0),tt,!0),et,!0),tt,!0),et,!0),et.slice(0,7),!0),it=u(-28,0),ot=u(-29,0),at=u(-30,0),st=u(-31,0),ut=E(E(E(E(E(E(E(E(E(E(E(E(E([],st,!0),ot,!0),st,!0),at,!0),st,!0),at,!0),st,!0),st,!0),at,!0),st,!0),at,!0),st,!0),st.slice(0,7),!0),ht=E(E(E(E(E(E(E(E(E(E(E(E(E([],st,!0),it,!0),st,!0),at,!0),st,!0),at,!0),st,!0),st,!0),at,!0),st,!0),at,!0),st,!0),st.slice(0,7),!0),yt=[0,31,60,91,121,152,182,213,244,274,305,335,366],ct=[0,31,59,90,120,151,181,212,243,273,304,334,365],dt=function(){for(var t=[],e=0;e<55;e++)t=t.concat(u(7));return t}();function lt(t,e){var n,r,i=new Date(Date.UTC(t,0,1)),o=b.isLeapYear(t)?366:365,a=b.isLeapYear(t+1)?366:365,s=b.toOrdinal(i),u=b.getWeekday(i),y=k(k({yearlen:o,nextyearlen:a,yearordinal:s,yearweekday:u},function(t){var e=b.isLeapYear(t)?366:365,n=new Date(Date.UTC(t,0,1)),r=b.getWeekday(n);if(365===e)return{mmask:G,mdaymask:rt,nmdaymask:ht,wdaymask:dt.slice(r),mrange:ct};return{mmask:Q,mdaymask:nt,nmdaymask:ut,wdaymask:dt.slice(r),mrange:yt}}(t)),{wnomask:null});if(f(e.byweekno))return y;y.wnomask=h(0,o+7);var c=n=d(7-u+e.wkst,7);c>=4?(c=0,r=y.yearlen+d(u-e.wkst,7)):r=o-c;for(var l=Math.floor(r/7),p=d(r,7),w=Math.floor(l+p/4),v=0;v<e.byweekno.length;v++){var g=e.byweekno[v];if(g<0&&(g+=w+1),g>0&&g<=w){var E=void 0;g>1?(E=c+7*(g-1),c!==n&&(E-=7-n)):E=c;for(var T=0;T<7&&(y.wnomask[E]=1,E++,y.wdaymask[E]!==e.wkst);T++);}}if(m(e.byweekno,1)){E=c+7*w;if(c!==n&&(E-=7-n),E<o)for(v=0;v<7&&(y.wnomask[E]=1,E+=1,y.wdaymask[E]!==e.wkst);v++);}if(c){var D=void 0;if(m(e.byweekno,-1))D=-1;else{var O=b.getWeekday(new Date(Date.UTC(t-1,0,1))),x=d(7-O.valueOf()+e.wkst,7),Y=b.isLeapYear(t-1)?366:365,S=void 0;x>=4?(x=0,S=Y+d(O-e.wkst,7)):S=o-c,D=Math.floor(52+d(S,7)/4)}if(m(e.byweekno,D))for(E=0;E<c;E++)y.wnomask[E]=1}return y}const ft=function(){function t(t){this.options=t}return t.prototype.rebuild=function(t,e){var n=this.options;if(t!==this.lastyear&&(this.yearinfo=lt(t,n)),p(n.bynweekday)&&(e!==this.lastmonth||t!==this.lastyear)){var r=this.yearinfo,o=r.yearlen,a=r.mrange,s=r.wdaymask;this.monthinfo=function(t,e,n,r,i,o){var a={lastyear:t,lastmonth:e,nwdaymask:[]},s=[];if(o.freq===Dt.YEARLY)if(f(o.bymonth))s=[[0,n]];else for(var u=0;u<o.bymonth.length;u++)e=o.bymonth[u],s.push(r.slice(e-1,e+1));else o.freq===Dt.MONTHLY&&(s=[r.slice(e-1,e+1)]);if(f(s))return a;for(a.nwdaymask=h(0,n),u=0;u<s.length;u++)for(var y=s[u],c=y[0],l=y[1]-1,p=0;p<o.bynweekday.length;p++){var m=void 0,b=o.bynweekday[p],w=b[0],v=b[1];v<0?(m=l+7*(v+1),m-=d(i[m]-w,7)):(m=c+7*(v-1),m+=d(7-i[m]+w,7)),c<=m&&m<=l&&(a.nwdaymask[m]=1)}return a}(t,e,o,a,s,n)}i(n.byeaster)&&(this.eastermask=function(t,e){void 0===e&&(e=0);var n=t%19,r=Math.floor(t/100),i=t%100,o=Math.floor(r/4),a=r%4,s=Math.floor((r+8)/25),u=Math.floor((r-s+1)/3),h=Math.floor(19*n+r-o-u+15)%30,y=Math.floor(i/4),c=i%4,d=Math.floor(32+2*a+2*y-h-c)%7,l=Math.floor((n+11*h+22*d)/451),f=Math.floor((h+d-7*l+114)/31),p=(h+d-7*l+114)%31+1,m=Date.UTC(t,f-1,p+e),b=Date.UTC(t,0,1);return[Math.ceil((m-b)/864e5)]}(t,n.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),t.prototype.ydayset=function(){return[u(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(t,e){for(var n=this.mrange[e-1],r=this.mrange[e],i=h(null,this.yearlen),o=n;o<r;o++)i[o]=o;return[i,n,r]},t.prototype.wdayset=function(t,e,n){for(var r=h(null,this.yearlen+7),i=b.toOrdinal(new Date(Date.UTC(t,e-1,n)))-this.yearordinal,o=i,a=0;a<7&&(r[i]=i,++i,this.wdaymask[i]!==this.options.wkst);a++);return[r,o,i]},t.prototype.ddayset=function(t,e,n){var r=h(null,this.yearlen),i=b.toOrdinal(new Date(Date.UTC(t,e-1,n)))-this.yearordinal;return r[i]=i,[r,i,i+1]},t.prototype.htimeset=function(t,e,n,r){var i=this,o=[];return this.options.byminute.forEach((function(e){o=o.concat(i.mtimeset(t,e,n,r))})),b.sort(o),o},t.prototype.mtimeset=function(t,e,n,r){var i=this.options.bysecond.map((function(n){return new C(t,e,n,r)}));return b.sort(i),i},t.prototype.stimeset=function(t,e,n,r){return[new C(t,e,n,r)]},t.prototype.getdayset=function(t){switch(t){case U.YEARLY:return this.ydayset.bind(this);case U.MONTHLY:return this.mdayset.bind(this);case U.WEEKLY:return this.wdayset.bind(this);case U.DAILY:default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(t){switch(t){case U.HOURLY:return this.htimeset.bind(this);case U.MINUTELY:return this.mtimeset.bind(this);case U.SECONDLY:return this.stimeset.bind(this)}},t}();function pt(t,e,n,r,o,a){for(var s=[],u=0;u<t.length;u++){var h=void 0,y=void 0,c=t[u];c<0?(h=Math.floor(c/e.length),y=d(c,e.length)):(h=Math.floor((c-1)/e.length),y=d(c-1,e.length));for(var l=[],f=n;f<r;f++){var p=a[f];i(p)&&l.push(p)}var w=void 0;w=h<0?l.slice(h)[0]:l[h];var v=e[y],g=b.fromOrdinal(o.yearordinal+w),k=b.combine(g,v);m(s,k)||s.push(k)}return b.sort(s),s}function mt(t,e){var n=e.dtstart,r=e.freq,o=e.interval,a=e.until,s=e.bysetpos,u=e.count;if(0===u||0===o)return vt(t);var h=I.fromDate(n),y=new ft(e);y.rebuild(h.year,h.month);for(var c=function(t,e,n){var r=n.freq,i=n.byhour,o=n.byminute,a=n.bysecond;if(_(r))return function(t){var e=t.dtstart.getTime()%1e3;if(!_(t.freq))return[];var n=[];return t.byhour.forEach((function(r){t.byminute.forEach((function(i){t.bysecond.forEach((function(t){n.push(new C(r,i,t,e))}))}))})),n}(n);if(r>=Dt.HOURLY&&p(i)&&!m(i,e.hour)||r>=Dt.MINUTELY&&p(o)&&!m(o,e.minute)||r>=Dt.SECONDLY&&p(a)&&!m(a,e.second))return[];return t.gettimeset(r)(e.hour,e.minute,e.second,e.millisecond)}(y,h,e);;){var d=y.getdayset(r)(h.year,h.month,h.day),l=d[0],f=d[1],w=d[2],v=gt(l,f,w,y,e);if(p(s))for(var g=pt(s,c,f,w,y,l),k=0;k<g.length;k++){var E=g[k];if(a&&E>a)return vt(t);if(E>=n){var T=wt(E,e);if(!t.accept(T))return vt(t);if(u&&!--u)return vt(t)}}else for(k=f;k<w;k++){var D=l[k];if(i(D))for(var O=b.fromOrdinal(y.yearordinal+D),x=0;x<c.length;x++){var Y=c[x];E=b.combine(O,Y);if(a&&E>a)return vt(t);if(E>=n){T=wt(E,e);if(!t.accept(T))return vt(t);if(u&&!--u)return vt(t)}}}if(0===e.interval)return vt(t);if(h.add(e,v),h.year>b.MAXYEAR)return vt(t);_(r)||(c=y.gettimeset(r)(h.hour,h.minute,h.second,0)),y.rebuild(h.year,h.month)}}function bt(t,e,n){var r=n.bymonth,i=n.byweekno,o=n.byweekday,a=n.byeaster,s=n.bymonthday,u=n.bynmonthday,h=n.byyearday;return p(r)&&!m(r,t.mmask[e])||p(i)&&!t.wnomask[e]||p(o)&&!m(o,t.wdaymask[e])||p(t.nwdaymask)&&!t.nwdaymask[e]||null!==a&&!m(t.eastermask,e)||(p(s)||p(u))&&!m(s,t.mdaymask[e])&&!m(u,t.nmdaymask[e])||p(h)&&(e<t.yearlen&&!m(h,e+1)&&!m(h,-t.yearlen+e)||e>=t.yearlen&&!m(h,e+1-t.yearlen)&&!m(h,-t.nextyearlen+e-t.yearlen))}function wt(t,e){return new K(t,e.tzid).rezonedDate()}function vt(t){return t.getValue()}function gt(t,e,n,r,i){for(var o=!1,a=e;a<n;a++){var s=t[a];(o=bt(r,s,i))&&(t[s]=null)}return o}var kt={MO:new r(0),TU:new r(1),WE:new r(2),TH:new r(3),FR:new r(4),SA:new r(5),SU:new r(6)},Et={freq:U.YEARLY,dtstart:null,interval:1,wkst:kt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Tt=Object.keys(Et),Dt=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=!1),this._cache=e?null:new X,this.origOptions=W(t);var n=j(t).parsedOptions;this.options=n}return t.parseText=function(t,e){return M(t,e)},t.fromText=function(t,e){return R(t,e)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(t){return mt(t,this.options)},t.prototype._cacheGet=function(t,e){return!!this._cache&&this._cache._cacheGet(t,e)},t.prototype._cacheAdd=function(t,e,n){if(this._cache)return this._cache._cacheAdd(t,e,n)},t.prototype.all=function(t){if(t)return this._iter(new T("all",{},t));var e=this._cacheGet("all");return!1===e&&(e=this._iter(new w("all",{})),this._cacheAdd("all",e)),e},t.prototype.between=function(t,e,n,r){if(void 0===n&&(n=!1),!b.isValidDate(t)||!b.isValidDate(e))throw new Error("Invalid date passed in to RRule.between");var i={before:e,after:t,inc:n};if(r)return this._iter(new T("between",i,r));var o=this._cacheGet("between",i);return!1===o&&(o=this._iter(new w("between",i)),this._cacheAdd("between",o,i)),o},t.prototype.before=function(t,e){if(void 0===e&&(e=!1),!b.isValidDate(t))throw new Error("Invalid date passed in to RRule.before");var n={dt:t,inc:e},r=this._cacheGet("before",n);return!1===r&&(r=this._iter(new w("before",n)),this._cacheAdd("before",r,n)),r},t.prototype.after=function(t,e){if(void 0===e&&(e=!1),!b.isValidDate(t))throw new Error("Invalid date passed in to RRule.after");var n={dt:t,inc:e},r=this._cacheGet("after",n);return!1===r&&(r=this._iter(new w("after",n)),this._cacheAdd("after",r,n)),r},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return B(this.origOptions)},t.prototype.toText=function(t,e,n){return function(t,e,n,r){return new S(t,e,n,r).toString()}(this,t,e,n)},t.prototype.isFullyConvertibleToText=function(){return N(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=U.YEARLY,t.MONTHLY=U.MONTHLY,t.WEEKLY=U.WEEKLY,t.DAILY=U.DAILY,t.HOURLY=U.HOURLY,t.MINUTELY=U.MINUTELY,t.SECONDLY=U.SECONDLY,t.MO=kt.MO,t.TU=kt.TU,t.WE=kt.WE,t.TH=kt.TH,t.FR=kt.FR,t.SA=kt.SA,t.SU=kt.SU,t.parseString=H,t.optionsToString=B,t}();var Ot={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function xt(t,e){var n=[],r=[],i=[],o=[],a=q(t),s=a.dtstart,u=a.tzid,h=function(t,e){void 0===e&&(e=!1);if(!(t=t&&t.trim()))throw new Error("Invalid empty string");if(!e)return t.split(/\s/);var n=t.split("\n"),r=0;for(;r<n.length;){var i=n[r]=n[r].replace(/\s+$/g,"");i?r>0&&" "===i[0]?(n[r-1]+=i.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}(t,e.unfold);return h.forEach((function(t){var e;if(t){var a=function(t){var e=function(t){if(-1===t.indexOf(":"))return{name:"RRULE",value:t};var e=(i=t,o=":",a=1,s=i.split(o),a?s.slice(0,a).concat([s.slice(a).join(o)]):s),n=e[0],r=e[1];var i,o,a,s;return{name:n,value:r}}(t),n=e.name,r=e.value,i=n.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:r}}(t),s=a.name,h=a.parms,y=a.value;switch(s.toUpperCase()){case"RRULE":if(h.length)throw new Error("unsupported RRULE parm: ".concat(h.join(",")));n.push(H(t));break;case"RDATE":var c=(null!==(e=/RDATE(?:;TZID=([^:=]+))?/i.exec(t))&&void 0!==e?e:[])[1];c&&!u&&(u=c),r=r.concat(Ut(y,h));break;case"EXRULE":if(h.length)throw new Error("unsupported EXRULE parm: ".concat(h.join(",")));i.push(H(y));break;case"EXDATE":o=o.concat(Ut(y,h));break;case"DTSTART":break;default:throw new Error("unsupported property: "+s)}}})),{dtstart:s,tzid:u,rrulevals:n,rdatevals:r,exrulevals:i,exdatevals:o}}function Yt(t,e){return void 0===e&&(e={}),function(t,e){var n=xt(t,e),r=n.rrulevals,i=n.rdatevals,o=n.exrulevals,a=n.exdatevals,s=n.dtstart,u=n.tzid,h=!1===e.cache;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||r.length>1||i.length||o.length||a.length){var y=new Mt(h);return y.dtstart(s),y.tzid(u||void 0),r.forEach((function(t){y.rrule(new Dt(St(t,s,u),h))})),i.forEach((function(t){y.rdate(t)})),o.forEach((function(t){y.exrule(new Dt(St(t,s,u),h))})),a.forEach((function(t){y.exdate(t)})),e.compatible&&e.dtstart&&y.rdate(s),y}var c=r[0]||{};return new Dt(St(c,c.dtstart||e.dtstart||s,c.tzid||e.tzid||u),h)}(t,function(t){var e=[],n=Object.keys(t),r=Object.keys(Ot);if(n.forEach((function(t){m(r,t)||e.push(t)})),e.length)throw new Error("Invalid options: "+e.join(", "));return k(k({},Ot),t)}(e))}function St(t,e,n){return k(k({},t),{dtstart:e,tzid:n})}function Ut(t,e){return function(t){t.forEach((function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)}))}(e),t.split(",").map((function(t){return b.untilStringToDate(t)}))}function Lt(t){var e=this;return function(n){if(void 0!==n&&(e["_".concat(t)]=n),void 0!==e["_".concat(t)])return e["_".concat(t)];for(var r=0;r<e._rrule.length;r++){var i=e._rrule[r].origOptions[t];if(i)return i}}}var Mt=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this,{},e)||this;return n.dtstart=Lt.apply(n,["dtstart"]),n.tzid=Lt.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return g(e,t),e.prototype._iter=function(t){return function(t,e,n,r,i,o){var a={},s=t.accept;function u(t,e){n.forEach((function(n){n.between(t,e,!0).forEach((function(t){a[Number(t)]=!0}))}))}i.forEach((function(t){var e=new K(t,o).rezonedDate();a[Number(e)]=!0})),t.accept=function(t){var e=Number(t);return isNaN(e)?s.call(this,t):!(!a[e]&&(u(new Date(e-1),new Date(e+1)),!a[e]))||(a[e]=!0,s.call(this,t))},"between"===t.method&&(u(t.args.after,t.args.before),t.accept=function(t){var e=Number(t);return!!a[e]||(a[e]=!0,s.call(this,t))});for(var h=0;h<r.length;h++){var y=new K(r[h],o).rezonedDate();if(!t.accept(new Date(y.getTime())))break}e.forEach((function(e){mt(t,e.options)}));var c=t._result;switch(b.sort(c),t.method){case"all":case"between":return c;case"before":return c.length&&c[c.length-1]||null;default:return c.length&&c[0]||null}}(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){_t(t,this._rrule)},e.prototype.exrule=function(t){_t(t,this._exrule)},e.prototype.rdate=function(t){Rt(t,this._rdate)},e.prototype.exdate=function(t){Rt(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map((function(t){return Yt(t.toString())}))},e.prototype.exrules=function(){return this._exrule.map((function(t){return Yt(t.toString())}))},e.prototype.rdates=function(){return this._rdate.map((function(t){return new Date(t.getTime())}))},e.prototype.exdates=function(){return this._exdate.map((function(t){return new Date(t.getTime())}))},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(B({dtstart:this._dtstart}))),this._rrule.forEach((function(e){t=t.concat(e.toString().split("\n"))})),this._exrule.forEach((function(e){t=t.concat(e.toString().split("\n").map((function(t){return t.replace(/^RRULE:/,"EXRULE:")})).filter((function(t){return!/^DTSTART/.test(t)})))})),this._rdate.length&&t.push(At("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(At("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join("\n")},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach((function(e){return t.rrule(e.clone())})),this._exrule.forEach((function(e){return t.exrule(e.clone())})),this._rdate.forEach((function(e){return t.rdate(new Date(e.getTime()))})),this._exdate.forEach((function(e){return t.exdate(new Date(e.getTime()))})),t},e}(Dt);function _t(t,e){if(!(t instanceof Dt))throw new TypeError(String(t)+" is not RRule instance");m(e.map(String),String(t))||e.push(t)}function Rt(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");m(e.map(Number),Number(t))||(e.push(t),b.sort(e))}function At(t,e,n){var r=!n||"UTC"===n.toUpperCase(),i=r?"".concat(t,":"):"".concat(t,";TZID=").concat(n,":"),o=e.map((function(t){return b.timeToUntilString(t.valueOf(),r)})).join(",");return"".concat(i).concat(o)}return e})()));;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;/*!
FullCalendar Core Package v4.4.2
Docs & License: https://fullcalendar.io/
(c) 2019 Adam Shaw
*/(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):(global=global||self,factory(global.FullCalendar={}));}(this,function(exports){'use strict';var elementPropHash={className:true,colSpan:true,rowSpan:true};var containerTagHash={'<tr':'tbody','<td':'tr'};function createElement(tagName,attrs,content){var el=document.createElement(tagName);if(attrs){for(var attrName in attrs){if(attrName==='style'){applyStyle(el,attrs[attrName]);}
else if(elementPropHash[attrName]){el[attrName]=attrs[attrName];}
else{el.setAttribute(attrName,attrs[attrName]);}}}
if(typeof content==='string'){el.innerHTML=content;}
else if(content!=null){appendToElement(el,content);}
return el;}
function htmlToElement(html){html=html.trim();var container=document.createElement(computeContainerTag(html));container.innerHTML=html;return container.firstChild;}
function htmlToElements(html){return Array.prototype.slice.call(htmlToNodeList(html));}
function htmlToNodeList(html){html=html.trim();var container=document.createElement(computeContainerTag(html));container.innerHTML=html;return container.childNodes;}
function computeContainerTag(html){return containerTagHash[html.substr(0,3)]||'div';}
function appendToElement(el,content){var childNodes=normalizeContent(content);for(var i=0;i<childNodes.length;i++){el.appendChild(childNodes[i]);}}
function prependToElement(parent,content){var newEls=normalizeContent(content);var afterEl=parent.firstChild||null;for(var i=0;i<newEls.length;i++){parent.insertBefore(newEls[i],afterEl);}}
function insertAfterElement(refEl,content){var newEls=normalizeContent(content);var afterEl=refEl.nextSibling||null;for(var i=0;i<newEls.length;i++){refEl.parentNode.insertBefore(newEls[i],afterEl);}}
function normalizeContent(content){var els;if(typeof content==='string'){els=htmlToElements(content);}
else if(content instanceof Node){els=[content];}
else{els=Array.prototype.slice.call(content);}
return els;}
function removeElement(el){if(el.parentNode){el.parentNode.removeChild(el);}}
var matchesMethod=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.msMatchesSelector;var closestMethod=Element.prototype.closest||function(selector){var el=this;if(!document.documentElement.contains(el)){return null;}
do{if(elementMatches(el,selector)){return el;}
el=el.parentElement||el.parentNode;}while(el!==null&&el.nodeType===1);return null;};function elementClosest(el,selector){return closestMethod.call(el,selector);}
function elementMatches(el,selector){return matchesMethod.call(el,selector);}
function findElements(container,selector){var containers=container instanceof HTMLElement?[container]:container;var allMatches=[];for(var i=0;i<containers.length;i++){var matches=containers[i].querySelectorAll(selector);for(var j=0;j<matches.length;j++){allMatches.push(matches[j]);}}
return allMatches;}
function findChildren(parent,selector){var parents=parent instanceof HTMLElement?[parent]:parent;var allMatches=[];for(var i=0;i<parents.length;i++){var childNodes=parents[i].children;for(var j=0;j<childNodes.length;j++){var childNode=childNodes[j];if(!selector||elementMatches(childNode,selector)){allMatches.push(childNode);}}}
return allMatches;}
function forceClassName(el,className,bool){if(bool){el.classList.add(className);}
else{el.classList.remove(className);}}
var PIXEL_PROP_RE=/(top|left|right|bottom|width|height)$/i;function applyStyle(el,props){for(var propName in props){applyStyleProp(el,propName,props[propName]);}}
function applyStyleProp(el,name,val){if(val==null){el.style[name]='';}
else if(typeof val==='number'&&PIXEL_PROP_RE.test(name)){el.style[name]=val+'px';}
else{el.style[name]=val;}}
function pointInsideRect(point,rect){return point.left>=rect.left&&point.left<rect.right&&point.top>=rect.top&&point.top<rect.bottom;}
function intersectRects(rect1,rect2){var res={left:Math.max(rect1.left,rect2.left),right:Math.min(rect1.right,rect2.right),top:Math.max(rect1.top,rect2.top),bottom:Math.min(rect1.bottom,rect2.bottom)};if(res.left<res.right&&res.top<res.bottom){return res;}
return false;}
function translateRect(rect,deltaX,deltaY){return{left:rect.left+deltaX,right:rect.right+deltaX,top:rect.top+deltaY,bottom:rect.bottom+deltaY};}
function constrainPoint(point,rect){return{left:Math.min(Math.max(point.left,rect.left),rect.right),top:Math.min(Math.max(point.top,rect.top),rect.bottom)};}
function getRectCenter(rect){return{left:(rect.left+rect.right)/2,top:(rect.top+rect.bottom)/2};}
function diffPoints(point1,point2){return{left:point1.left-point2.left,top:point1.top-point2.top};}
var isRtlScrollbarOnLeft=null;function getIsRtlScrollbarOnLeft(){if(isRtlScrollbarOnLeft===null){isRtlScrollbarOnLeft=computeIsRtlScrollbarOnLeft();}
return isRtlScrollbarOnLeft;}
function computeIsRtlScrollbarOnLeft(){var outerEl=createElement('div',{style:{position:'absolute',top:-1000,left:0,border:0,padding:0,overflow:'scroll',direction:'rtl'}},'<div></div>');document.body.appendChild(outerEl);var innerEl=outerEl.firstChild;var res=innerEl.getBoundingClientRect().left>outerEl.getBoundingClientRect().left;removeElement(outerEl);return res;}
function sanitizeScrollbarWidth(width){width=Math.max(0,width);width=Math.round(width);return width;}
function computeEdges(el,getPadding){if(getPadding===void 0){getPadding=false;}
var computedStyle=window.getComputedStyle(el);var borderLeft=parseInt(computedStyle.borderLeftWidth,10)||0;var borderRight=parseInt(computedStyle.borderRightWidth,10)||0;var borderTop=parseInt(computedStyle.borderTopWidth,10)||0;var borderBottom=parseInt(computedStyle.borderBottomWidth,10)||0;var scrollbarLeftRight=sanitizeScrollbarWidth(el.offsetWidth-el.clientWidth-borderLeft-borderRight);var scrollbarBottom=sanitizeScrollbarWidth(el.offsetHeight-el.clientHeight-borderTop-borderBottom);var res={borderLeft:borderLeft,borderRight:borderRight,borderTop:borderTop,borderBottom:borderBottom,scrollbarBottom:scrollbarBottom,scrollbarLeft:0,scrollbarRight:0};if(getIsRtlScrollbarOnLeft()&&computedStyle.direction==='rtl'){res.scrollbarLeft=scrollbarLeftRight;}
else{res.scrollbarRight=scrollbarLeftRight;}
if(getPadding){res.paddingLeft=parseInt(computedStyle.paddingLeft,10)||0;res.paddingRight=parseInt(computedStyle.paddingRight,10)||0;res.paddingTop=parseInt(computedStyle.paddingTop,10)||0;res.paddingBottom=parseInt(computedStyle.paddingBottom,10)||0;}
return res;}
function computeInnerRect(el,goWithinPadding){if(goWithinPadding===void 0){goWithinPadding=false;}
var outerRect=computeRect(el);var edges=computeEdges(el,goWithinPadding);var res={left:outerRect.left+edges.borderLeft+edges.scrollbarLeft,right:outerRect.right-edges.borderRight-edges.scrollbarRight,top:outerRect.top+edges.borderTop,bottom:outerRect.bottom-edges.borderBottom-edges.scrollbarBottom};if(goWithinPadding){res.left+=edges.paddingLeft;res.right-=edges.paddingRight;res.top+=edges.paddingTop;res.bottom-=edges.paddingBottom;}
return res;}
function computeRect(el){var rect=el.getBoundingClientRect();return{left:rect.left+window.pageXOffset,top:rect.top+window.pageYOffset,right:rect.right+window.pageXOffset,bottom:rect.bottom+window.pageYOffset};}
function computeViewportRect(){return{left:window.pageXOffset,right:window.pageXOffset+document.documentElement.clientWidth,top:window.pageYOffset,bottom:window.pageYOffset+document.documentElement.clientHeight};}
function computeHeightAndMargins(el){return el.getBoundingClientRect().height+computeVMargins(el);}
function computeVMargins(el){var computed=window.getComputedStyle(el);return parseInt(computed.marginTop,10)+
parseInt(computed.marginBottom,10);}
function getClippingParents(el){var parents=[];while(el instanceof HTMLElement){var computedStyle=window.getComputedStyle(el);if(computedStyle.position==='fixed'){break;}
if((/(auto|scroll)/).test(computedStyle.overflow+computedStyle.overflowY+computedStyle.overflowX)){parents.push(el);}
el=el.parentNode;}
return parents;}
function computeClippingRect(el){return getClippingParents(el).map(function(el){return computeInnerRect(el);}).concat(computeViewportRect()).reduce(function(rect0,rect1){return intersectRects(rect0,rect1)||rect1;});}
function preventDefault(ev){ev.preventDefault();}
function listenBySelector(container,eventType,selector,handler){function realHandler(ev){var matchedChild=elementClosest(ev.target,selector);if(matchedChild){handler.call(matchedChild,ev,matchedChild);}}
container.addEventListener(eventType,realHandler);return function(){container.removeEventListener(eventType,realHandler);};}
function listenToHoverBySelector(container,selector,onMouseEnter,onMouseLeave){var currentMatchedChild;return listenBySelector(container,'mouseover',selector,function(ev,matchedChild){if(matchedChild!==currentMatchedChild){currentMatchedChild=matchedChild;onMouseEnter(ev,matchedChild);var realOnMouseLeave_1=function(ev){currentMatchedChild=null;onMouseLeave(ev,matchedChild);matchedChild.removeEventListener('mouseleave',realOnMouseLeave_1);};matchedChild.addEventListener('mouseleave',realOnMouseLeave_1);}});}
var transitionEventNames=['webkitTransitionEnd','otransitionend','oTransitionEnd','msTransitionEnd','transitionend'];function whenTransitionDone(el,callback){var realCallback=function(ev){callback(ev);transitionEventNames.forEach(function(eventName){el.removeEventListener(eventName,realCallback);});};transitionEventNames.forEach(function(eventName){el.addEventListener(eventName,realCallback);});}
var DAY_IDS=['sun','mon','tue','wed','thu','fri','sat'];function addWeeks(m,n){var a=dateToUtcArray(m);a[2]+=n*7;return arrayToUtcDate(a);}
function addDays(m,n){var a=dateToUtcArray(m);a[2]+=n;return arrayToUtcDate(a);}
function addMs(m,n){var a=dateToUtcArray(m);a[6]+=n;return arrayToUtcDate(a);}
function diffWeeks(m0,m1){return diffDays(m0,m1)/7;}
function diffDays(m0,m1){return(m1.valueOf()-m0.valueOf())/(1000*60*60*24);}
function diffHours(m0,m1){return(m1.valueOf()-m0.valueOf())/(1000*60*60);}
function diffMinutes(m0,m1){return(m1.valueOf()-m0.valueOf())/(1000*60);}
function diffSeconds(m0,m1){return(m1.valueOf()-m0.valueOf())/1000;}
function diffDayAndTime(m0,m1){var m0day=startOfDay(m0);var m1day=startOfDay(m1);return{years:0,months:0,days:Math.round(diffDays(m0day,m1day)),milliseconds:(m1.valueOf()-m1day.valueOf())-(m0.valueOf()-m0day.valueOf())};}
function diffWholeWeeks(m0,m1){var d=diffWholeDays(m0,m1);if(d!==null&&d%7===0){return d/7;}
return null;}
function diffWholeDays(m0,m1){if(timeAsMs(m0)===timeAsMs(m1)){return Math.round(diffDays(m0,m1));}
return null;}
function startOfDay(m){return arrayToUtcDate([m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()]);}
function startOfHour(m){return arrayToUtcDate([m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours()]);}
function startOfMinute(m){return arrayToUtcDate([m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes()]);}
function startOfSecond(m){return arrayToUtcDate([m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds()]);}
function weekOfYear(marker,dow,doy){var y=marker.getUTCFullYear();var w=weekOfGivenYear(marker,y,dow,doy);if(w<1){return weekOfGivenYear(marker,y-1,dow,doy);}
var nextW=weekOfGivenYear(marker,y+1,dow,doy);if(nextW>=1){return Math.min(w,nextW);}
return w;}
function weekOfGivenYear(marker,year,dow,doy){var firstWeekStart=arrayToUtcDate([year,0,1+firstWeekOffset(year,dow,doy)]);var dayStart=startOfDay(marker);var days=Math.round(diffDays(firstWeekStart,dayStart));return Math.floor(days/7)+1;}
function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy;var fwdlw=(7+arrayToUtcDate([year,0,fwd]).getUTCDay()-dow)%7;return-fwdlw+fwd-1;}
function dateToLocalArray(date){return[date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()];}
function arrayToLocalDate(a){return new Date(a[0],a[1]||0,a[2]==null?1:a[2],a[3]||0,a[4]||0,a[5]||0);}
function dateToUtcArray(date){return[date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds(),date.getUTCMilliseconds()];}
function arrayToUtcDate(a){if(a.length===1){a=a.concat([0]);}
return new Date(Date.UTC.apply(Date,a));}
function isValidDate(m){return!isNaN(m.valueOf());}
function timeAsMs(m){return m.getUTCHours()*1000*60*60+
m.getUTCMinutes()*1000*60+
m.getUTCSeconds()*1000+
m.getUTCMilliseconds();}
var INTERNAL_UNITS=['years','months','days','milliseconds'];var PARSE_RE=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function createDuration(input,unit){var _a;if(typeof input==='string'){return parseString(input);}
else if(typeof input==='object'&&input){return normalizeObject(input);}
else if(typeof input==='number'){return normalizeObject((_a={},_a[unit||'milliseconds']=input,_a));}
else{return null;}}
function parseString(s){var m=PARSE_RE.exec(s);if(m){var sign=m[1]?-1:1;return{years:0,months:0,days:sign*(m[2]?parseInt(m[2],10):0),milliseconds:sign*((m[3]?parseInt(m[3],10):0)*60*60*1000+
(m[4]?parseInt(m[4],10):0)*60*1000+
(m[5]?parseInt(m[5],10):0)*1000+
(m[6]?parseInt(m[6],10):0))};}
return null;}
function normalizeObject(obj){return{years:obj.years||obj.year||0,months:obj.months||obj.month||0,days:(obj.days||obj.day||0)+
getWeeksFromInput(obj)*7,milliseconds:(obj.hours||obj.hour||0)*60*60*1000+
(obj.minutes||obj.minute||0)*60*1000+
(obj.seconds||obj.second||0)*1000+
(obj.milliseconds||obj.millisecond||obj.ms||0)};}
function getWeeksFromInput(obj){return obj.weeks||obj.week||0;}
function durationsEqual(d0,d1){return d0.years===d1.years&&d0.months===d1.months&&d0.days===d1.days&&d0.milliseconds===d1.milliseconds;}
function isSingleDay(dur){return dur.years===0&&dur.months===0&&dur.days===1&&dur.milliseconds===0;}
function addDurations(d0,d1){return{years:d0.years+d1.years,months:d0.months+d1.months,days:d0.days+d1.days,milliseconds:d0.milliseconds+d1.milliseconds};}
function subtractDurations(d1,d0){return{years:d1.years-d0.years,months:d1.months-d0.months,days:d1.days-d0.days,milliseconds:d1.milliseconds-d0.milliseconds};}
function multiplyDuration(d,n){return{years:d.years*n,months:d.months*n,days:d.days*n,milliseconds:d.milliseconds*n};}
function asRoughYears(dur){return asRoughDays(dur)/365;}
function asRoughMonths(dur){return asRoughDays(dur)/30;}
function asRoughDays(dur){return asRoughMs(dur)/864e5;}
function asRoughMinutes(dur){return asRoughMs(dur)/(1000*60);}
function asRoughSeconds(dur){return asRoughMs(dur)/1000;}
function asRoughMs(dur){return dur.years*(365*864e5)+
dur.months*(30*864e5)+
dur.days*864e5+
dur.milliseconds;}
function wholeDivideDurations(numerator,denominator){var res=null;for(var i=0;i<INTERNAL_UNITS.length;i++){var unit=INTERNAL_UNITS[i];if(denominator[unit]){var localRes=numerator[unit]/denominator[unit];if(!isInt(localRes)||(res!==null&&res!==localRes)){return null;}
res=localRes;}
else if(numerator[unit]){return null;}}
return res;}
function greatestDurationDenominator(dur,dontReturnWeeks){var ms=dur.milliseconds;if(ms){if(ms%1000!==0){return{unit:'millisecond',value:ms};}
if(ms%(1000*60)!==0){return{unit:'second',value:ms/1000};}
if(ms%(1000*60*60)!==0){return{unit:'minute',value:ms/(1000*60)};}
if(ms){return{unit:'hour',value:ms/(1000*60*60)};}}
if(dur.days){if(!dontReturnWeeks&&dur.days%7===0){return{unit:'week',value:dur.days/7};}
return{unit:'day',value:dur.days};}
if(dur.months){return{unit:'month',value:dur.months};}
if(dur.years){return{unit:'year',value:dur.years};}
return{unit:'millisecond',value:0};}
function compensateScroll(rowEl,scrollbarWidths){if(scrollbarWidths.left){applyStyle(rowEl,{borderLeftWidth:1,marginLeft:scrollbarWidths.left-1});}
if(scrollbarWidths.right){applyStyle(rowEl,{borderRightWidth:1,marginRight:scrollbarWidths.right-1});}}
function uncompensateScroll(rowEl){applyStyle(rowEl,{marginLeft:'',marginRight:'',borderLeftWidth:'',borderRightWidth:''});}
function disableCursor(){document.body.classList.add('fc-not-allowed');}
function enableCursor(){document.body.classList.remove('fc-not-allowed');}
function distributeHeight(els,availableHeight,shouldRedistribute){var minOffset1=Math.floor(availableHeight/els.length);var minOffset2=Math.floor(availableHeight-minOffset1*(els.length-1));var flexEls=[];var flexOffsets=[];var flexHeights=[];var usedHeight=0;undistributeHeight(els);els.forEach(function(el,i){var minOffset=i===els.length-1?minOffset2:minOffset1;var naturalHeight=el.getBoundingClientRect().height;var naturalOffset=naturalHeight+computeVMargins(el);if(naturalOffset<minOffset){flexEls.push(el);flexOffsets.push(naturalOffset);flexHeights.push(naturalHeight);}
else{usedHeight+=naturalOffset;}});if(shouldRedistribute){availableHeight-=usedHeight;minOffset1=Math.floor(availableHeight/flexEls.length);minOffset2=Math.floor(availableHeight-minOffset1*(flexEls.length-1));}
flexEls.forEach(function(el,i){var minOffset=i===flexEls.length-1?minOffset2:minOffset1;var naturalOffset=flexOffsets[i];var naturalHeight=flexHeights[i];var newHeight=minOffset-(naturalOffset-naturalHeight);if(naturalOffset<minOffset){el.style.height=newHeight+'px';}});}
function undistributeHeight(els){els.forEach(function(el){el.style.height='';});}
function matchCellWidths(els){var maxInnerWidth=0;els.forEach(function(el){var innerEl=el.firstChild;if(innerEl instanceof HTMLElement){var innerWidth_1=innerEl.getBoundingClientRect().width;if(innerWidth_1>maxInnerWidth){maxInnerWidth=innerWidth_1;}}});maxInnerWidth++;els.forEach(function(el){el.style.width=maxInnerWidth+'px';});return maxInnerWidth;}
function subtractInnerElHeight(outerEl,innerEl){var reflowStyleProps={position:'relative',left:-1};applyStyle(outerEl,reflowStyleProps);applyStyle(innerEl,reflowStyleProps);var diff=outerEl.getBoundingClientRect().height-
innerEl.getBoundingClientRect().height;var resetStyleProps={position:'',left:''};applyStyle(outerEl,resetStyleProps);applyStyle(innerEl,resetStyleProps);return diff;}
function preventSelection(el){el.classList.add('fc-unselectable');el.addEventListener('selectstart',preventDefault);}
function allowSelection(el){el.classList.remove('fc-unselectable');el.removeEventListener('selectstart',preventDefault);}
function preventContextMenu(el){el.addEventListener('contextmenu',preventDefault);}
function allowContextMenu(el){el.removeEventListener('contextmenu',preventDefault);}
function parseFieldSpecs(input){var specs=[];var tokens=[];var i;var token;if(typeof input==='string'){tokens=input.split(/\s*,\s*/);}
else if(typeof input==='function'){tokens=[input];}
else if(Array.isArray(input)){tokens=input;}
for(i=0;i<tokens.length;i++){token=tokens[i];if(typeof token==='string'){specs.push(token.charAt(0)==='-'?{field:token.substring(1),order:-1}:{field:token,order:1});}
else if(typeof token==='function'){specs.push({func:token});}}
return specs;}
function compareByFieldSpecs(obj0,obj1,fieldSpecs){var i;var cmp;for(i=0;i<fieldSpecs.length;i++){cmp=compareByFieldSpec(obj0,obj1,fieldSpecs[i]);if(cmp){return cmp;}}
return 0;}
function compareByFieldSpec(obj0,obj1,fieldSpec){if(fieldSpec.func){return fieldSpec.func(obj0,obj1);}
return flexibleCompare(obj0[fieldSpec.field],obj1[fieldSpec.field])*(fieldSpec.order||1);}
function flexibleCompare(a,b){if(!a&&!b){return 0;}
if(b==null){return-1;}
if(a==null){return 1;}
if(typeof a==='string'||typeof b==='string'){return String(a).localeCompare(String(b));}
return a-b;}
function capitaliseFirstLetter(str){return str.charAt(0).toUpperCase()+str.slice(1);}
function padStart(val,len){var s=String(val);return '000'.substr(0,len-s.length)+s;}
function compareNumbers(a,b){return a-b;}
function isInt(n){return n%1===0;}
function applyAll(functions,thisObj,args){if(typeof functions==='function'){functions=[functions];}
if(functions){var i=void 0;var ret=void 0;for(i=0;i<functions.length;i++){ret=functions[i].apply(thisObj,args)||ret;}
return ret;}}
function firstDefined(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}
for(var i=0;i<args.length;i++){if(args[i]!==undefined){return args[i];}}}
function debounce(func,wait){var timeout;var args;var context;var timestamp;var result;var later=function(){var last=new Date().valueOf()-timestamp;if(last<wait){timeout=setTimeout(later,wait-last);}
else{timeout=null;result=func.apply(context,args);context=args=null;}};return function(){context=this;args=arguments;timestamp=new Date().valueOf();if(!timeout){timeout=setTimeout(later,wait);}
return result;};}
function refineProps(rawProps,processors,defaults,leftoverProps){if(defaults===void 0){defaults={};}
var refined={};for(var key in processors){var processor=processors[key];if(rawProps[key]!==undefined){if(processor===Function){refined[key]=typeof rawProps[key]==='function'?rawProps[key]:null;}
else if(processor){refined[key]=processor(rawProps[key]);}
else{refined[key]=rawProps[key];}}
else if(defaults[key]!==undefined){refined[key]=defaults[key];}
else{if(processor===String){refined[key]='';}
else if(!processor||processor===Number||processor===Boolean||processor===Function){refined[key]=null;}
else{refined[key]=processor(null);}}}
if(leftoverProps){for(var key in rawProps){if(processors[key]===undefined){leftoverProps[key]=rawProps[key];}}}
return refined;}
function computeAlignedDayRange(timedRange){var dayCnt=Math.floor(diffDays(timedRange.start,timedRange.end))||1;var start=startOfDay(timedRange.start);var end=addDays(start,dayCnt);return{start:start,end:end};}
function computeVisibleDayRange(timedRange,nextDayThreshold){if(nextDayThreshold===void 0){nextDayThreshold=createDuration(0);}
var startDay=null;var endDay=null;if(timedRange.end){endDay=startOfDay(timedRange.end);var endTimeMS=timedRange.end.valueOf()-endDay.valueOf();if(endTimeMS&&endTimeMS>=asRoughMs(nextDayThreshold)){endDay=addDays(endDay,1);}}
if(timedRange.start){startDay=startOfDay(timedRange.start);if(endDay&&endDay<=startDay){endDay=addDays(startDay,1);}}
return{start:startDay,end:endDay};}
function isMultiDayRange(range){var visibleRange=computeVisibleDayRange(range);return diffDays(visibleRange.start,visibleRange.end)>1;}
function diffDates(date0,date1,dateEnv,largeUnit){if(largeUnit==='year'){return createDuration(dateEnv.diffWholeYears(date0,date1),'year');}
else if(largeUnit==='month'){return createDuration(dateEnv.diffWholeMonths(date0,date1),'month');}
else{return diffDayAndTime(date0,date1);}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return extendStatics(d,b);};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}
var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}
return t;};return __assign.apply(this,arguments);};function parseRecurring(eventInput,allDayDefault,dateEnv,recurringTypes,leftovers){for(var i=0;i<recurringTypes.length;i++){var localLeftovers={};var parsed=recurringTypes[i].parse(eventInput,localLeftovers,dateEnv);if(parsed){var allDay=localLeftovers.allDay;delete localLeftovers.allDay;if(allDay==null){allDay=allDayDefault;if(allDay==null){allDay=parsed.allDayGuess;if(allDay==null){allDay=false;}}}
__assign(leftovers,localLeftovers);return{allDay:allDay,duration:parsed.duration,typeData:parsed.typeData,typeId:i};}}
return null;}
function expandRecurringRanges(eventDef,duration,framingRange,dateEnv,recurringTypes){var typeDef=recurringTypes[eventDef.recurringDef.typeId];var markers=typeDef.expand(eventDef.recurringDef.typeData,{start:dateEnv.subtract(framingRange.start,duration),end:framingRange.end},dateEnv);if(eventDef.allDay){markers=markers.map(startOfDay);}
return markers;}
var hasOwnProperty=Object.prototype.hasOwnProperty;function mergeProps(propObjs,complexProps){var dest={};var i;var name;var complexObjs;var j;var val;var props;if(complexProps){for(i=0;i<complexProps.length;i++){name=complexProps[i];complexObjs=[];for(j=propObjs.length-1;j>=0;j--){val=propObjs[j][name];if(typeof val==='object'&&val){complexObjs.unshift(val);}
else if(val!==undefined){dest[name]=val;break;}}
if(complexObjs.length){dest[name]=mergeProps(complexObjs);}}}
for(i=propObjs.length-1;i>=0;i--){props=propObjs[i];for(name in props){if(!(name in dest)){dest[name]=props[name];}}}
return dest;}
function filterHash(hash,func){var filtered={};for(var key in hash){if(func(hash[key],key)){filtered[key]=hash[key];}}
return filtered;}
function mapHash(hash,func){var newHash={};for(var key in hash){newHash[key]=func(hash[key],key);}
return newHash;}
function arrayToHash(a){var hash={};for(var _i=0,a_1=a;_i<a_1.length;_i++){var item=a_1[_i];hash[item]=true;}
return hash;}
function hashValuesToArray(obj){var a=[];for(var key in obj){a.push(obj[key]);}
return a;}
function isPropsEqual(obj0,obj1){for(var key in obj0){if(hasOwnProperty.call(obj0,key)){if(!(key in obj1)){return false;}}}
for(var key in obj1){if(hasOwnProperty.call(obj1,key)){if(obj0[key]!==obj1[key]){return false;}}}
return true;}
function parseEvents(rawEvents,sourceId,calendar,allowOpenRange){var eventStore=createEmptyEventStore();for(var _i=0,rawEvents_1=rawEvents;_i<rawEvents_1.length;_i++){var rawEvent=rawEvents_1[_i];var tuple=parseEvent(rawEvent,sourceId,calendar,allowOpenRange);if(tuple){eventTupleToStore(tuple,eventStore);}}
return eventStore;}
function eventTupleToStore(tuple,eventStore){if(eventStore===void 0){eventStore=createEmptyEventStore();}
eventStore.defs[tuple.def.defId]=tuple.def;if(tuple.instance){eventStore.instances[tuple.instance.instanceId]=tuple.instance;}
return eventStore;}
function expandRecurring(eventStore,framingRange,calendar){var dateEnv=calendar.dateEnv;var defs=eventStore.defs,instances=eventStore.instances;instances=filterHash(instances,function(instance){return!defs[instance.defId].recurringDef;});for(var defId in defs){var def=defs[defId];if(def.recurringDef){var duration=def.recurringDef.duration;if(!duration){duration=def.allDay?calendar.defaultAllDayEventDuration:calendar.defaultTimedEventDuration;}
var starts=expandRecurringRanges(def,duration,framingRange,calendar.dateEnv,calendar.pluginSystem.hooks.recurringTypes);for(var _i=0,starts_1=starts;_i<starts_1.length;_i++){var start=starts_1[_i];var instance=createEventInstance(defId,{start:start,end:dateEnv.add(start,duration)});instances[instance.instanceId]=instance;}}}
return{defs:defs,instances:instances};}
function getRelevantEvents(eventStore,instanceId){var instance=eventStore.instances[instanceId];if(instance){var def_1=eventStore.defs[instance.defId];var newStore=filterEventStoreDefs(eventStore,function(lookDef){return isEventDefsGrouped(def_1,lookDef);});newStore.defs[def_1.defId]=def_1;newStore.instances[instance.instanceId]=instance;return newStore;}
return createEmptyEventStore();}
function isEventDefsGrouped(def0,def1){return Boolean(def0.groupId&&def0.groupId===def1.groupId);}
function transformRawEvents(rawEvents,eventSource,calendar){var calEachTransform=calendar.opt('eventDataTransform');var sourceEachTransform=eventSource?eventSource.eventDataTransform:null;if(sourceEachTransform){rawEvents=transformEachRawEvent(rawEvents,sourceEachTransform);}
if(calEachTransform){rawEvents=transformEachRawEvent(rawEvents,calEachTransform);}
return rawEvents;}
function transformEachRawEvent(rawEvents,func){var refinedEvents;if(!func){refinedEvents=rawEvents;}
else{refinedEvents=[];for(var _i=0,rawEvents_2=rawEvents;_i<rawEvents_2.length;_i++){var rawEvent=rawEvents_2[_i];var refinedEvent=func(rawEvent);if(refinedEvent){refinedEvents.push(refinedEvent);}
else if(refinedEvent==null){refinedEvents.push(rawEvent);}}}
return refinedEvents;}
function createEmptyEventStore(){return{defs:{},instances:{}};}
function mergeEventStores(store0,store1){return{defs:__assign({},store0.defs,store1.defs),instances:__assign({},store0.instances,store1.instances)};}
function filterEventStoreDefs(eventStore,filterFunc){var defs=filterHash(eventStore.defs,filterFunc);var instances=filterHash(eventStore.instances,function(instance){return defs[instance.defId];});return{defs:defs,instances:instances};}
function parseRange(input,dateEnv){var start=null;var end=null;if(input.start){start=dateEnv.createMarker(input.start);}
if(input.end){end=dateEnv.createMarker(input.end);}
if(!start&&!end){return null;}
if(start&&end&&end<start){return null;}
return{start:start,end:end};}
function invertRanges(ranges,constraintRange){var invertedRanges=[];var start=constraintRange.start;var i;var dateRange;ranges.sort(compareRanges);for(i=0;i<ranges.length;i++){dateRange=ranges[i];if(dateRange.start>start){invertedRanges.push({start:start,end:dateRange.start});}
if(dateRange.end>start){start=dateRange.end;}}
if(start<constraintRange.end){invertedRanges.push({start:start,end:constraintRange.end});}
return invertedRanges;}
function compareRanges(range0,range1){return range0.start.valueOf()-range1.start.valueOf();}
function intersectRanges(range0,range1){var start=range0.start;var end=range0.end;var newRange=null;if(range1.start!==null){if(start===null){start=range1.start;}
else{start=new Date(Math.max(start.valueOf(),range1.start.valueOf()));}}
if(range1.end!=null){if(end===null){end=range1.end;}
else{end=new Date(Math.min(end.valueOf(),range1.end.valueOf()));}}
if(start===null||end===null||start<end){newRange={start:start,end:end};}
return newRange;}
function rangesEqual(range0,range1){return(range0.start===null?null:range0.start.valueOf())===(range1.start===null?null:range1.start.valueOf())&&(range0.end===null?null:range0.end.valueOf())===(range1.end===null?null:range1.end.valueOf());}
function rangesIntersect(range0,range1){return(range0.end===null||range1.start===null||range0.end>range1.start)&&(range0.start===null||range1.end===null||range0.start<range1.end);}
function rangeContainsRange(outerRange,innerRange){return(outerRange.start===null||(innerRange.start!==null&&innerRange.start>=outerRange.start))&&(outerRange.end===null||(innerRange.end!==null&&innerRange.end<=outerRange.end));}
function rangeContainsMarker(range,date){return(range.start===null||date>=range.start)&&(range.end===null||date<range.end);}
function constrainMarkerToRange(date,range){if(range.start!=null&&date<range.start){return range.start;}
if(range.end!=null&&date>=range.end){return new Date(range.end.valueOf()-1);}
return date;}
function removeExact(array,exactVal){var removeCnt=0;var i=0;while(i<array.length){if(array[i]===exactVal){array.splice(i,1);removeCnt++;}
else{i++;}}
return removeCnt;}
function isArraysEqual(a0,a1){var len=a0.length;var i;if(len!==a1.length){return false;}
for(i=0;i<len;i++){if(a0[i]!==a1[i]){return false;}}
return true;}
function memoize(workerFunc){var args;var res;return function(){if(!args||!isArraysEqual(args,arguments)){args=arguments;res=workerFunc.apply(this,arguments);}
return res;};}
function memoizeOutput(workerFunc,equalityFunc){var cachedRes=null;return function(){var newRes=workerFunc.apply(this,arguments);if(cachedRes===null||!(cachedRes===newRes||equalityFunc(cachedRes,newRes))){cachedRes=newRes;}
return cachedRes;};}
var EXTENDED_SETTINGS_AND_SEVERITIES={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0};var STANDARD_DATE_PROP_SEVERITIES={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1};var MERIDIEM_RE=/\s*([ap])\.?m\.?/i;var COMMA_RE=/,/g;var MULTI_SPACE_RE=/\s+/g;var LTR_RE=/\u200e/g;var UTC_RE=/UTC|GMT/;var NativeFormatter=(function(){function NativeFormatter(formatSettings){var standardDateProps={};var extendedSettings={};var severity=0;for(var name_1 in formatSettings){if(name_1 in EXTENDED_SETTINGS_AND_SEVERITIES){extendedSettings[name_1]=formatSettings[name_1];severity=Math.max(EXTENDED_SETTINGS_AND_SEVERITIES[name_1],severity);}
else{standardDateProps[name_1]=formatSettings[name_1];if(name_1 in STANDARD_DATE_PROP_SEVERITIES){severity=Math.max(STANDARD_DATE_PROP_SEVERITIES[name_1],severity);}}}
this.standardDateProps=standardDateProps;this.extendedSettings=extendedSettings;this.severity=severity;this.buildFormattingFunc=memoize(buildFormattingFunc);}
NativeFormatter.prototype.format=function(date,context){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,context)(date);};NativeFormatter.prototype.formatRange=function(start,end,context){var _a=this,standardDateProps=_a.standardDateProps,extendedSettings=_a.extendedSettings;var diffSeverity=computeMarkerDiffSeverity(start.marker,end.marker,context.calendarSystem);if(!diffSeverity){return this.format(start,context);}
var biggestUnitForPartial=diffSeverity;if(biggestUnitForPartial>1&&(standardDateProps.year==='numeric'||standardDateProps.year==='2-digit')&&(standardDateProps.month==='numeric'||standardDateProps.month==='2-digit')&&(standardDateProps.day==='numeric'||standardDateProps.day==='2-digit')){biggestUnitForPartial=1;}
var full0=this.format(start,context);var full1=this.format(end,context);if(full0===full1){return full0;}
var partialDateProps=computePartialFormattingOptions(standardDateProps,biggestUnitForPartial);var partialFormattingFunc=buildFormattingFunc(partialDateProps,extendedSettings,context);var partial0=partialFormattingFunc(start);var partial1=partialFormattingFunc(end);var insertion=findCommonInsertion(full0,partial0,full1,partial1);var separator=extendedSettings.separator||'';if(insertion){return insertion.before+partial0+separator+partial1+insertion.after;}
return full0+separator+full1;};NativeFormatter.prototype.getLargestUnit=function(){switch(this.severity){case 7:case 6:case 5:return 'year';case 4:return 'month';case 3:return 'week';default:return 'day';}};return NativeFormatter;}());function buildFormattingFunc(standardDateProps,extendedSettings,context){var standardDatePropCnt=Object.keys(standardDateProps).length;if(standardDatePropCnt===1&&standardDateProps.timeZoneName==='short'){return function(date){return formatTimeZoneOffset(date.timeZoneOffset);};}
if(standardDatePropCnt===0&&extendedSettings.week){return function(date){return formatWeekNumber(context.computeWeekNumber(date.marker),context.weekLabel,context.locale,extendedSettings.week);};}
return buildNativeFormattingFunc(standardDateProps,extendedSettings,context);}
function buildNativeFormattingFunc(standardDateProps,extendedSettings,context){standardDateProps=__assign({},standardDateProps);extendedSettings=__assign({},extendedSettings);sanitizeSettings(standardDateProps,extendedSettings);standardDateProps.timeZone='UTC';var normalFormat=new Intl.DateTimeFormat(context.locale.codes,standardDateProps);var zeroFormat;if(extendedSettings.omitZeroMinute){var zeroProps=__assign({},standardDateProps);delete zeroProps.minute;zeroFormat=new Intl.DateTimeFormat(context.locale.codes,zeroProps);}
return function(date){var marker=date.marker;var format;if(zeroFormat&&!marker.getUTCMinutes()){format=zeroFormat;}
else{format=normalFormat;}
var s=format.format(marker);return postProcess(s,date,standardDateProps,extendedSettings,context);};}
function sanitizeSettings(standardDateProps,extendedSettings){if(standardDateProps.timeZoneName){if(!standardDateProps.hour){standardDateProps.hour='2-digit';}
if(!standardDateProps.minute){standardDateProps.minute='2-digit';}}
if(standardDateProps.timeZoneName==='long'){standardDateProps.timeZoneName='short';}
if(extendedSettings.omitZeroMinute&&(standardDateProps.second||standardDateProps.millisecond)){delete extendedSettings.omitZeroMinute;}}
function postProcess(s,date,standardDateProps,extendedSettings,context){s=s.replace(LTR_RE,'');if(standardDateProps.timeZoneName==='short'){s=injectTzoStr(s,(context.timeZone==='UTC'||date.timeZoneOffset==null)?'UTC':formatTimeZoneOffset(date.timeZoneOffset));}
if(extendedSettings.omitCommas){s=s.replace(COMMA_RE,'').trim();}
if(extendedSettings.omitZeroMinute){s=s.replace(':00','');}
if(extendedSettings.meridiem===false){s=s.replace(MERIDIEM_RE,'').trim();}
else if(extendedSettings.meridiem==='narrow'){s=s.replace(MERIDIEM_RE,function(m0,m1){return m1.toLocaleLowerCase();});}
else if(extendedSettings.meridiem==='short'){s=s.replace(MERIDIEM_RE,function(m0,m1){return m1.toLocaleLowerCase()+'m';});}
else if(extendedSettings.meridiem==='lowercase'){s=s.replace(MERIDIEM_RE,function(m0){return m0.toLocaleLowerCase();});}
s=s.replace(MULTI_SPACE_RE,' ');s=s.trim();return s;}
function injectTzoStr(s,tzoStr){var replaced=false;s=s.replace(UTC_RE,function(){replaced=true;return tzoStr;});if(!replaced){s+=' '+tzoStr;}
return s;}
function formatWeekNumber(num,weekLabel,locale,display){var parts=[];if(display==='narrow'){parts.push(weekLabel);}
else if(display==='short'){parts.push(weekLabel,' ');}
parts.push(locale.simpleNumberFormat.format(num));if(locale.options.isRtl){parts.reverse();}
return parts.join('');}
function computeMarkerDiffSeverity(d0,d1,ca){if(ca.getMarkerYear(d0)!==ca.getMarkerYear(d1)){return 5;}
if(ca.getMarkerMonth(d0)!==ca.getMarkerMonth(d1)){return 4;}
if(ca.getMarkerDay(d0)!==ca.getMarkerDay(d1)){return 2;}
if(timeAsMs(d0)!==timeAsMs(d1)){return 1;}
return 0;}
function computePartialFormattingOptions(options,biggestUnit){var partialOptions={};for(var name_2 in options){if(!(name_2 in STANDARD_DATE_PROP_SEVERITIES)||STANDARD_DATE_PROP_SEVERITIES[name_2]<=biggestUnit){partialOptions[name_2]=options[name_2];}}
return partialOptions;}
function findCommonInsertion(full0,partial0,full1,partial1){var i0=0;while(i0<full0.length){var found0=full0.indexOf(partial0,i0);if(found0===-1){break;}
var before0=full0.substr(0,found0);i0=found0+partial0.length;var after0=full0.substr(i0);var i1=0;while(i1<full1.length){var found1=full1.indexOf(partial1,i1);if(found1===-1){break;}
var before1=full1.substr(0,found1);i1=found1+partial1.length;var after1=full1.substr(i1);if(before0===before1&&after0===after1){return{before:before0,after:after0};}}}
return null;}
var CmdFormatter=(function(){function CmdFormatter(cmdStr,separator){this.cmdStr=cmdStr;this.separator=separator;}
CmdFormatter.prototype.format=function(date,context){return context.cmdFormatter(this.cmdStr,createVerboseFormattingArg(date,null,context,this.separator));};CmdFormatter.prototype.formatRange=function(start,end,context){return context.cmdFormatter(this.cmdStr,createVerboseFormattingArg(start,end,context,this.separator));};return CmdFormatter;}());var FuncFormatter=(function(){function FuncFormatter(func){this.func=func;}
FuncFormatter.prototype.format=function(date,context){return this.func(createVerboseFormattingArg(date,null,context));};FuncFormatter.prototype.formatRange=function(start,end,context){return this.func(createVerboseFormattingArg(start,end,context));};return FuncFormatter;}());function createFormatter(input,defaultSeparator){if(typeof input==='object'&&input){if(typeof defaultSeparator==='string'){input=__assign({separator:defaultSeparator},input);}
return new NativeFormatter(input);}
else if(typeof input==='string'){return new CmdFormatter(input,defaultSeparator);}
else if(typeof input==='function'){return new FuncFormatter(input);}}
function buildIsoString(marker,timeZoneOffset,stripZeroTime){if(stripZeroTime===void 0){stripZeroTime=false;}
var s=marker.toISOString();s=s.replace('.000','');if(stripZeroTime){s=s.replace('T00:00:00Z','');}
if(s.length>10){if(timeZoneOffset==null){s=s.replace('Z','');}
else if(timeZoneOffset!==0){s=s.replace('Z',formatTimeZoneOffset(timeZoneOffset,true));}}
return s;}
function formatIsoTimeString(marker){return padStart(marker.getUTCHours(),2)+':'+
padStart(marker.getUTCMinutes(),2)+':'+
padStart(marker.getUTCSeconds(),2);}
function formatTimeZoneOffset(minutes,doIso){if(doIso===void 0){doIso=false;}
var sign=minutes<0?'-':'+';var abs=Math.abs(minutes);var hours=Math.floor(abs/60);var mins=Math.round(abs%60);if(doIso){return sign+padStart(hours,2)+':'+padStart(mins,2);}
else{return 'GMT'+sign+hours+(mins?':'+padStart(mins,2):'');}}
function createVerboseFormattingArg(start,end,context,separator){var startInfo=expandZonedMarker(start,context.calendarSystem);var endInfo=end?expandZonedMarker(end,context.calendarSystem):null;return{date:startInfo,start:startInfo,end:endInfo,timeZone:context.timeZone,localeCodes:context.locale.codes,separator:separator};}
function expandZonedMarker(dateInfo,calendarSystem){var a=calendarSystem.markerToArray(dateInfo.marker);return{marker:dateInfo.marker,timeZoneOffset:dateInfo.timeZoneOffset,array:a,year:a[0],month:a[1],day:a[2],hour:a[3],minute:a[4],second:a[5],millisecond:a[6]};}
var EventSourceApi=(function(){function EventSourceApi(calendar,internalEventSource){this.calendar=calendar;this.internalEventSource=internalEventSource;}
EventSourceApi.prototype.remove=function(){this.calendar.dispatch({type:'REMOVE_EVENT_SOURCE',sourceId:this.internalEventSource.sourceId});};EventSourceApi.prototype.refetch=function(){this.calendar.dispatch({type:'FETCH_EVENT_SOURCES',sourceIds:[this.internalEventSource.sourceId]});};Object.defineProperty(EventSourceApi.prototype,"id",{get:function(){return this.internalEventSource.publicId;},enumerable:true,configurable:true});Object.defineProperty(EventSourceApi.prototype,"url",{get:function(){return this.internalEventSource.meta.url;},enumerable:true,configurable:true});return EventSourceApi;}());var EventApi=(function(){function EventApi(calendar,def,instance){this._calendar=calendar;this._def=def;this._instance=instance||null;}
EventApi.prototype.setProp=function(name,val){var _a,_b;if(name in DATE_PROPS);else if(name in NON_DATE_PROPS){if(typeof NON_DATE_PROPS[name]==='function'){val=NON_DATE_PROPS[name](val);}
this.mutate({standardProps:(_a={},_a[name]=val,_a)});}
else if(name in UNSCOPED_EVENT_UI_PROPS){var ui=void 0;if(typeof UNSCOPED_EVENT_UI_PROPS[name]==='function'){val=UNSCOPED_EVENT_UI_PROPS[name](val);}
if(name==='color'){ui={backgroundColor:val,borderColor:val};}
else if(name==='editable'){ui={startEditable:val,durationEditable:val};}
else{ui=(_b={},_b[name]=val,_b);}
this.mutate({standardProps:{ui:ui}});}};EventApi.prototype.setExtendedProp=function(name,val){var _a;this.mutate({extendedProps:(_a={},_a[name]=val,_a)});};EventApi.prototype.setStart=function(startInput,options){if(options===void 0){options={};}
var dateEnv=this._calendar.dateEnv;var start=dateEnv.createMarker(startInput);if(start&&this._instance){var instanceRange=this._instance.range;var startDelta=diffDates(instanceRange.start,start,dateEnv,options.granularity);if(options.maintainDuration){this.mutate({datesDelta:startDelta});}
else{this.mutate({startDelta:startDelta});}}};EventApi.prototype.setEnd=function(endInput,options){if(options===void 0){options={};}
var dateEnv=this._calendar.dateEnv;var end;if(endInput!=null){end=dateEnv.createMarker(endInput);if(!end){return;}}
if(this._instance){if(end){var endDelta=diffDates(this._instance.range.end,end,dateEnv,options.granularity);this.mutate({endDelta:endDelta});}
else{this.mutate({standardProps:{hasEnd:false}});}}};EventApi.prototype.setDates=function(startInput,endInput,options){if(options===void 0){options={};}
var dateEnv=this._calendar.dateEnv;var standardProps={allDay:options.allDay};var start=dateEnv.createMarker(startInput);var end;if(!start){return;}
if(endInput!=null){end=dateEnv.createMarker(endInput);if(!end){return;}}
if(this._instance){var instanceRange=this._instance.range;if(options.allDay===true){instanceRange=computeAlignedDayRange(instanceRange);}
var startDelta=diffDates(instanceRange.start,start,dateEnv,options.granularity);if(end){var endDelta=diffDates(instanceRange.end,end,dateEnv,options.granularity);if(durationsEqual(startDelta,endDelta)){this.mutate({datesDelta:startDelta,standardProps:standardProps});}
else{this.mutate({startDelta:startDelta,endDelta:endDelta,standardProps:standardProps});}}
else{standardProps.hasEnd=false;this.mutate({datesDelta:startDelta,standardProps:standardProps});}}};EventApi.prototype.moveStart=function(deltaInput){var delta=createDuration(deltaInput);if(delta){this.mutate({startDelta:delta});}};EventApi.prototype.moveEnd=function(deltaInput){var delta=createDuration(deltaInput);if(delta){this.mutate({endDelta:delta});}};EventApi.prototype.moveDates=function(deltaInput){var delta=createDuration(deltaInput);if(delta){this.mutate({datesDelta:delta});}};EventApi.prototype.setAllDay=function(allDay,options){if(options===void 0){options={};}
var standardProps={allDay:allDay};var maintainDuration=options.maintainDuration;if(maintainDuration==null){maintainDuration=this._calendar.opt('allDayMaintainDuration');}
if(this._def.allDay!==allDay){standardProps.hasEnd=maintainDuration;}
this.mutate({standardProps:standardProps});};EventApi.prototype.formatRange=function(formatInput){var dateEnv=this._calendar.dateEnv;var instance=this._instance;var formatter=createFormatter(formatInput,this._calendar.opt('defaultRangeSeparator'));if(this._def.hasEnd){return dateEnv.formatRange(instance.range.start,instance.range.end,formatter,{forcedStartTzo:instance.forcedStartTzo,forcedEndTzo:instance.forcedEndTzo});}
else{return dateEnv.format(instance.range.start,formatter,{forcedTzo:instance.forcedStartTzo});}};EventApi.prototype.mutate=function(mutation){var def=this._def;var instance=this._instance;if(instance){this._calendar.dispatch({type:'MUTATE_EVENTS',instanceId:instance.instanceId,mutation:mutation,fromApi:true});var eventStore=this._calendar.state.eventStore;this._def=eventStore.defs[def.defId];this._instance=eventStore.instances[instance.instanceId];}};EventApi.prototype.remove=function(){this._calendar.dispatch({type:'REMOVE_EVENT_DEF',defId:this._def.defId});};Object.defineProperty(EventApi.prototype,"source",{get:function(){var sourceId=this._def.sourceId;if(sourceId){return new EventSourceApi(this._calendar,this._calendar.state.eventSources[sourceId]);}
return null;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"start",{get:function(){return this._instance?this._calendar.dateEnv.toDate(this._instance.range.start):null;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"end",{get:function(){return(this._instance&&this._def.hasEnd)?this._calendar.dateEnv.toDate(this._instance.range.end):null;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"id",{get:function(){return this._def.publicId;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"groupId",{get:function(){return this._def.groupId;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"allDay",{get:function(){return this._def.allDay;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"title",{get:function(){return this._def.title;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"url",{get:function(){return this._def.url;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"rendering",{get:function(){return this._def.rendering;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"startEditable",{get:function(){return this._def.ui.startEditable;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"durationEditable",{get:function(){return this._def.ui.durationEditable;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"constraint",{get:function(){return this._def.ui.constraints[0]||null;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"overlap",{get:function(){return this._def.ui.overlap;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"allow",{get:function(){return this._def.ui.allows[0]||null;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"backgroundColor",{get:function(){return this._def.ui.backgroundColor;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"borderColor",{get:function(){return this._def.ui.borderColor;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"textColor",{get:function(){return this._def.ui.textColor;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"classNames",{get:function(){return this._def.ui.classNames;},enumerable:true,configurable:true});Object.defineProperty(EventApi.prototype,"extendedProps",{get:function(){return this._def.extendedProps;},enumerable:true,configurable:true});return EventApi;}());function sliceEventStore(eventStore,eventUiBases,framingRange,nextDayThreshold){var inverseBgByGroupId={};var inverseBgByDefId={};var defByGroupId={};var bgRanges=[];var fgRanges=[];var eventUis=compileEventUis(eventStore.defs,eventUiBases);for(var defId in eventStore.defs){var def=eventStore.defs[defId];if(def.rendering==='inverse-background'){if(def.groupId){inverseBgByGroupId[def.groupId]=[];if(!defByGroupId[def.groupId]){defByGroupId[def.groupId]=def;}}
else{inverseBgByDefId[defId]=[];}}}
for(var instanceId in eventStore.instances){var instance=eventStore.instances[instanceId];var def=eventStore.defs[instance.defId];var ui=eventUis[def.defId];var origRange=instance.range;var normalRange=(!def.allDay&&nextDayThreshold)?computeVisibleDayRange(origRange,nextDayThreshold):origRange;var slicedRange=intersectRanges(normalRange,framingRange);if(slicedRange){if(def.rendering==='inverse-background'){if(def.groupId){inverseBgByGroupId[def.groupId].push(slicedRange);}
else{inverseBgByDefId[instance.defId].push(slicedRange);}}
else{(def.rendering==='background'?bgRanges:fgRanges).push({def:def,ui:ui,instance:instance,range:slicedRange,isStart:normalRange.start&&normalRange.start.valueOf()===slicedRange.start.valueOf(),isEnd:normalRange.end&&normalRange.end.valueOf()===slicedRange.end.valueOf()});}}}
for(var groupId in inverseBgByGroupId){var ranges=inverseBgByGroupId[groupId];var invertedRanges=invertRanges(ranges,framingRange);for(var _i=0,invertedRanges_1=invertedRanges;_i<invertedRanges_1.length;_i++){var invertedRange=invertedRanges_1[_i];var def=defByGroupId[groupId];var ui=eventUis[def.defId];bgRanges.push({def:def,ui:ui,instance:null,range:invertedRange,isStart:false,isEnd:false});}}
for(var defId in inverseBgByDefId){var ranges=inverseBgByDefId[defId];var invertedRanges=invertRanges(ranges,framingRange);for(var _a=0,invertedRanges_2=invertedRanges;_a<invertedRanges_2.length;_a++){var invertedRange=invertedRanges_2[_a];bgRanges.push({def:eventStore.defs[defId],ui:eventUis[defId],instance:null,range:invertedRange,isStart:false,isEnd:false});}}
return{bg:bgRanges,fg:fgRanges};}
function hasBgRendering(def){return def.rendering==='background'||def.rendering==='inverse-background';}
function filterSegsViaEls(context,segs,isMirror){var calendar=context.calendar,view=context.view;if(calendar.hasPublicHandlers('eventRender')){segs=segs.filter(function(seg){var custom=calendar.publiclyTrigger('eventRender',[{event:new EventApi(calendar,seg.eventRange.def,seg.eventRange.instance),isMirror:isMirror,isStart:seg.isStart,isEnd:seg.isEnd,el:seg.el,view:view}]);if(custom===false){return false;}
else if(custom&&custom!==true){seg.el=custom;}
return true;});}
for(var _i=0,segs_1=segs;_i<segs_1.length;_i++){var seg=segs_1[_i];setElSeg(seg.el,seg);}
return segs;}
function setElSeg(el,seg){el.fcSeg=seg;}
function getElSeg(el){return el.fcSeg||null;}
function compileEventUis(eventDefs,eventUiBases){return mapHash(eventDefs,function(eventDef){return compileEventUi(eventDef,eventUiBases);});}
function compileEventUi(eventDef,eventUiBases){var uis=[];if(eventUiBases['']){uis.push(eventUiBases['']);}
if(eventUiBases[eventDef.defId]){uis.push(eventUiBases[eventDef.defId]);}
uis.push(eventDef.ui);return combineEventUis(uis);}
function triggerRenderedSegs(context,segs,isMirrors){var calendar=context.calendar,view=context.view;if(calendar.hasPublicHandlers('eventPositioned')){for(var _i=0,segs_2=segs;_i<segs_2.length;_i++){var seg=segs_2[_i];calendar.publiclyTriggerAfterSizing('eventPositioned',[{event:new EventApi(calendar,seg.eventRange.def,seg.eventRange.instance),isMirror:isMirrors,isStart:seg.isStart,isEnd:seg.isEnd,el:seg.el,view:view}]);}}
if(!calendar.state.eventSourceLoadingLevel){calendar.afterSizingTriggers._eventsPositioned=[null];}}
function triggerWillRemoveSegs(context,segs,isMirrors){var calendar=context.calendar,view=context.view;for(var _i=0,segs_3=segs;_i<segs_3.length;_i++){var seg=segs_3[_i];calendar.trigger('eventElRemove',seg.el);}
if(calendar.hasPublicHandlers('eventDestroy')){for(var _a=0,segs_4=segs;_a<segs_4.length;_a++){var seg=segs_4[_a];calendar.publiclyTrigger('eventDestroy',[{event:new EventApi(calendar,seg.eventRange.def,seg.eventRange.instance),isMirror:isMirrors,el:seg.el,view:view}]);}}}
function computeEventDraggable(context,eventDef,eventUi){var calendar=context.calendar,view=context.view;var transformers=calendar.pluginSystem.hooks.isDraggableTransformers;var val=eventUi.startEditable;for(var _i=0,transformers_1=transformers;_i<transformers_1.length;_i++){var transformer=transformers_1[_i];val=transformer(val,eventDef,eventUi,view);}
return val;}
function computeEventStartResizable(context,eventDef,eventUi){return eventUi.durationEditable&&context.options.eventResizableFromStart;}
function computeEventEndResizable(context,eventDef,eventUi){return eventUi.durationEditable;}
function applyMutationToEventStore(eventStore,eventConfigBase,mutation,calendar){var eventConfigs=compileEventUis(eventStore.defs,eventConfigBase);var dest=createEmptyEventStore();for(var defId in eventStore.defs){var def=eventStore.defs[defId];dest.defs[defId]=applyMutationToEventDef(def,eventConfigs[defId],mutation,calendar.pluginSystem.hooks.eventDefMutationAppliers,calendar);}
for(var instanceId in eventStore.instances){var instance=eventStore.instances[instanceId];var def=dest.defs[instance.defId];dest.instances[instanceId]=applyMutationToEventInstance(instance,def,eventConfigs[instance.defId],mutation,calendar);}
return dest;}
function applyMutationToEventDef(eventDef,eventConfig,mutation,appliers,calendar){var standardProps=mutation.standardProps||{};if(standardProps.hasEnd==null&&eventConfig.durationEditable&&(mutation.startDelta||mutation.endDelta)){standardProps.hasEnd=true;}
var copy=__assign({},eventDef,standardProps,{ui:__assign({},eventDef.ui,standardProps.ui)});if(mutation.extendedProps){copy.extendedProps=__assign({},copy.extendedProps,mutation.extendedProps);}
for(var _i=0,appliers_1=appliers;_i<appliers_1.length;_i++){var applier=appliers_1[_i];applier(copy,mutation,calendar);}
if(!copy.hasEnd&&calendar.opt('forceEventDuration')){copy.hasEnd=true;}
return copy;}
function applyMutationToEventInstance(eventInstance,eventDef,eventConfig,mutation,calendar){var dateEnv=calendar.dateEnv;var forceAllDay=mutation.standardProps&&mutation.standardProps.allDay===true;var clearEnd=mutation.standardProps&&mutation.standardProps.hasEnd===false;var copy=__assign({},eventInstance);if(forceAllDay){copy.range=computeAlignedDayRange(copy.range);}
if(mutation.datesDelta&&eventConfig.startEditable){copy.range={start:dateEnv.add(copy.range.start,mutation.datesDelta),end:dateEnv.add(copy.range.end,mutation.datesDelta)};}
if(mutation.startDelta&&eventConfig.durationEditable){copy.range={start:dateEnv.add(copy.range.start,mutation.startDelta),end:copy.range.end};}
if(mutation.endDelta&&eventConfig.durationEditable){copy.range={start:copy.range.start,end:dateEnv.add(copy.range.end,mutation.endDelta)};}
if(clearEnd){copy.range={start:copy.range.start,end:calendar.getDefaultEventEnd(eventDef.allDay,copy.range.start)};}
if(eventDef.allDay){copy.range={start:startOfDay(copy.range.start),end:startOfDay(copy.range.end)};}
if(copy.range.end<copy.range.start){copy.range.end=calendar.getDefaultEventEnd(eventDef.allDay,copy.range.start);}
return copy;}
function reduceEventStore(eventStore,action,eventSources,dateProfile,calendar){switch(action.type){case 'RECEIVE_EVENTS':return receiveRawEvents(eventStore,eventSources[action.sourceId],action.fetchId,action.fetchRange,action.rawEvents,calendar);case 'ADD_EVENTS':return addEvent(eventStore,action.eventStore,dateProfile?dateProfile.activeRange:null,calendar);case 'MERGE_EVENTS':return mergeEventStores(eventStore,action.eventStore);case 'PREV':case 'NEXT':case 'SET_DATE':case 'SET_VIEW_TYPE':if(dateProfile){return expandRecurring(eventStore,dateProfile.activeRange,calendar);}
else{return eventStore;}
case 'CHANGE_TIMEZONE':return rezoneDates(eventStore,action.oldDateEnv,calendar.dateEnv);case 'MUTATE_EVENTS':return applyMutationToRelated(eventStore,action.instanceId,action.mutation,action.fromApi,calendar);case 'REMOVE_EVENT_INSTANCES':return excludeInstances(eventStore,action.instances);case 'REMOVE_EVENT_DEF':return filterEventStoreDefs(eventStore,function(eventDef){return eventDef.defId!==action.defId;});case 'REMOVE_EVENT_SOURCE':return excludeEventsBySourceId(eventStore,action.sourceId);case 'REMOVE_ALL_EVENT_SOURCES':return filterEventStoreDefs(eventStore,function(eventDef){return!eventDef.sourceId;});case 'REMOVE_ALL_EVENTS':return createEmptyEventStore();case 'RESET_EVENTS':return{defs:eventStore.defs,instances:eventStore.instances};default:return eventStore;}}
function receiveRawEvents(eventStore,eventSource,fetchId,fetchRange,rawEvents,calendar){if(eventSource&&fetchId===eventSource.latestFetchId){var subset=parseEvents(transformRawEvents(rawEvents,eventSource,calendar),eventSource.sourceId,calendar);if(fetchRange){subset=expandRecurring(subset,fetchRange,calendar);}
return mergeEventStores(excludeEventsBySourceId(eventStore,eventSource.sourceId),subset);}
return eventStore;}
function addEvent(eventStore,subset,expandRange,calendar){if(expandRange){subset=expandRecurring(subset,expandRange,calendar);}
return mergeEventStores(eventStore,subset);}
function rezoneDates(eventStore,oldDateEnv,newDateEnv){var defs=eventStore.defs;var instances=mapHash(eventStore.instances,function(instance){var def=defs[instance.defId];if(def.allDay||def.recurringDef){return instance;}
else{return __assign({},instance,{range:{start:newDateEnv.createMarker(oldDateEnv.toDate(instance.range.start,instance.forcedStartTzo)),end:newDateEnv.createMarker(oldDateEnv.toDate(instance.range.end,instance.forcedEndTzo))},forcedStartTzo:newDateEnv.canComputeOffset?null:instance.forcedStartTzo,forcedEndTzo:newDateEnv.canComputeOffset?null:instance.forcedEndTzo});}});return{defs:defs,instances:instances};}
function applyMutationToRelated(eventStore,instanceId,mutation,fromApi,calendar){var relevant=getRelevantEvents(eventStore,instanceId);var eventConfigBase=fromApi?{'':{startEditable:true,durationEditable:true,constraints:[],overlap:null,allows:[],backgroundColor:'',borderColor:'',textColor:'',classNames:[]}}:calendar.eventUiBases;relevant=applyMutationToEventStore(relevant,eventConfigBase,mutation,calendar);return mergeEventStores(eventStore,relevant);}
function excludeEventsBySourceId(eventStore,sourceId){return filterEventStoreDefs(eventStore,function(eventDef){return eventDef.sourceId!==sourceId;});}
function excludeInstances(eventStore,removals){return{defs:eventStore.defs,instances:filterHash(eventStore.instances,function(instance){return!removals[instance.instanceId];})};}
function isInteractionValid(interaction,calendar){return isNewPropsValid({eventDrag:interaction},calendar);}
function isDateSelectionValid(dateSelection,calendar){return isNewPropsValid({dateSelection:dateSelection},calendar);}
function isNewPropsValid(newProps,calendar){var view=calendar.view;var props=__assign({businessHours:view?view.props.businessHours:createEmptyEventStore(),dateSelection:'',eventStore:calendar.state.eventStore,eventUiBases:calendar.eventUiBases,eventSelection:'',eventDrag:null,eventResize:null},newProps);return(calendar.pluginSystem.hooks.isPropsValid||isPropsValid)(props,calendar);}
function isPropsValid(state,calendar,dateSpanMeta,filterConfig){if(dateSpanMeta===void 0){dateSpanMeta={};}
if(state.eventDrag&&!isInteractionPropsValid(state,calendar,dateSpanMeta,filterConfig)){return false;}
if(state.dateSelection&&!isDateSelectionPropsValid(state,calendar,dateSpanMeta,filterConfig)){return false;}
return true;}
function isInteractionPropsValid(state,calendar,dateSpanMeta,filterConfig){var interaction=state.eventDrag;var subjectEventStore=interaction.mutatedEvents;var subjectDefs=subjectEventStore.defs;var subjectInstances=subjectEventStore.instances;var subjectConfigs=compileEventUis(subjectDefs,interaction.isEvent?state.eventUiBases:{'':calendar.selectionConfig});if(filterConfig){subjectConfigs=mapHash(subjectConfigs,filterConfig);}
var otherEventStore=excludeInstances(state.eventStore,interaction.affectedEvents.instances);var otherDefs=otherEventStore.defs;var otherInstances=otherEventStore.instances;var otherConfigs=compileEventUis(otherDefs,state.eventUiBases);for(var subjectInstanceId in subjectInstances){var subjectInstance=subjectInstances[subjectInstanceId];var subjectRange=subjectInstance.range;var subjectConfig=subjectConfigs[subjectInstance.defId];var subjectDef=subjectDefs[subjectInstance.defId];if(!allConstraintsPass(subjectConfig.constraints,subjectRange,otherEventStore,state.businessHours,calendar)){return false;}
var overlapFunc=calendar.opt('eventOverlap');if(typeof overlapFunc!=='function'){overlapFunc=null;}
for(var otherInstanceId in otherInstances){var otherInstance=otherInstances[otherInstanceId];if(rangesIntersect(subjectRange,otherInstance.range)){var otherOverlap=otherConfigs[otherInstance.defId].overlap;if(otherOverlap===false&&interaction.isEvent){return false;}
if(subjectConfig.overlap===false){return false;}
if(overlapFunc&&!overlapFunc(new EventApi(calendar,otherDefs[otherInstance.defId],otherInstance),new EventApi(calendar,subjectDef,subjectInstance))){return false;}}}
var calendarEventStore=calendar.state.eventStore;for(var _i=0,_a=subjectConfig.allows;_i<_a.length;_i++){var subjectAllow=_a[_i];var subjectDateSpan=__assign({},dateSpanMeta,{range:subjectInstance.range,allDay:subjectDef.allDay});var origDef=calendarEventStore.defs[subjectDef.defId];var origInstance=calendarEventStore.instances[subjectInstanceId];var eventApi=void 0;if(origDef){eventApi=new EventApi(calendar,origDef,origInstance);}
else{eventApi=new EventApi(calendar,subjectDef);}
if(!subjectAllow(calendar.buildDateSpanApi(subjectDateSpan),eventApi)){return false;}}}
return true;}
function isDateSelectionPropsValid(state,calendar,dateSpanMeta,filterConfig){var relevantEventStore=state.eventStore;var relevantDefs=relevantEventStore.defs;var relevantInstances=relevantEventStore.instances;var selection=state.dateSelection;var selectionRange=selection.range;var selectionConfig=calendar.selectionConfig;if(filterConfig){selectionConfig=filterConfig(selectionConfig);}
if(!allConstraintsPass(selectionConfig.constraints,selectionRange,relevantEventStore,state.businessHours,calendar)){return false;}
var overlapFunc=calendar.opt('selectOverlap');if(typeof overlapFunc!=='function'){overlapFunc=null;}
for(var relevantInstanceId in relevantInstances){var relevantInstance=relevantInstances[relevantInstanceId];if(rangesIntersect(selectionRange,relevantInstance.range)){if(selectionConfig.overlap===false){return false;}
if(overlapFunc&&!overlapFunc(new EventApi(calendar,relevantDefs[relevantInstance.defId],relevantInstance))){return false;}}}
for(var _i=0,_a=selectionConfig.allows;_i<_a.length;_i++){var selectionAllow=_a[_i];var fullDateSpan=__assign({},dateSpanMeta,selection);if(!selectionAllow(calendar.buildDateSpanApi(fullDateSpan),null)){return false;}}
return true;}
function allConstraintsPass(constraints,subjectRange,otherEventStore,businessHoursUnexpanded,calendar){for(var _i=0,constraints_1=constraints;_i<constraints_1.length;_i++){var constraint=constraints_1[_i];if(!anyRangesContainRange(constraintToRanges(constraint,subjectRange,otherEventStore,businessHoursUnexpanded,calendar),subjectRange)){return false;}}
return true;}
function constraintToRanges(constraint,subjectRange,otherEventStore,businessHoursUnexpanded,calendar){if(constraint==='businessHours'){return eventStoreToRanges(expandRecurring(businessHoursUnexpanded,subjectRange,calendar));}
else if(typeof constraint==='string'){return eventStoreToRanges(filterEventStoreDefs(otherEventStore,function(eventDef){return eventDef.groupId===constraint;}));}
else if(typeof constraint==='object'&&constraint){return eventStoreToRanges(expandRecurring(constraint,subjectRange,calendar));}
return[];}
function eventStoreToRanges(eventStore){var instances=eventStore.instances;var ranges=[];for(var instanceId in instances){ranges.push(instances[instanceId].range);}
return ranges;}
function anyRangesContainRange(outerRanges,innerRange){for(var _i=0,outerRanges_1=outerRanges;_i<outerRanges_1.length;_i++){var outerRange=outerRanges_1[_i];if(rangeContainsRange(outerRange,innerRange)){return true;}}
return false;}
function normalizeConstraint(input,calendar){if(Array.isArray(input)){return parseEvents(input,'',calendar,true);}
else if(typeof input==='object'&&input){return parseEvents([input],'',calendar,true);}
else if(input!=null){return String(input);}
else{return null;}}
function htmlEscape(s){return(s+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/'/g,'&#039;').replace(/"/g,'&quot;').replace(/\n/g,'<br />');}
function cssToStr(cssProps){var statements=[];for(var name_1 in cssProps){var val=cssProps[name_1];if(val!=null&&val!==''){statements.push(name_1+':'+val);}}
return statements.join(';');}
function attrsToStr(attrs){var parts=[];for(var name_2 in attrs){var val=attrs[name_2];if(val!=null){parts.push(name_2+'="'+htmlEscape(val)+'"');}}
return parts.join(' ');}
function parseClassName(raw){if(Array.isArray(raw)){return raw;}
else if(typeof raw==='string'){return raw.split(/\s+/);}
else{return[];}}
var UNSCOPED_EVENT_UI_PROPS={editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:null,overlap:null,allow:null,className:parseClassName,classNames:parseClassName,color:String,backgroundColor:String,borderColor:String,textColor:String};function processUnscopedUiProps(rawProps,calendar,leftovers){var props=refineProps(rawProps,UNSCOPED_EVENT_UI_PROPS,{},leftovers);var constraint=normalizeConstraint(props.constraint,calendar);return{startEditable:props.startEditable!=null?props.startEditable:props.editable,durationEditable:props.durationEditable!=null?props.durationEditable:props.editable,constraints:constraint!=null?[constraint]:[],overlap:props.overlap,allows:props.allow!=null?[props.allow]:[],backgroundColor:props.backgroundColor||props.color,borderColor:props.borderColor||props.color,textColor:props.textColor,classNames:props.classNames.concat(props.className)};}
function processScopedUiProps(prefix,rawScoped,calendar,leftovers){var rawUnscoped={};var wasFound={};for(var key in UNSCOPED_EVENT_UI_PROPS){var scopedKey=prefix+capitaliseFirstLetter(key);rawUnscoped[key]=rawScoped[scopedKey];wasFound[scopedKey]=true;}
if(prefix==='event'){rawUnscoped.editable=rawScoped.editable;}
if(leftovers){for(var key in rawScoped){if(!wasFound[key]){leftovers[key]=rawScoped[key];}}}
return processUnscopedUiProps(rawUnscoped,calendar);}
var EMPTY_EVENT_UI={startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:'',borderColor:'',textColor:'',classNames:[]};function combineEventUis(uis){return uis.reduce(combineTwoEventUis,EMPTY_EVENT_UI);}
function combineTwoEventUis(item0,item1){return{startEditable:item1.startEditable!=null?item1.startEditable:item0.startEditable,durationEditable:item1.durationEditable!=null?item1.durationEditable:item0.durationEditable,constraints:item0.constraints.concat(item1.constraints),overlap:typeof item1.overlap==='boolean'?item1.overlap:item0.overlap,allows:item0.allows.concat(item1.allows),backgroundColor:item1.backgroundColor||item0.backgroundColor,borderColor:item1.borderColor||item0.borderColor,textColor:item1.textColor||item0.textColor,classNames:item0.classNames.concat(item1.classNames)};}
var NON_DATE_PROPS={id:String,groupId:String,title:String,url:String,rendering:String,extendedProps:null};var DATE_PROPS={start:null,date:null,end:null,allDay:null};var uid=0;function parseEvent(raw,sourceId,calendar,allowOpenRange){var allDayDefault=computeIsAllDayDefault(sourceId,calendar);var leftovers0={};var recurringRes=parseRecurring(raw,allDayDefault,calendar.dateEnv,calendar.pluginSystem.hooks.recurringTypes,leftovers0);if(recurringRes){var def=parseEventDef(leftovers0,sourceId,recurringRes.allDay,Boolean(recurringRes.duration),calendar);def.recurringDef={typeId:recurringRes.typeId,typeData:recurringRes.typeData,duration:recurringRes.duration};return{def:def,instance:null};}
else{var leftovers1={};var singleRes=parseSingle(raw,allDayDefault,calendar,leftovers1,allowOpenRange);if(singleRes){var def=parseEventDef(leftovers1,sourceId,singleRes.allDay,singleRes.hasEnd,calendar);var instance=createEventInstance(def.defId,singleRes.range,singleRes.forcedStartTzo,singleRes.forcedEndTzo);return{def:def,instance:instance};}}
return null;}
function parseEventDef(raw,sourceId,allDay,hasEnd,calendar){var leftovers={};var def=pluckNonDateProps(raw,calendar,leftovers);def.defId=String(uid++);def.sourceId=sourceId;def.allDay=allDay;def.hasEnd=hasEnd;for(var _i=0,_a=calendar.pluginSystem.hooks.eventDefParsers;_i<_a.length;_i++){var eventDefParser=_a[_i];var newLeftovers={};eventDefParser(def,leftovers,newLeftovers);leftovers=newLeftovers;}
def.extendedProps=__assign(leftovers,def.extendedProps||{});Object.freeze(def.ui.classNames);Object.freeze(def.extendedProps);return def;}
function createEventInstance(defId,range,forcedStartTzo,forcedEndTzo){return{instanceId:String(uid++),defId:defId,range:range,forcedStartTzo:forcedStartTzo==null?null:forcedStartTzo,forcedEndTzo:forcedEndTzo==null?null:forcedEndTzo};}
function parseSingle(raw,allDayDefault,calendar,leftovers,allowOpenRange){var props=pluckDateProps(raw,leftovers);var allDay=props.allDay;var startMeta;var startMarker=null;var hasEnd=false;var endMeta;var endMarker=null;startMeta=calendar.dateEnv.createMarkerMeta(props.start);if(startMeta){startMarker=startMeta.marker;}
else if(!allowOpenRange){return null;}
if(props.end!=null){endMeta=calendar.dateEnv.createMarkerMeta(props.end);}
if(allDay==null){if(allDayDefault!=null){allDay=allDayDefault;}
else{allDay=(!startMeta||startMeta.isTimeUnspecified)&&(!endMeta||endMeta.isTimeUnspecified);}}
if(allDay&&startMarker){startMarker=startOfDay(startMarker);}
if(endMeta){endMarker=endMeta.marker;if(allDay){endMarker=startOfDay(endMarker);}
if(startMarker&&endMarker<=startMarker){endMarker=null;}}
if(endMarker){hasEnd=true;}
else if(!allowOpenRange){hasEnd=calendar.opt('forceEventDuration')||false;endMarker=calendar.dateEnv.add(startMarker,allDay?calendar.defaultAllDayEventDuration:calendar.defaultTimedEventDuration);}
return{allDay:allDay,hasEnd:hasEnd,range:{start:startMarker,end:endMarker},forcedStartTzo:startMeta?startMeta.forcedTzo:null,forcedEndTzo:endMeta?endMeta.forcedTzo:null};}
function pluckDateProps(raw,leftovers){var props=refineProps(raw,DATE_PROPS,{},leftovers);props.start=(props.start!==null)?props.start:props.date;delete props.date;return props;}
function pluckNonDateProps(raw,calendar,leftovers){var preLeftovers={};var props=refineProps(raw,NON_DATE_PROPS,{},preLeftovers);var ui=processUnscopedUiProps(preLeftovers,calendar,leftovers);props.publicId=props.id;delete props.id;props.ui=ui;return props;}
function computeIsAllDayDefault(sourceId,calendar){var res=null;if(sourceId){var source=calendar.state.eventSources[sourceId];res=source.allDayDefault;}
if(res==null){res=calendar.opt('allDayDefault');}
return res;}
var DEF_DEFAULTS={startTime:'09:00',endTime:'17:00',daysOfWeek:[1,2,3,4,5],rendering:'inverse-background',classNames:'fc-nonbusiness',groupId:'_businessHours'};function parseBusinessHours(input,calendar){return parseEvents(refineInputs(input),'',calendar);}
function refineInputs(input){var rawDefs;if(input===true){rawDefs=[{}];}
else if(Array.isArray(input)){rawDefs=input.filter(function(rawDef){return rawDef.daysOfWeek;});}
else if(typeof input==='object'&&input){rawDefs=[input];}
else{rawDefs=[];}
rawDefs=rawDefs.map(function(rawDef){return __assign({},DEF_DEFAULTS,rawDef);});return rawDefs;}
function memoizeRendering(renderFunc,unrenderFunc,dependencies){if(dependencies===void 0){dependencies=[];}
var dependents=[];var thisContext;var prevArgs;function unrender(){if(prevArgs){for(var _i=0,dependents_1=dependents;_i<dependents_1.length;_i++){var dependent=dependents_1[_i];dependent.unrender();}
if(unrenderFunc){unrenderFunc.apply(thisContext,prevArgs);}
prevArgs=null;}}
function res(){if(!prevArgs||!isArraysEqual(prevArgs,arguments)){unrender();thisContext=this;prevArgs=arguments;renderFunc.apply(this,arguments);}}
res.dependents=dependents;res.unrender=unrender;for(var _i=0,dependencies_1=dependencies;_i<dependencies_1.length;_i++){var dependency=dependencies_1[_i];dependency.dependents.push(res);}
return res;}
var EMPTY_EVENT_STORE=createEmptyEventStore();var Splitter=(function(){function Splitter(){this.getKeysForEventDefs=memoize(this._getKeysForEventDefs);this.splitDateSelection=memoize(this._splitDateSpan);this.splitEventStore=memoize(this._splitEventStore);this.splitIndividualUi=memoize(this._splitIndividualUi);this.splitEventDrag=memoize(this._splitInteraction);this.splitEventResize=memoize(this._splitInteraction);this.eventUiBuilders={};}
Splitter.prototype.splitProps=function(props){var _this=this;var keyInfos=this.getKeyInfo(props);var defKeys=this.getKeysForEventDefs(props.eventStore);var dateSelections=this.splitDateSelection(props.dateSelection);var individualUi=this.splitIndividualUi(props.eventUiBases,defKeys);var eventStores=this.splitEventStore(props.eventStore,defKeys);var eventDrags=this.splitEventDrag(props.eventDrag);var eventResizes=this.splitEventResize(props.eventResize);var splitProps={};this.eventUiBuilders=mapHash(keyInfos,function(info,key){return _this.eventUiBuilders[key]||memoize(buildEventUiForKey);});for(var key in keyInfos){var keyInfo=keyInfos[key];var eventStore=eventStores[key]||EMPTY_EVENT_STORE;var buildEventUi=this.eventUiBuilders[key];splitProps[key]={businessHours:keyInfo.businessHours||props.businessHours,dateSelection:dateSelections[key]||null,eventStore:eventStore,eventUiBases:buildEventUi(props.eventUiBases[''],keyInfo.ui,individualUi[key]),eventSelection:eventStore.instances[props.eventSelection]?props.eventSelection:'',eventDrag:eventDrags[key]||null,eventResize:eventResizes[key]||null};}
return splitProps;};Splitter.prototype._splitDateSpan=function(dateSpan){var dateSpans={};if(dateSpan){var keys=this.getKeysForDateSpan(dateSpan);for(var _i=0,keys_1=keys;_i<keys_1.length;_i++){var key=keys_1[_i];dateSpans[key]=dateSpan;}}
return dateSpans;};Splitter.prototype._getKeysForEventDefs=function(eventStore){var _this=this;return mapHash(eventStore.defs,function(eventDef){return _this.getKeysForEventDef(eventDef);});};Splitter.prototype._splitEventStore=function(eventStore,defKeys){var defs=eventStore.defs,instances=eventStore.instances;var splitStores={};for(var defId in defs){for(var _i=0,_a=defKeys[defId];_i<_a.length;_i++){var key=_a[_i];if(!splitStores[key]){splitStores[key]=createEmptyEventStore();}
splitStores[key].defs[defId]=defs[defId];}}
for(var instanceId in instances){var instance=instances[instanceId];for(var _b=0,_c=defKeys[instance.defId];_b<_c.length;_b++){var key=_c[_b];if(splitStores[key]){splitStores[key].instances[instanceId]=instance;}}}
return splitStores;};Splitter.prototype._splitIndividualUi=function(eventUiBases,defKeys){var splitHashes={};for(var defId in eventUiBases){if(defId){for(var _i=0,_a=defKeys[defId];_i<_a.length;_i++){var key=_a[_i];if(!splitHashes[key]){splitHashes[key]={};}
splitHashes[key][defId]=eventUiBases[defId];}}}
return splitHashes;};Splitter.prototype._splitInteraction=function(interaction){var splitStates={};if(interaction){var affectedStores_1=this._splitEventStore(interaction.affectedEvents,this._getKeysForEventDefs(interaction.affectedEvents));var mutatedKeysByDefId=this._getKeysForEventDefs(interaction.mutatedEvents);var mutatedStores_1=this._splitEventStore(interaction.mutatedEvents,mutatedKeysByDefId);var populate=function(key){if(!splitStates[key]){splitStates[key]={affectedEvents:affectedStores_1[key]||EMPTY_EVENT_STORE,mutatedEvents:mutatedStores_1[key]||EMPTY_EVENT_STORE,isEvent:interaction.isEvent,origSeg:interaction.origSeg};}};for(var key in affectedStores_1){populate(key);}
for(var key in mutatedStores_1){populate(key);}}
return splitStates;};return Splitter;}());function buildEventUiForKey(allUi,eventUiForKey,individualUi){var baseParts=[];if(allUi){baseParts.push(allUi);}
if(eventUiForKey){baseParts.push(eventUiForKey);}
var stuff={'':combineEventUis(baseParts)};if(individualUi){__assign(stuff,individualUi);}
return stuff;}
function buildGotoAnchorHtml(allOptions,dateEnv,gotoOptions,attrs,innerHtml){var date;var type;var forceOff;var finalOptions;if(gotoOptions instanceof Date){date=gotoOptions;}
else{date=gotoOptions.date;type=gotoOptions.type;forceOff=gotoOptions.forceOff;}
finalOptions={date:dateEnv.formatIso(date,{omitTime:true}),type:type||'day'};if(typeof attrs==='string'){innerHtml=attrs;attrs=null;}
attrs=attrs?' '+attrsToStr(attrs):'';innerHtml=innerHtml||'';if(!forceOff&&allOptions.navLinks){return '<a'+attrs+
' data-goto="'+htmlEscape(JSON.stringify(finalOptions))+'">'+
innerHtml+
'</a>';}
else{return '<span'+attrs+'>'+
innerHtml+
'</span>';}}
function getAllDayHtml(allOptions){return allOptions.allDayHtml||htmlEscape(allOptions.allDayText);}
function getDayClasses(date,dateProfile,context,noThemeHighlight){var calendar=context.calendar,options=context.options,theme=context.theme,dateEnv=context.dateEnv;var classes=[];var todayStart;var todayEnd;if(!rangeContainsMarker(dateProfile.activeRange,date)){classes.push('fc-disabled-day');}
else{classes.push('fc-'+DAY_IDS[date.getUTCDay()]);if(options.monthMode&&dateEnv.getMonth(date)!==dateEnv.getMonth(dateProfile.currentRange.start)){classes.push('fc-other-month');}
todayStart=startOfDay(calendar.getNow());todayEnd=addDays(todayStart,1);if(date<todayStart){classes.push('fc-past');}
else if(date>=todayEnd){classes.push('fc-future');}
else{classes.push('fc-today');if(noThemeHighlight!==true){classes.push(theme.getClass('today'));}}}
return classes;}
function unpromisify(func,success,failure){var isResolved=false;var wrappedSuccess=function(){if(!isResolved){isResolved=true;success.apply(this,arguments);}};var wrappedFailure=function(){if(!isResolved){isResolved=true;if(failure){failure.apply(this,arguments);}}};var res=func(wrappedSuccess,wrappedFailure);if(res&&typeof res.then==='function'){res.then(wrappedSuccess,wrappedFailure);}}
var Mixin=(function(){function Mixin(){}
Mixin.mixInto=function(destClass){this.mixIntoObj(destClass.prototype);};Mixin.mixIntoObj=function(destObj){var _this=this;Object.getOwnPropertyNames(this.prototype).forEach(function(name){if(!destObj[name]){destObj[name]=_this.prototype[name];}});};Mixin.mixOver=function(destClass){var _this=this;Object.getOwnPropertyNames(this.prototype).forEach(function(name){destClass.prototype[name]=_this.prototype[name];});};return Mixin;}());var EmitterMixin=(function(_super){__extends(EmitterMixin,_super);function EmitterMixin(){return _super!==null&&_super.apply(this,arguments)||this;}
EmitterMixin.prototype.on=function(type,handler){addToHash(this._handlers||(this._handlers={}),type,handler);return this;};EmitterMixin.prototype.one=function(type,handler){addToHash(this._oneHandlers||(this._oneHandlers={}),type,handler);return this;};EmitterMixin.prototype.off=function(type,handler){if(this._handlers){removeFromHash(this._handlers,type,handler);}
if(this._oneHandlers){removeFromHash(this._oneHandlers,type,handler);}
return this;};EmitterMixin.prototype.trigger=function(type){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i];}
this.triggerWith(type,this,args);return this;};EmitterMixin.prototype.triggerWith=function(type,context,args){if(this._handlers){applyAll(this._handlers[type],context,args);}
if(this._oneHandlers){applyAll(this._oneHandlers[type],context,args);delete this._oneHandlers[type];}
return this;};EmitterMixin.prototype.hasHandlers=function(type){return(this._handlers&&this._handlers[type]&&this._handlers[type].length)||(this._oneHandlers&&this._oneHandlers[type]&&this._oneHandlers[type].length);};return EmitterMixin;}(Mixin));function addToHash(hash,type,handler){(hash[type]||(hash[type]=[])).push(handler);}
function removeFromHash(hash,type,handler){if(handler){if(hash[type]){hash[type]=hash[type].filter(function(func){return func!==handler;});}}
else{delete hash[type];}}
var PositionCache=(function(){function PositionCache(originEl,els,isHorizontal,isVertical){this.originEl=originEl;this.els=els;this.isHorizontal=isHorizontal;this.isVertical=isVertical;}
PositionCache.prototype.build=function(){var originEl=this.originEl;var originClientRect=this.originClientRect=originEl.getBoundingClientRect();if(this.isHorizontal){this.buildElHorizontals(originClientRect.left);}
if(this.isVertical){this.buildElVerticals(originClientRect.top);}};PositionCache.prototype.buildElHorizontals=function(originClientLeft){var lefts=[];var rights=[];for(var _i=0,_a=this.els;_i<_a.length;_i++){var el=_a[_i];var rect=el.getBoundingClientRect();lefts.push(rect.left-originClientLeft);rights.push(rect.right-originClientLeft);}
this.lefts=lefts;this.rights=rights;};PositionCache.prototype.buildElVerticals=function(originClientTop){var tops=[];var bottoms=[];for(var _i=0,_a=this.els;_i<_a.length;_i++){var el=_a[_i];var rect=el.getBoundingClientRect();tops.push(rect.top-originClientTop);bottoms.push(rect.bottom-originClientTop);}
this.tops=tops;this.bottoms=bottoms;};PositionCache.prototype.leftToIndex=function(leftPosition){var lefts=this.lefts;var rights=this.rights;var len=lefts.length;var i;for(i=0;i<len;i++){if(leftPosition>=lefts[i]&&leftPosition<rights[i]){return i;}}};PositionCache.prototype.topToIndex=function(topPosition){var tops=this.tops;var bottoms=this.bottoms;var len=tops.length;var i;for(i=0;i<len;i++){if(topPosition>=tops[i]&&topPosition<bottoms[i]){return i;}}};PositionCache.prototype.getWidth=function(leftIndex){return this.rights[leftIndex]-this.lefts[leftIndex];};PositionCache.prototype.getHeight=function(topIndex){return this.bottoms[topIndex]-this.tops[topIndex];};return PositionCache;}());var ScrollController=(function(){function ScrollController(){}
ScrollController.prototype.getMaxScrollTop=function(){return this.getScrollHeight()-this.getClientHeight();};ScrollController.prototype.getMaxScrollLeft=function(){return this.getScrollWidth()-this.getClientWidth();};ScrollController.prototype.canScrollVertically=function(){return this.getMaxScrollTop()>0;};ScrollController.prototype.canScrollHorizontally=function(){return this.getMaxScrollLeft()>0;};ScrollController.prototype.canScrollUp=function(){return this.getScrollTop()>0;};ScrollController.prototype.canScrollDown=function(){return this.getScrollTop()<this.getMaxScrollTop();};ScrollController.prototype.canScrollLeft=function(){return this.getScrollLeft()>0;};ScrollController.prototype.canScrollRight=function(){return this.getScrollLeft()<this.getMaxScrollLeft();};return ScrollController;}());var ElementScrollController=(function(_super){__extends(ElementScrollController,_super);function ElementScrollController(el){var _this=_super.call(this)||this;_this.el=el;return _this;}
ElementScrollController.prototype.getScrollTop=function(){return this.el.scrollTop;};ElementScrollController.prototype.getScrollLeft=function(){return this.el.scrollLeft;};ElementScrollController.prototype.setScrollTop=function(top){this.el.scrollTop=top;};ElementScrollController.prototype.setScrollLeft=function(left){this.el.scrollLeft=left;};ElementScrollController.prototype.getScrollWidth=function(){return this.el.scrollWidth;};ElementScrollController.prototype.getScrollHeight=function(){return this.el.scrollHeight;};ElementScrollController.prototype.getClientHeight=function(){return this.el.clientHeight;};ElementScrollController.prototype.getClientWidth=function(){return this.el.clientWidth;};return ElementScrollController;}(ScrollController));var WindowScrollController=(function(_super){__extends(WindowScrollController,_super);function WindowScrollController(){return _super!==null&&_super.apply(this,arguments)||this;}
WindowScrollController.prototype.getScrollTop=function(){return window.pageYOffset;};WindowScrollController.prototype.getScrollLeft=function(){return window.pageXOffset;};WindowScrollController.prototype.setScrollTop=function(n){window.scroll(window.pageXOffset,n);};WindowScrollController.prototype.setScrollLeft=function(n){window.scroll(n,window.pageYOffset);};WindowScrollController.prototype.getScrollWidth=function(){return document.documentElement.scrollWidth;};WindowScrollController.prototype.getScrollHeight=function(){return document.documentElement.scrollHeight;};WindowScrollController.prototype.getClientHeight=function(){return document.documentElement.clientHeight;};WindowScrollController.prototype.getClientWidth=function(){return document.documentElement.clientWidth;};return WindowScrollController;}(ScrollController));var ScrollComponent=(function(_super){__extends(ScrollComponent,_super);function ScrollComponent(overflowX,overflowY){var _this=_super.call(this,createElement('div',{className:'fc-scroller'}))||this;_this.overflowX=overflowX;_this.overflowY=overflowY;_this.applyOverflow();return _this;}
ScrollComponent.prototype.clear=function(){this.setHeight('auto');this.applyOverflow();};ScrollComponent.prototype.destroy=function(){removeElement(this.el);};ScrollComponent.prototype.applyOverflow=function(){applyStyle(this.el,{overflowX:this.overflowX,overflowY:this.overflowY});};ScrollComponent.prototype.lockOverflow=function(scrollbarWidths){var overflowX=this.overflowX;var overflowY=this.overflowY;scrollbarWidths=scrollbarWidths||this.getScrollbarWidths();if(overflowX==='auto'){overflowX=(scrollbarWidths.bottom||this.canScrollHorizontally())?'scroll':'hidden';}
if(overflowY==='auto'){overflowY=(scrollbarWidths.left||scrollbarWidths.right||this.canScrollVertically())?'scroll':'hidden';}
applyStyle(this.el,{overflowX:overflowX,overflowY:overflowY});};ScrollComponent.prototype.setHeight=function(height){applyStyleProp(this.el,'height',height);};ScrollComponent.prototype.getScrollbarWidths=function(){var edges=computeEdges(this.el);return{left:edges.scrollbarLeft,right:edges.scrollbarRight,bottom:edges.scrollbarBottom};};return ScrollComponent;}(ElementScrollController));var Theme=(function(){function Theme(calendarOptions){this.calendarOptions=calendarOptions;this.processIconOverride();}
Theme.prototype.processIconOverride=function(){if(this.iconOverrideOption){this.setIconOverride(this.calendarOptions[this.iconOverrideOption]);}};Theme.prototype.setIconOverride=function(iconOverrideHash){var iconClassesCopy;var buttonName;if(typeof iconOverrideHash==='object'&&iconOverrideHash){iconClassesCopy=__assign({},this.iconClasses);for(buttonName in iconOverrideHash){iconClassesCopy[buttonName]=this.applyIconOverridePrefix(iconOverrideHash[buttonName]);}
this.iconClasses=iconClassesCopy;}
else if(iconOverrideHash===false){this.iconClasses={};}};Theme.prototype.applyIconOverridePrefix=function(className){var prefix=this.iconOverridePrefix;if(prefix&&className.indexOf(prefix)!==0){className=prefix+className;}
return className;};Theme.prototype.getClass=function(key){return this.classes[key]||'';};Theme.prototype.getIconClass=function(buttonName){var className=this.iconClasses[buttonName];if(className){return this.baseIconClass+' '+className;}
return '';};Theme.prototype.getCustomButtonIconClass=function(customButtonProps){var className;if(this.iconOverrideCustomButtonOption){className=customButtonProps[this.iconOverrideCustomButtonOption];if(className){return this.baseIconClass+' '+this.applyIconOverridePrefix(className);}}
return '';};return Theme;}());Theme.prototype.classes={};Theme.prototype.iconClasses={};Theme.prototype.baseIconClass='';Theme.prototype.iconOverridePrefix='';var guid=0;var ComponentContext=(function(){function ComponentContext(calendar,theme,dateEnv,options,view){this.calendar=calendar;this.theme=theme;this.dateEnv=dateEnv;this.options=options;this.view=view;this.isRtl=options.dir==='rtl';this.eventOrderSpecs=parseFieldSpecs(options.eventOrder);this.nextDayThreshold=createDuration(options.nextDayThreshold);}
ComponentContext.prototype.extend=function(options,view){return new ComponentContext(this.calendar,this.theme,this.dateEnv,options||this.options,view||this.view);};return ComponentContext;}());var Component=(function(){function Component(){this.everRendered=false;this.uid=String(guid++);}
Component.addEqualityFuncs=function(newFuncs){this.prototype.equalityFuncs=__assign({},this.prototype.equalityFuncs,newFuncs);};Component.prototype.receiveProps=function(props,context){this.receiveContext(context);var _a=recycleProps(this.props||{},props,this.equalityFuncs),anyChanges=_a.anyChanges,comboProps=_a.comboProps;this.props=comboProps;if(anyChanges){if(this.everRendered){this.beforeUpdate();}
this.render(comboProps,context);if(this.everRendered){this.afterUpdate();}}
this.everRendered=true;};Component.prototype.receiveContext=function(context){var oldContext=this.context;this.context=context;if(!oldContext){this.firstContext(context);}};Component.prototype.render=function(props,context){};Component.prototype.firstContext=function(context){};Component.prototype.beforeUpdate=function(){};Component.prototype.afterUpdate=function(){};Component.prototype.destroy=function(){};return Component;}());Component.prototype.equalityFuncs={};function recycleProps(oldProps,newProps,equalityFuncs){var comboProps={};var anyChanges=false;for(var key in newProps){if(key in oldProps&&(oldProps[key]===newProps[key]||(equalityFuncs[key]&&equalityFuncs[key](oldProps[key],newProps[key])))){comboProps[key]=oldProps[key];}
else{comboProps[key]=newProps[key];anyChanges=true;}}
for(var key in oldProps){if(!(key in newProps)){anyChanges=true;break;}}
return{anyChanges:anyChanges,comboProps:comboProps};}
var DateComponent=(function(_super){__extends(DateComponent,_super);function DateComponent(el){var _this=_super.call(this)||this;_this.el=el;return _this;}
DateComponent.prototype.destroy=function(){_super.prototype.destroy.call(this);removeElement(this.el);};DateComponent.prototype.buildPositionCaches=function(){};DateComponent.prototype.queryHit=function(positionLeft,positionTop,elWidth,elHeight){return null;};DateComponent.prototype.isInteractionValid=function(interaction){var calendar=this.context.calendar;var dateProfile=this.props.dateProfile;var instances=interaction.mutatedEvents.instances;if(dateProfile){for(var instanceId in instances){if(!rangeContainsRange(dateProfile.validRange,instances[instanceId].range)){return false;}}}
return isInteractionValid(interaction,calendar);};DateComponent.prototype.isDateSelectionValid=function(selection){var calendar=this.context.calendar;var dateProfile=this.props.dateProfile;if(dateProfile&&!rangeContainsRange(dateProfile.validRange,selection.range)){return false;}
return isDateSelectionValid(selection,calendar);};DateComponent.prototype.isValidSegDownEl=function(el){return!this.props.eventDrag&&!this.props.eventResize&&!elementClosest(el,'.fc-mirror')&&(this.isPopover()||!this.isInPopover(el));};DateComponent.prototype.isValidDateDownEl=function(el){var segEl=elementClosest(el,this.fgSegSelector);return(!segEl||segEl.classList.contains('fc-mirror'))&&!elementClosest(el,'.fc-more')&&!elementClosest(el,'a[data-goto]')&&!this.isInPopover(el);};DateComponent.prototype.isPopover=function(){return this.el.classList.contains('fc-popover');};DateComponent.prototype.isInPopover=function(el){return Boolean(elementClosest(el,'.fc-popover'));};return DateComponent;}(Component));DateComponent.prototype.fgSegSelector='.fc-event-container > *';DateComponent.prototype.bgSegSelector='.fc-bgevent:not(.fc-nonbusiness)';var uid$1=0;function createPlugin(input){return{id:String(uid$1++),deps:input.deps||[],reducers:input.reducers||[],eventDefParsers:input.eventDefParsers||[],isDraggableTransformers:input.isDraggableTransformers||[],eventDragMutationMassagers:input.eventDragMutationMassagers||[],eventDefMutationAppliers:input.eventDefMutationAppliers||[],dateSelectionTransformers:input.dateSelectionTransformers||[],datePointTransforms:input.datePointTransforms||[],dateSpanTransforms:input.dateSpanTransforms||[],views:input.views||{},viewPropsTransformers:input.viewPropsTransformers||[],isPropsValid:input.isPropsValid||null,externalDefTransforms:input.externalDefTransforms||[],eventResizeJoinTransforms:input.eventResizeJoinTransforms||[],viewContainerModifiers:input.viewContainerModifiers||[],eventDropTransformers:input.eventDropTransformers||[],componentInteractions:input.componentInteractions||[],calendarInteractions:input.calendarInteractions||[],themeClasses:input.themeClasses||{},eventSourceDefs:input.eventSourceDefs||[],cmdFormatter:input.cmdFormatter,recurringTypes:input.recurringTypes||[],namedTimeZonedImpl:input.namedTimeZonedImpl,defaultView:input.defaultView||'',elementDraggingImpl:input.elementDraggingImpl,optionChangeHandlers:input.optionChangeHandlers||{}};}
var PluginSystem=(function(){function PluginSystem(){this.hooks={reducers:[],eventDefParsers:[],isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],eventResizeJoinTransforms:[],viewContainerModifiers:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,defaultView:'',elementDraggingImpl:null,optionChangeHandlers:{}};this.addedHash={};}
PluginSystem.prototype.add=function(plugin){if(!this.addedHash[plugin.id]){this.addedHash[plugin.id]=true;for(var _i=0,_a=plugin.deps;_i<_a.length;_i++){var dep=_a[_i];this.add(dep);}
this.hooks=combineHooks(this.hooks,plugin);}};return PluginSystem;}());function combineHooks(hooks0,hooks1){return{reducers:hooks0.reducers.concat(hooks1.reducers),eventDefParsers:hooks0.eventDefParsers.concat(hooks1.eventDefParsers),isDraggableTransformers:hooks0.isDraggableTransformers.concat(hooks1.isDraggableTransformers),eventDragMutationMassagers:hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),eventDefMutationAppliers:hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),dateSelectionTransformers:hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),datePointTransforms:hooks0.datePointTransforms.concat(hooks1.datePointTransforms),dateSpanTransforms:hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),views:__assign({},hooks0.views,hooks1.views),viewPropsTransformers:hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),isPropsValid:hooks1.isPropsValid||hooks0.isPropsValid,externalDefTransforms:hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),eventResizeJoinTransforms:hooks0.eventResizeJoinTransforms.concat(hooks1.eventResizeJoinTransforms),viewContainerModifiers:hooks0.viewContainerModifiers.concat(hooks1.viewContainerModifiers),eventDropTransformers:hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),calendarInteractions:hooks0.calendarInteractions.concat(hooks1.calendarInteractions),componentInteractions:hooks0.componentInteractions.concat(hooks1.componentInteractions),themeClasses:__assign({},hooks0.themeClasses,hooks1.themeClasses),eventSourceDefs:hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),cmdFormatter:hooks1.cmdFormatter||hooks0.cmdFormatter,recurringTypes:hooks0.recurringTypes.concat(hooks1.recurringTypes),namedTimeZonedImpl:hooks1.namedTimeZonedImpl||hooks0.namedTimeZonedImpl,defaultView:hooks0.defaultView||hooks1.defaultView,elementDraggingImpl:hooks0.elementDraggingImpl||hooks1.elementDraggingImpl,optionChangeHandlers:__assign({},hooks0.optionChangeHandlers,hooks1.optionChangeHandlers)};}
var eventSourceDef={ignoreRange:true,parseMeta:function(raw){if(Array.isArray(raw)){return raw;}
else if(Array.isArray(raw.events)){return raw.events;}
return null;},fetch:function(arg,success){success({rawEvents:arg.eventSource.meta});}};var ArrayEventSourcePlugin=createPlugin({eventSourceDefs:[eventSourceDef]});var eventSourceDef$1={parseMeta:function(raw){if(typeof raw==='function'){return raw;}
else if(typeof raw.events==='function'){return raw.events;}
return null;},fetch:function(arg,success,failure){var dateEnv=arg.calendar.dateEnv;var func=arg.eventSource.meta;unpromisify(func.bind(null,{start:dateEnv.toDate(arg.range.start),end:dateEnv.toDate(arg.range.end),startStr:dateEnv.formatIso(arg.range.start),endStr:dateEnv.formatIso(arg.range.end),timeZone:dateEnv.timeZone}),function(rawEvents){success({rawEvents:rawEvents});},failure);}};var FuncEventSourcePlugin=createPlugin({eventSourceDefs:[eventSourceDef$1]});function requestJson(method,url,params,successCallback,failureCallback){method=method.toUpperCase();var body=null;if(method==='GET'){url=injectQueryStringParams(url,params);}
else{body=encodeParams(params);}
var xhr=new XMLHttpRequest();xhr.open(method,url,true);if(method!=='GET'){xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');}
xhr.onload=function(){if(xhr.status>=200&&xhr.status<400){try{var res=JSON.parse(xhr.responseText);successCallback(res,xhr);}
catch(err){failureCallback('Failure parsing JSON',xhr);}}
else{failureCallback('Request failed',xhr);}};xhr.onerror=function(){failureCallback('Request failed',xhr);};xhr.send(body);}
function injectQueryStringParams(url,params){return url+
(url.indexOf('?')===-1?'?':'&')+
encodeParams(params);}
function encodeParams(params){var parts=[];for(var key in params){parts.push(encodeURIComponent(key)+'='+encodeURIComponent(params[key]));}
return parts.join('&');}
var eventSourceDef$2={parseMeta:function(raw){if(typeof raw==='string'){raw={url:raw};}
else if(!raw||typeof raw!=='object'||!raw.url){return null;}
return{url:raw.url,method:(raw.method||'GET').toUpperCase(),extraParams:raw.extraParams,startParam:raw.startParam,endParam:raw.endParam,timeZoneParam:raw.timeZoneParam};},fetch:function(arg,success,failure){var meta=arg.eventSource.meta;var requestParams=buildRequestParams(meta,arg.range,arg.calendar);requestJson(meta.method,meta.url,requestParams,function(rawEvents,xhr){success({rawEvents:rawEvents,xhr:xhr});},function(errorMessage,xhr){failure({message:errorMessage,xhr:xhr});});}};var JsonFeedEventSourcePlugin=createPlugin({eventSourceDefs:[eventSourceDef$2]});function buildRequestParams(meta,range,calendar){var dateEnv=calendar.dateEnv;var startParam;var endParam;var timeZoneParam;var customRequestParams;var params={};startParam=meta.startParam;if(startParam==null){startParam=calendar.opt('startParam');}
endParam=meta.endParam;if(endParam==null){endParam=calendar.opt('endParam');}
timeZoneParam=meta.timeZoneParam;if(timeZoneParam==null){timeZoneParam=calendar.opt('timeZoneParam');}
if(typeof meta.extraParams==='function'){customRequestParams=meta.extraParams();}
else{customRequestParams=meta.extraParams||{};}
__assign(params,customRequestParams);params[startParam]=dateEnv.formatIso(range.start);params[endParam]=dateEnv.formatIso(range.end);if(dateEnv.timeZone!=='local'){params[timeZoneParam]=dateEnv.timeZone;}
return params;}
var recurring={parse:function(rawEvent,leftoverProps,dateEnv){var createMarker=dateEnv.createMarker.bind(dateEnv);var processors={daysOfWeek:null,startTime:createDuration,endTime:createDuration,startRecur:createMarker,endRecur:createMarker};var props=refineProps(rawEvent,processors,{},leftoverProps);var anyValid=false;for(var propName in props){if(props[propName]!=null){anyValid=true;break;}}
if(anyValid){var duration=null;if('duration'in leftoverProps){duration=createDuration(leftoverProps.duration);delete leftoverProps.duration;}
if(!duration&&props.startTime&&props.endTime){duration=subtractDurations(props.endTime,props.startTime);}
return{allDayGuess:Boolean(!props.startTime&&!props.endTime),duration:duration,typeData:props};}
return null;},expand:function(typeData,framingRange,dateEnv){var clippedFramingRange=intersectRanges(framingRange,{start:typeData.startRecur,end:typeData.endRecur});if(clippedFramingRange){return expandRanges(typeData.daysOfWeek,typeData.startTime,clippedFramingRange,dateEnv);}
else{return[];}}};var SimpleRecurrencePlugin=createPlugin({recurringTypes:[recurring]});function expandRanges(daysOfWeek,startTime,framingRange,dateEnv){var dowHash=daysOfWeek?arrayToHash(daysOfWeek):null;var dayMarker=startOfDay(framingRange.start);var endMarker=framingRange.end;var instanceStarts=[];while(dayMarker<endMarker){var instanceStart=void 0;if(!dowHash||dowHash[dayMarker.getUTCDay()]){if(startTime){instanceStart=dateEnv.add(dayMarker,startTime);}
else{instanceStart=dayMarker;}
instanceStarts.push(instanceStart);}
dayMarker=addDays(dayMarker,1);}
return instanceStarts;}
var DefaultOptionChangeHandlers=createPlugin({optionChangeHandlers:{events:function(events,calendar,deepEqual){handleEventSources([events],calendar,deepEqual);},eventSources:handleEventSources,plugins:handlePlugins}});function handleEventSources(inputs,calendar,deepEqual){var unfoundSources=hashValuesToArray(calendar.state.eventSources);var newInputs=[];for(var _i=0,inputs_1=inputs;_i<inputs_1.length;_i++){var input=inputs_1[_i];var inputFound=false;for(var i=0;i<unfoundSources.length;i++){if(deepEqual(unfoundSources[i]._raw,input)){unfoundSources.splice(i,1);inputFound=true;break;}}
if(!inputFound){newInputs.push(input);}}
for(var _a=0,unfoundSources_1=unfoundSources;_a<unfoundSources_1.length;_a++){var unfoundSource=unfoundSources_1[_a];calendar.dispatch({type:'REMOVE_EVENT_SOURCE',sourceId:unfoundSource.sourceId});}
for(var _b=0,newInputs_1=newInputs;_b<newInputs_1.length;_b++){var newInput=newInputs_1[_b];calendar.addEventSource(newInput);}}
function handlePlugins(inputs,calendar){calendar.addPluginInputs(inputs);}
var config={};var globalDefaults={defaultRangeSeparator:' - ',titleRangeSeparator:' \u2013 ',defaultTimedEventDuration:'01:00:00',defaultAllDayEventDuration:{day:1},forceEventDuration:false,nextDayThreshold:'00:00:00',columnHeader:true,defaultView:'',aspectRatio:1.35,header:{left:'title',center:'',right:'today prev,next'},weekends:true,weekNumbers:false,weekNumberCalculation:'local',editable:false,scrollTime:'06:00:00',minTime:'00:00:00',maxTime:'24:00:00',showNonCurrentDates:true,lazyFetching:true,startParam:'start',endParam:'end',timeZoneParam:'timeZone',timeZone:'local',locales:[],locale:'',timeGridEventMinHeight:0,themeSystem:'standard',dragRevertDuration:500,dragScroll:true,allDayMaintainDuration:false,unselectAuto:true,dropAccept:'*',eventOrder:'start,-duration,allDay,title',eventLimit:false,eventLimitClick:'popover',dayPopoverFormat:{month:'long',day:'numeric',year:'numeric'},handleWindowResize:true,windowResizeDelay:100,longPressDelay:1000,eventDragMinDistance:5};var rtlDefaults={header:{left:'next,prev today',center:'',right:'title'},buttonIcons:{prev:'fc-icon-chevron-right',next:'fc-icon-chevron-left',prevYear:'fc-icon-chevrons-right',nextYear:'fc-icon-chevrons-left'}};var complexOptions=['header','footer','buttonText','buttonIcons'];function mergeOptions(optionObjs){return mergeProps(optionObjs,complexOptions);}
var INTERNAL_PLUGINS=[ArrayEventSourcePlugin,FuncEventSourcePlugin,JsonFeedEventSourcePlugin,SimpleRecurrencePlugin,DefaultOptionChangeHandlers];function refinePluginDefs(pluginInputs){var plugins=[];for(var _i=0,pluginInputs_1=pluginInputs;_i<pluginInputs_1.length;_i++){var pluginInput=pluginInputs_1[_i];if(typeof pluginInput==='string'){var globalName='FullCalendar'+capitaliseFirstLetter(pluginInput);if(!window[globalName]){console.warn('Plugin file not loaded for '+pluginInput);}
else{plugins.push(window[globalName].default);}}
else{plugins.push(pluginInput);}}
return INTERNAL_PLUGINS.concat(plugins);}
var RAW_EN_LOCALE={code:'en',week:{dow:0,doy:4},dir:'ltr',buttonText:{prev:'prev',next:'next',prevYear:'prev year',nextYear:'next year',year:'year',today:'today',month:'month',week:'week',day:'day',list:'list'},weekLabel:'W',allDayText:'all-day',eventLimitText:'more',noEventsMessage:'No events to display'};function parseRawLocales(explicitRawLocales){var defaultCode=explicitRawLocales.length>0?explicitRawLocales[0].code:'en';var globalArray=window['FullCalendarLocalesAll']||[];var globalObject=window['FullCalendarLocales']||{};var allRawLocales=globalArray.concat(hashValuesToArray(globalObject),explicitRawLocales);var rawLocaleMap={en:RAW_EN_LOCALE};for(var _i=0,allRawLocales_1=allRawLocales;_i<allRawLocales_1.length;_i++){var rawLocale=allRawLocales_1[_i];rawLocaleMap[rawLocale.code]=rawLocale;}
return{map:rawLocaleMap,defaultCode:defaultCode};}
function buildLocale(inputSingular,available){if(typeof inputSingular==='object'&&!Array.isArray(inputSingular)){return parseLocale(inputSingular.code,[inputSingular.code],inputSingular);}
else{return queryLocale(inputSingular,available);}}
function queryLocale(codeArg,available){var codes=[].concat(codeArg||[]);var raw=queryRawLocale(codes,available)||RAW_EN_LOCALE;return parseLocale(codeArg,codes,raw);}
function queryRawLocale(codes,available){for(var i=0;i<codes.length;i++){var parts=codes[i].toLocaleLowerCase().split('-');for(var j=parts.length;j>0;j--){var simpleId=parts.slice(0,j).join('-');if(available[simpleId]){return available[simpleId];}}}
return null;}
function parseLocale(codeArg,codes,raw){var merged=mergeProps([RAW_EN_LOCALE,raw],['buttonText']);delete merged.code;var week=merged.week;delete merged.week;return{codeArg:codeArg,codes:codes,week:week,simpleNumberFormat:new Intl.NumberFormat(codeArg),options:merged};}
var OptionsManager=(function(){function OptionsManager(overrides){this.overrides=__assign({},overrides);this.dynamicOverrides={};this.compute();}
OptionsManager.prototype.mutate=function(updates,removals,isDynamic){if(!Object.keys(updates).length&&!removals.length){return;}
var overrideHash=isDynamic?this.dynamicOverrides:this.overrides;__assign(overrideHash,updates);for(var _i=0,removals_1=removals;_i<removals_1.length;_i++){var propName=removals_1[_i];delete overrideHash[propName];}
this.compute();};OptionsManager.prototype.compute=function(){var locales=firstDefined(this.dynamicOverrides.locales,this.overrides.locales,globalDefaults.locales);var locale=firstDefined(this.dynamicOverrides.locale,this.overrides.locale,globalDefaults.locale);var available=parseRawLocales(locales);var localeDefaults=buildLocale(locale||available.defaultCode,available.map).options;var dir=firstDefined(this.dynamicOverrides.dir,this.overrides.dir,localeDefaults.dir);var dirDefaults=dir==='rtl'?rtlDefaults:{};this.dirDefaults=dirDefaults;this.localeDefaults=localeDefaults;this.computed=mergeOptions([globalDefaults,dirDefaults,localeDefaults,this.overrides,this.dynamicOverrides]);};return OptionsManager;}());var calendarSystemClassMap={};function registerCalendarSystem(name,theClass){calendarSystemClassMap[name]=theClass;}
function createCalendarSystem(name){return new calendarSystemClassMap[name]();}
var GregorianCalendarSystem=(function(){function GregorianCalendarSystem(){}
GregorianCalendarSystem.prototype.getMarkerYear=function(d){return d.getUTCFullYear();};GregorianCalendarSystem.prototype.getMarkerMonth=function(d){return d.getUTCMonth();};GregorianCalendarSystem.prototype.getMarkerDay=function(d){return d.getUTCDate();};GregorianCalendarSystem.prototype.arrayToMarker=function(arr){return arrayToUtcDate(arr);};GregorianCalendarSystem.prototype.markerToArray=function(marker){return dateToUtcArray(marker);};return GregorianCalendarSystem;}());registerCalendarSystem('gregory',GregorianCalendarSystem);var ISO_RE=/^\s*(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function parse(str){var m=ISO_RE.exec(str);if(m){var marker=new Date(Date.UTC(Number(m[1]),m[3]?Number(m[3])-1:0,Number(m[5]||1),Number(m[7]||0),Number(m[8]||0),Number(m[10]||0),m[12]?Number('0.'+m[12])*1000:0));if(isValidDate(marker)){var timeZoneOffset=null;if(m[13]){timeZoneOffset=(m[15]==='-'?-1:1)*(Number(m[16]||0)*60+
Number(m[18]||0));}
return{marker:marker,isTimeUnspecified:!m[6],timeZoneOffset:timeZoneOffset};}}
return null;}
var DateEnv=(function(){function DateEnv(settings){var timeZone=this.timeZone=settings.timeZone;var isNamedTimeZone=timeZone!=='local'&&timeZone!=='UTC';if(settings.namedTimeZoneImpl&&isNamedTimeZone){this.namedTimeZoneImpl=new settings.namedTimeZoneImpl(timeZone);}
this.canComputeOffset=Boolean(!isNamedTimeZone||this.namedTimeZoneImpl);this.calendarSystem=createCalendarSystem(settings.calendarSystem);this.locale=settings.locale;this.weekDow=settings.locale.week.dow;this.weekDoy=settings.locale.week.doy;if(settings.weekNumberCalculation==='ISO'){this.weekDow=1;this.weekDoy=4;}
if(typeof settings.firstDay==='number'){this.weekDow=settings.firstDay;}
if(typeof settings.weekNumberCalculation==='function'){this.weekNumberFunc=settings.weekNumberCalculation;}
this.weekLabel=settings.weekLabel!=null?settings.weekLabel:settings.locale.options.weekLabel;this.cmdFormatter=settings.cmdFormatter;}
DateEnv.prototype.createMarker=function(input){var meta=this.createMarkerMeta(input);if(meta===null){return null;}
return meta.marker;};DateEnv.prototype.createNowMarker=function(){if(this.canComputeOffset){return this.timestampToMarker(new Date().valueOf());}
else{return arrayToUtcDate(dateToLocalArray(new Date()));}};DateEnv.prototype.createMarkerMeta=function(input){if(typeof input==='string'){return this.parse(input);}
var marker=null;if(typeof input==='number'){marker=this.timestampToMarker(input);}
else if(input instanceof Date){input=input.valueOf();if(!isNaN(input)){marker=this.timestampToMarker(input);}}
else if(Array.isArray(input)){marker=arrayToUtcDate(input);}
if(marker===null||!isValidDate(marker)){return null;}
return{marker:marker,isTimeUnspecified:false,forcedTzo:null};};DateEnv.prototype.parse=function(s){var parts=parse(s);if(parts===null){return null;}
var marker=parts.marker;var forcedTzo=null;if(parts.timeZoneOffset!==null){if(this.canComputeOffset){marker=this.timestampToMarker(marker.valueOf()-parts.timeZoneOffset*60*1000);}
else{forcedTzo=parts.timeZoneOffset;}}
return{marker:marker,isTimeUnspecified:parts.isTimeUnspecified,forcedTzo:forcedTzo};};DateEnv.prototype.getYear=function(marker){return this.calendarSystem.getMarkerYear(marker);};DateEnv.prototype.getMonth=function(marker){return this.calendarSystem.getMarkerMonth(marker);};DateEnv.prototype.add=function(marker,dur){var a=this.calendarSystem.markerToArray(marker);a[0]+=dur.years;a[1]+=dur.months;a[2]+=dur.days;a[6]+=dur.milliseconds;return this.calendarSystem.arrayToMarker(a);};DateEnv.prototype.subtract=function(marker,dur){var a=this.calendarSystem.markerToArray(marker);a[0]-=dur.years;a[1]-=dur.months;a[2]-=dur.days;a[6]-=dur.milliseconds;return this.calendarSystem.arrayToMarker(a);};DateEnv.prototype.addYears=function(marker,n){var a=this.calendarSystem.markerToArray(marker);a[0]+=n;return this.calendarSystem.arrayToMarker(a);};DateEnv.prototype.addMonths=function(marker,n){var a=this.calendarSystem.markerToArray(marker);a[1]+=n;return this.calendarSystem.arrayToMarker(a);};DateEnv.prototype.diffWholeYears=function(m0,m1){var calendarSystem=this.calendarSystem;if(timeAsMs(m0)===timeAsMs(m1)&&calendarSystem.getMarkerDay(m0)===calendarSystem.getMarkerDay(m1)&&calendarSystem.getMarkerMonth(m0)===calendarSystem.getMarkerMonth(m1)){return calendarSystem.getMarkerYear(m1)-calendarSystem.getMarkerYear(m0);}
return null;};DateEnv.prototype.diffWholeMonths=function(m0,m1){var calendarSystem=this.calendarSystem;if(timeAsMs(m0)===timeAsMs(m1)&&calendarSystem.getMarkerDay(m0)===calendarSystem.getMarkerDay(m1)){return(calendarSystem.getMarkerMonth(m1)-calendarSystem.getMarkerMonth(m0))+
(calendarSystem.getMarkerYear(m1)-calendarSystem.getMarkerYear(m0))*12;}
return null;};DateEnv.prototype.greatestWholeUnit=function(m0,m1){var n=this.diffWholeYears(m0,m1);if(n!==null){return{unit:'year',value:n};}
n=this.diffWholeMonths(m0,m1);if(n!==null){return{unit:'month',value:n};}
n=diffWholeWeeks(m0,m1);if(n!==null){return{unit:'week',value:n};}
n=diffWholeDays(m0,m1);if(n!==null){return{unit:'day',value:n};}
n=diffHours(m0,m1);if(isInt(n)){return{unit:'hour',value:n};}
n=diffMinutes(m0,m1);if(isInt(n)){return{unit:'minute',value:n};}
n=diffSeconds(m0,m1);if(isInt(n)){return{unit:'second',value:n};}
return{unit:'millisecond',value:m1.valueOf()-m0.valueOf()};};DateEnv.prototype.countDurationsBetween=function(m0,m1,d){var diff;if(d.years){diff=this.diffWholeYears(m0,m1);if(diff!==null){return diff/asRoughYears(d);}}
if(d.months){diff=this.diffWholeMonths(m0,m1);if(diff!==null){return diff/asRoughMonths(d);}}
if(d.days){diff=diffWholeDays(m0,m1);if(diff!==null){return diff/asRoughDays(d);}}
return(m1.valueOf()-m0.valueOf())/asRoughMs(d);};DateEnv.prototype.startOf=function(m,unit){if(unit==='year'){return this.startOfYear(m);}
else if(unit==='month'){return this.startOfMonth(m);}
else if(unit==='week'){return this.startOfWeek(m);}
else if(unit==='day'){return startOfDay(m);}
else if(unit==='hour'){return startOfHour(m);}
else if(unit==='minute'){return startOfMinute(m);}
else if(unit==='second'){return startOfSecond(m);}};DateEnv.prototype.startOfYear=function(m){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(m)]);};DateEnv.prototype.startOfMonth=function(m){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(m),this.calendarSystem.getMarkerMonth(m)]);};DateEnv.prototype.startOfWeek=function(m){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(m),this.calendarSystem.getMarkerMonth(m),m.getUTCDate()-((m.getUTCDay()-this.weekDow+7)%7)]);};DateEnv.prototype.computeWeekNumber=function(marker){if(this.weekNumberFunc){return this.weekNumberFunc(this.toDate(marker));}
else{return weekOfYear(marker,this.weekDow,this.weekDoy);}};DateEnv.prototype.format=function(marker,formatter,dateOptions){if(dateOptions===void 0){dateOptions={};}
return formatter.format({marker:marker,timeZoneOffset:dateOptions.forcedTzo!=null?dateOptions.forcedTzo:this.offsetForMarker(marker)},this);};DateEnv.prototype.formatRange=function(start,end,formatter,dateOptions){if(dateOptions===void 0){dateOptions={};}
if(dateOptions.isEndExclusive){end=addMs(end,-1);}
return formatter.formatRange({marker:start,timeZoneOffset:dateOptions.forcedStartTzo!=null?dateOptions.forcedStartTzo:this.offsetForMarker(start)},{marker:end,timeZoneOffset:dateOptions.forcedEndTzo!=null?dateOptions.forcedEndTzo:this.offsetForMarker(end)},this);};DateEnv.prototype.formatIso=function(marker,extraOptions){if(extraOptions===void 0){extraOptions={};}
var timeZoneOffset=null;if(!extraOptions.omitTimeZoneOffset){if(extraOptions.forcedTzo!=null){timeZoneOffset=extraOptions.forcedTzo;}
else{timeZoneOffset=this.offsetForMarker(marker);}}
return buildIsoString(marker,timeZoneOffset,extraOptions.omitTime);};DateEnv.prototype.timestampToMarker=function(ms){if(this.timeZone==='local'){return arrayToUtcDate(dateToLocalArray(new Date(ms)));}
else if(this.timeZone==='UTC'||!this.namedTimeZoneImpl){return new Date(ms);}
else{return arrayToUtcDate(this.namedTimeZoneImpl.timestampToArray(ms));}};DateEnv.prototype.offsetForMarker=function(m){if(this.timeZone==='local'){return-arrayToLocalDate(dateToUtcArray(m)).getTimezoneOffset();}
else if(this.timeZone==='UTC'){return 0;}
else if(this.namedTimeZoneImpl){return this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m));}
return null;};DateEnv.prototype.toDate=function(m,forcedTzo){if(this.timeZone==='local'){return arrayToLocalDate(dateToUtcArray(m));}
else if(this.timeZone==='UTC'){return new Date(m.valueOf());}
else if(!this.namedTimeZoneImpl){return new Date(m.valueOf()-(forcedTzo||0));}
else{return new Date(m.valueOf()-
this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m))*1000*60);}};return DateEnv;}());var SIMPLE_SOURCE_PROPS={id:String,allDayDefault:Boolean,eventDataTransform:Function,success:Function,failure:Function};var uid$2=0;function doesSourceNeedRange(eventSource,calendar){var defs=calendar.pluginSystem.hooks.eventSourceDefs;return!defs[eventSource.sourceDefId].ignoreRange;}
function parseEventSource(raw,calendar){var defs=calendar.pluginSystem.hooks.eventSourceDefs;for(var i=defs.length-1;i>=0;i--){var def=defs[i];var meta=def.parseMeta(raw);if(meta){var res=parseEventSourceProps(typeof raw==='object'?raw:{},meta,i,calendar);res._raw=raw;return res;}}
return null;}
function parseEventSourceProps(raw,meta,sourceDefId,calendar){var leftovers0={};var props=refineProps(raw,SIMPLE_SOURCE_PROPS,{},leftovers0);var leftovers1={};var ui=processUnscopedUiProps(leftovers0,calendar,leftovers1);props.isFetching=false;props.latestFetchId='';props.fetchRange=null;props.publicId=String(raw.id||'');props.sourceId=String(uid$2++);props.sourceDefId=sourceDefId;props.meta=meta;props.ui=ui;props.extendedProps=leftovers1;return props;}
function reduceEventSources(eventSources,action,dateProfile,calendar){switch(action.type){case 'ADD_EVENT_SOURCES':return addSources(eventSources,action.sources,dateProfile?dateProfile.activeRange:null,calendar);case 'REMOVE_EVENT_SOURCE':return removeSource(eventSources,action.sourceId);case 'PREV':case 'NEXT':case 'SET_DATE':case 'SET_VIEW_TYPE':if(dateProfile){return fetchDirtySources(eventSources,dateProfile.activeRange,calendar);}
else{return eventSources;}
case 'FETCH_EVENT_SOURCES':case 'CHANGE_TIMEZONE':return fetchSourcesByIds(eventSources,action.sourceIds?arrayToHash(action.sourceIds):excludeStaticSources(eventSources,calendar),dateProfile?dateProfile.activeRange:null,calendar);case 'RECEIVE_EVENTS':case 'RECEIVE_EVENT_ERROR':return receiveResponse(eventSources,action.sourceId,action.fetchId,action.fetchRange);case 'REMOVE_ALL_EVENT_SOURCES':return{};default:return eventSources;}}
var uid$3=0;function addSources(eventSourceHash,sources,fetchRange,calendar){var hash={};for(var _i=0,sources_1=sources;_i<sources_1.length;_i++){var source=sources_1[_i];hash[source.sourceId]=source;}
if(fetchRange){hash=fetchDirtySources(hash,fetchRange,calendar);}
return __assign({},eventSourceHash,hash);}
function removeSource(eventSourceHash,sourceId){return filterHash(eventSourceHash,function(eventSource){return eventSource.sourceId!==sourceId;});}
function fetchDirtySources(sourceHash,fetchRange,calendar){return fetchSourcesByIds(sourceHash,filterHash(sourceHash,function(eventSource){return isSourceDirty(eventSource,fetchRange,calendar);}),fetchRange,calendar);}
function isSourceDirty(eventSource,fetchRange,calendar){if(!doesSourceNeedRange(eventSource,calendar)){return!eventSource.latestFetchId;}
else{return!calendar.opt('lazyFetching')||!eventSource.fetchRange||eventSource.isFetching||fetchRange.start<eventSource.fetchRange.start||fetchRange.end>eventSource.fetchRange.end;}}
function fetchSourcesByIds(prevSources,sourceIdHash,fetchRange,calendar){var nextSources={};for(var sourceId in prevSources){var source=prevSources[sourceId];if(sourceIdHash[sourceId]){nextSources[sourceId]=fetchSource(source,fetchRange,calendar);}
else{nextSources[sourceId]=source;}}
return nextSources;}
function fetchSource(eventSource,fetchRange,calendar){var sourceDef=calendar.pluginSystem.hooks.eventSourceDefs[eventSource.sourceDefId];var fetchId=String(uid$3++);sourceDef.fetch({eventSource:eventSource,calendar:calendar,range:fetchRange},function(res){var rawEvents=res.rawEvents;var calSuccess=calendar.opt('eventSourceSuccess');var calSuccessRes;var sourceSuccessRes;if(eventSource.success){sourceSuccessRes=eventSource.success(rawEvents,res.xhr);}
if(calSuccess){calSuccessRes=calSuccess(rawEvents,res.xhr);}
rawEvents=sourceSuccessRes||calSuccessRes||rawEvents;calendar.dispatch({type:'RECEIVE_EVENTS',sourceId:eventSource.sourceId,fetchId:fetchId,fetchRange:fetchRange,rawEvents:rawEvents});},function(error){var callFailure=calendar.opt('eventSourceFailure');console.warn(error.message,error);if(eventSource.failure){eventSource.failure(error);}
if(callFailure){callFailure(error);}
calendar.dispatch({type:'RECEIVE_EVENT_ERROR',sourceId:eventSource.sourceId,fetchId:fetchId,fetchRange:fetchRange,error:error});});return __assign({},eventSource,{isFetching:true,latestFetchId:fetchId});}
function receiveResponse(sourceHash,sourceId,fetchId,fetchRange){var _a;var eventSource=sourceHash[sourceId];if(eventSource&&fetchId===eventSource.latestFetchId){return __assign({},sourceHash,(_a={},_a[sourceId]=__assign({},eventSource,{isFetching:false,fetchRange:fetchRange}),_a));}
return sourceHash;}
function excludeStaticSources(eventSources,calendar){return filterHash(eventSources,function(eventSource){return doesSourceNeedRange(eventSource,calendar);});}
var DateProfileGenerator=(function(){function DateProfileGenerator(viewSpec,calendar){this.viewSpec=viewSpec;this.options=viewSpec.options;this.dateEnv=calendar.dateEnv;this.calendar=calendar;this.initHiddenDays();}
DateProfileGenerator.prototype.buildPrev=function(currentDateProfile,currentDate){var dateEnv=this.dateEnv;var prevDate=dateEnv.subtract(dateEnv.startOf(currentDate,currentDateProfile.currentRangeUnit),currentDateProfile.dateIncrement);return this.build(prevDate,-1);};DateProfileGenerator.prototype.buildNext=function(currentDateProfile,currentDate){var dateEnv=this.dateEnv;var nextDate=dateEnv.add(dateEnv.startOf(currentDate,currentDateProfile.currentRangeUnit),currentDateProfile.dateIncrement);return this.build(nextDate,1);};DateProfileGenerator.prototype.build=function(currentDate,direction,forceToValid){if(forceToValid===void 0){forceToValid=false;}
var validRange;var minTime=null;var maxTime=null;var currentInfo;var isRangeAllDay;var renderRange;var activeRange;var isValid;validRange=this.buildValidRange();validRange=this.trimHiddenDays(validRange);if(forceToValid){currentDate=constrainMarkerToRange(currentDate,validRange);}
currentInfo=this.buildCurrentRangeInfo(currentDate,direction);isRangeAllDay=/^(year|month|week|day)$/.test(currentInfo.unit);renderRange=this.buildRenderRange(this.trimHiddenDays(currentInfo.range),currentInfo.unit,isRangeAllDay);renderRange=this.trimHiddenDays(renderRange);activeRange=renderRange;if(!this.options.showNonCurrentDates){activeRange=intersectRanges(activeRange,currentInfo.range);}
minTime=createDuration(this.options.minTime);maxTime=createDuration(this.options.maxTime);activeRange=this.adjustActiveRange(activeRange,minTime,maxTime);activeRange=intersectRanges(activeRange,validRange);isValid=rangesIntersect(currentInfo.range,validRange);return{validRange:validRange,currentRange:currentInfo.range,currentRangeUnit:currentInfo.unit,isRangeAllDay:isRangeAllDay,activeRange:activeRange,renderRange:renderRange,minTime:minTime,maxTime:maxTime,isValid:isValid,dateIncrement:this.buildDateIncrement(currentInfo.duration)};};DateProfileGenerator.prototype.buildValidRange=function(){return this.getRangeOption('validRange',this.calendar.getNow())||{start:null,end:null};};DateProfileGenerator.prototype.buildCurrentRangeInfo=function(date,direction){var _a=this,viewSpec=_a.viewSpec,dateEnv=_a.dateEnv;var duration=null;var unit=null;var range=null;var dayCount;if(viewSpec.duration){duration=viewSpec.duration;unit=viewSpec.durationUnit;range=this.buildRangeFromDuration(date,direction,duration,unit);}
else if((dayCount=this.options.dayCount)){unit='day';range=this.buildRangeFromDayCount(date,direction,dayCount);}
else if((range=this.buildCustomVisibleRange(date))){unit=dateEnv.greatestWholeUnit(range.start,range.end).unit;}
else{duration=this.getFallbackDuration();unit=greatestDurationDenominator(duration).unit;range=this.buildRangeFromDuration(date,direction,duration,unit);}
return{duration:duration,unit:unit,range:range};};DateProfileGenerator.prototype.getFallbackDuration=function(){return createDuration({day:1});};DateProfileGenerator.prototype.adjustActiveRange=function(range,minTime,maxTime){var dateEnv=this.dateEnv;var start=range.start;var end=range.end;if(this.viewSpec.class.prototype.usesMinMaxTime){if(asRoughDays(minTime)<0){start=startOfDay(start);start=dateEnv.add(start,minTime);}
if(asRoughDays(maxTime)>1){end=startOfDay(end);end=addDays(end,-1);end=dateEnv.add(end,maxTime);}}
return{start:start,end:end};};DateProfileGenerator.prototype.buildRangeFromDuration=function(date,direction,duration,unit){var dateEnv=this.dateEnv;var alignment=this.options.dateAlignment;var dateIncrementInput;var dateIncrementDuration;var start;var end;var res;if(!alignment){dateIncrementInput=this.options.dateIncrement;if(dateIncrementInput){dateIncrementDuration=createDuration(dateIncrementInput);if(asRoughMs(dateIncrementDuration)<asRoughMs(duration)){alignment=greatestDurationDenominator(dateIncrementDuration,!getWeeksFromInput(dateIncrementInput)).unit;}
else{alignment=unit;}}
else{alignment=unit;}}
if(asRoughDays(duration)<=1){if(this.isHiddenDay(start)){start=this.skipHiddenDays(start,direction);start=startOfDay(start);}}
function computeRes(){start=dateEnv.startOf(date,alignment);end=dateEnv.add(start,duration);res={start:start,end:end};}
computeRes();if(!this.trimHiddenDays(res)){date=this.skipHiddenDays(date,direction);computeRes();}
return res;};DateProfileGenerator.prototype.buildRangeFromDayCount=function(date,direction,dayCount){var dateEnv=this.dateEnv;var customAlignment=this.options.dateAlignment;var runningCount=0;var start=date;var end;if(customAlignment){start=dateEnv.startOf(start,customAlignment);}
start=startOfDay(start);start=this.skipHiddenDays(start,direction);end=start;do{end=addDays(end,1);if(!this.isHiddenDay(end)){runningCount++;}}while(runningCount<dayCount);return{start:start,end:end};};DateProfileGenerator.prototype.buildCustomVisibleRange=function(date){var dateEnv=this.dateEnv;var visibleRange=this.getRangeOption('visibleRange',dateEnv.toDate(date));if(visibleRange&&(visibleRange.start==null||visibleRange.end==null)){return null;}
return visibleRange;};DateProfileGenerator.prototype.buildRenderRange=function(currentRange,currentRangeUnit,isRangeAllDay){return currentRange;};DateProfileGenerator.prototype.buildDateIncrement=function(fallback){var dateIncrementInput=this.options.dateIncrement;var customAlignment;if(dateIncrementInput){return createDuration(dateIncrementInput);}
else if((customAlignment=this.options.dateAlignment)){return createDuration(1,customAlignment);}
else if(fallback){return fallback;}
else{return createDuration({days:1});}};DateProfileGenerator.prototype.getRangeOption=function(name){var otherArgs=[];for(var _i=1;_i<arguments.length;_i++){otherArgs[_i-1]=arguments[_i];}
var val=this.options[name];if(typeof val==='function'){val=val.apply(null,otherArgs);}
if(val){val=parseRange(val,this.dateEnv);}
if(val){val=computeVisibleDayRange(val);}
return val;};DateProfileGenerator.prototype.initHiddenDays=function(){var hiddenDays=this.options.hiddenDays||[];var isHiddenDayHash=[];var dayCnt=0;var i;if(this.options.weekends===false){hiddenDays.push(0,6);}
for(i=0;i<7;i++){if(!(isHiddenDayHash[i]=hiddenDays.indexOf(i)!==-1)){dayCnt++;}}
if(!dayCnt){throw new Error('invalid hiddenDays');}
this.isHiddenDayHash=isHiddenDayHash;};DateProfileGenerator.prototype.trimHiddenDays=function(range){var start=range.start;var end=range.end;if(start){start=this.skipHiddenDays(start);}
if(end){end=this.skipHiddenDays(end,-1,true);}
if(start==null||end==null||start<end){return{start:start,end:end};}
return null;};DateProfileGenerator.prototype.isHiddenDay=function(day){if(day instanceof Date){day=day.getUTCDay();}
return this.isHiddenDayHash[day];};DateProfileGenerator.prototype.skipHiddenDays=function(date,inc,isExclusive){if(inc===void 0){inc=1;}
if(isExclusive===void 0){isExclusive=false;}
while(this.isHiddenDayHash[(date.getUTCDay()+(isExclusive?inc:0)+7)%7]){date=addDays(date,inc);}
return date;};return DateProfileGenerator;}());function isDateProfilesEqual(p0,p1){return rangesEqual(p0.validRange,p1.validRange)&&rangesEqual(p0.activeRange,p1.activeRange)&&rangesEqual(p0.renderRange,p1.renderRange)&&durationsEqual(p0.minTime,p1.minTime)&&durationsEqual(p0.maxTime,p1.maxTime);}
function reduce(state,action,calendar){var viewType=reduceViewType(state.viewType,action);var dateProfile=reduceDateProfile(state.dateProfile,action,state.currentDate,viewType,calendar);var eventSources=reduceEventSources(state.eventSources,action,dateProfile,calendar);var nextState=__assign({},state,{viewType:viewType,dateProfile:dateProfile,currentDate:reduceCurrentDate(state.currentDate,action,dateProfile),eventSources:eventSources,eventStore:reduceEventStore(state.eventStore,action,eventSources,dateProfile,calendar),dateSelection:reduceDateSelection(state.dateSelection,action,calendar),eventSelection:reduceSelectedEvent(state.eventSelection,action),eventDrag:reduceEventDrag(state.eventDrag,action,eventSources,calendar),eventResize:reduceEventResize(state.eventResize,action,eventSources,calendar),eventSourceLoadingLevel:computeLoadingLevel(eventSources),loadingLevel:computeLoadingLevel(eventSources)});for(var _i=0,_a=calendar.pluginSystem.hooks.reducers;_i<_a.length;_i++){var reducerFunc=_a[_i];nextState=reducerFunc(nextState,action,calendar);}
return nextState;}
function reduceViewType(currentViewType,action){switch(action.type){case 'SET_VIEW_TYPE':return action.viewType;default:return currentViewType;}}
function reduceDateProfile(currentDateProfile,action,currentDate,viewType,calendar){var newDateProfile;switch(action.type){case 'PREV':newDateProfile=calendar.dateProfileGenerators[viewType].buildPrev(currentDateProfile,currentDate);break;case 'NEXT':newDateProfile=calendar.dateProfileGenerators[viewType].buildNext(currentDateProfile,currentDate);break;case 'SET_DATE':if(!currentDateProfile.activeRange||!rangeContainsMarker(currentDateProfile.currentRange,action.dateMarker)){newDateProfile=calendar.dateProfileGenerators[viewType].build(action.dateMarker,undefined,true);}
break;case 'SET_VIEW_TYPE':var generator=calendar.dateProfileGenerators[viewType];if(!generator){throw new Error(viewType?'The FullCalendar view "'+viewType+'" does not exist. Make sure your plugins are loaded correctly.':'No available FullCalendar view plugins.');}
newDateProfile=generator.build(action.dateMarker||currentDate,undefined,true);break;}
if(newDateProfile&&newDateProfile.isValid&&!(currentDateProfile&&isDateProfilesEqual(currentDateProfile,newDateProfile))){return newDateProfile;}
else{return currentDateProfile;}}
function reduceCurrentDate(currentDate,action,dateProfile){switch(action.type){case 'PREV':case 'NEXT':if(!rangeContainsMarker(dateProfile.currentRange,currentDate)){return dateProfile.currentRange.start;}
else{return currentDate;}
case 'SET_DATE':case 'SET_VIEW_TYPE':var newDate=action.dateMarker||currentDate;if(dateProfile.activeRange&&!rangeContainsMarker(dateProfile.activeRange,newDate)){return dateProfile.currentRange.start;}
else{return newDate;}
default:return currentDate;}}
function reduceDateSelection(currentSelection,action,calendar){switch(action.type){case 'SELECT_DATES':return action.selection;case 'UNSELECT_DATES':return null;default:return currentSelection;}}
function reduceSelectedEvent(currentInstanceId,action){switch(action.type){case 'SELECT_EVENT':return action.eventInstanceId;case 'UNSELECT_EVENT':return '';default:return currentInstanceId;}}
function reduceEventDrag(currentDrag,action,sources,calendar){switch(action.type){case 'SET_EVENT_DRAG':var newDrag=action.state;return{affectedEvents:newDrag.affectedEvents,mutatedEvents:newDrag.mutatedEvents,isEvent:newDrag.isEvent,origSeg:newDrag.origSeg};case 'UNSET_EVENT_DRAG':return null;default:return currentDrag;}}
function reduceEventResize(currentResize,action,sources,calendar){switch(action.type){case 'SET_EVENT_RESIZE':var newResize=action.state;return{affectedEvents:newResize.affectedEvents,mutatedEvents:newResize.mutatedEvents,isEvent:newResize.isEvent,origSeg:newResize.origSeg};case 'UNSET_EVENT_RESIZE':return null;default:return currentResize;}}
function computeLoadingLevel(eventSources){var cnt=0;for(var sourceId in eventSources){if(eventSources[sourceId].isFetching){cnt++;}}
return cnt;}
var STANDARD_PROPS={start:null,end:null,allDay:Boolean};function parseDateSpan(raw,dateEnv,defaultDuration){var span=parseOpenDateSpan(raw,dateEnv);var range=span.range;if(!range.start){return null;}
if(!range.end){if(defaultDuration==null){return null;}
else{range.end=dateEnv.add(range.start,defaultDuration);}}
return span;}
function parseOpenDateSpan(raw,dateEnv){var leftovers={};var standardProps=refineProps(raw,STANDARD_PROPS,{},leftovers);var startMeta=standardProps.start?dateEnv.createMarkerMeta(standardProps.start):null;var endMeta=standardProps.end?dateEnv.createMarkerMeta(standardProps.end):null;var allDay=standardProps.allDay;if(allDay==null){allDay=(startMeta&&startMeta.isTimeUnspecified)&&(!endMeta||endMeta.isTimeUnspecified);}
leftovers.range={start:startMeta?startMeta.marker:null,end:endMeta?endMeta.marker:null};leftovers.allDay=allDay;return leftovers;}
function isDateSpansEqual(span0,span1){return rangesEqual(span0.range,span1.range)&&span0.allDay===span1.allDay&&isSpanPropsEqual(span0,span1);}
function isSpanPropsEqual(span0,span1){for(var propName in span1){if(propName!=='range'&&propName!=='allDay'){if(span0[propName]!==span1[propName]){return false;}}}
for(var propName in span0){if(!(propName in span1)){return false;}}
return true;}
function buildDateSpanApi(span,dateEnv){return{start:dateEnv.toDate(span.range.start),end:dateEnv.toDate(span.range.end),startStr:dateEnv.formatIso(span.range.start,{omitTime:span.allDay}),endStr:dateEnv.formatIso(span.range.end,{omitTime:span.allDay}),allDay:span.allDay};}
function buildDatePointApi(span,dateEnv){return{date:dateEnv.toDate(span.range.start),dateStr:dateEnv.formatIso(span.range.start,{omitTime:span.allDay}),allDay:span.allDay};}
function fabricateEventRange(dateSpan,eventUiBases,calendar){var def=parseEventDef({editable:false},'',dateSpan.allDay,true,calendar);return{def:def,ui:compileEventUi(def,eventUiBases),instance:createEventInstance(def.defId,dateSpan.range),range:dateSpan.range,isStart:true,isEnd:true};}
function compileViewDefs(defaultConfigs,overrideConfigs){var hash={};var viewType;for(viewType in defaultConfigs){ensureViewDef(viewType,hash,defaultConfigs,overrideConfigs);}
for(viewType in overrideConfigs){ensureViewDef(viewType,hash,defaultConfigs,overrideConfigs);}
return hash;}
function ensureViewDef(viewType,hash,defaultConfigs,overrideConfigs){if(hash[viewType]){return hash[viewType];}
var viewDef=buildViewDef(viewType,hash,defaultConfigs,overrideConfigs);if(viewDef){hash[viewType]=viewDef;}
return viewDef;}
function buildViewDef(viewType,hash,defaultConfigs,overrideConfigs){var defaultConfig=defaultConfigs[viewType];var overrideConfig=overrideConfigs[viewType];var queryProp=function(name){return(defaultConfig&&defaultConfig[name]!==null)?defaultConfig[name]:((overrideConfig&&overrideConfig[name]!==null)?overrideConfig[name]:null);};var theClass=queryProp('class');var superType=queryProp('superType');if(!superType&&theClass){superType=findViewNameBySubclass(theClass,overrideConfigs)||findViewNameBySubclass(theClass,defaultConfigs);}
var superDef=null;if(superType){if(superType===viewType){throw new Error('Can\'t have a custom view type that references itself');}
superDef=ensureViewDef(superType,hash,defaultConfigs,overrideConfigs);}
if(!theClass&&superDef){theClass=superDef.class;}
if(!theClass){return null;}
return{type:viewType,class:theClass,defaults:__assign({},(superDef?superDef.defaults:{}),(defaultConfig?defaultConfig.options:{})),overrides:__assign({},(superDef?superDef.overrides:{}),(overrideConfig?overrideConfig.options:{}))};}
function findViewNameBySubclass(viewSubclass,configs){var superProto=Object.getPrototypeOf(viewSubclass.prototype);for(var viewType in configs){var parsed=configs[viewType];if(parsed.class&&parsed.class.prototype===superProto){return viewType;}}
return '';}
function parseViewConfigs(inputs){return mapHash(inputs,parseViewConfig);}
var VIEW_DEF_PROPS={type:String,class:null};function parseViewConfig(input){if(typeof input==='function'){input={class:input};}
var options={};var props=refineProps(input,VIEW_DEF_PROPS,{},options);return{superType:props.type,class:props.class,options:options};}
function buildViewSpecs(defaultInputs,optionsManager){var defaultConfigs=parseViewConfigs(defaultInputs);var overrideConfigs=parseViewConfigs(optionsManager.overrides.views);var viewDefs=compileViewDefs(defaultConfigs,overrideConfigs);return mapHash(viewDefs,function(viewDef){return buildViewSpec(viewDef,overrideConfigs,optionsManager);});}
function buildViewSpec(viewDef,overrideConfigs,optionsManager){var durationInput=viewDef.overrides.duration||viewDef.defaults.duration||optionsManager.dynamicOverrides.duration||optionsManager.overrides.duration;var duration=null;var durationUnit='';var singleUnit='';var singleUnitOverrides={};if(durationInput){duration=createDuration(durationInput);if(duration){var denom=greatestDurationDenominator(duration,!getWeeksFromInput(durationInput));durationUnit=denom.unit;if(denom.value===1){singleUnit=durationUnit;singleUnitOverrides=overrideConfigs[durationUnit]?overrideConfigs[durationUnit].options:{};}}}
var queryButtonText=function(options){var buttonTextMap=options.buttonText||{};var buttonTextKey=viewDef.defaults.buttonTextKey;if(buttonTextKey!=null&&buttonTextMap[buttonTextKey]!=null){return buttonTextMap[buttonTextKey];}
if(buttonTextMap[viewDef.type]!=null){return buttonTextMap[viewDef.type];}
if(buttonTextMap[singleUnit]!=null){return buttonTextMap[singleUnit];}};return{type:viewDef.type,class:viewDef.class,duration:duration,durationUnit:durationUnit,singleUnit:singleUnit,options:__assign({},globalDefaults,viewDef.defaults,optionsManager.dirDefaults,optionsManager.localeDefaults,optionsManager.overrides,singleUnitOverrides,viewDef.overrides,optionsManager.dynamicOverrides),buttonTextOverride:queryButtonText(optionsManager.dynamicOverrides)||queryButtonText(optionsManager.overrides)||viewDef.overrides.buttonText,buttonTextDefault:queryButtonText(optionsManager.localeDefaults)||queryButtonText(optionsManager.dirDefaults)||viewDef.defaults.buttonText||queryButtonText(globalDefaults)||viewDef.type};}
var Toolbar=(function(_super){__extends(Toolbar,_super);function Toolbar(extraClassName){var _this=_super.call(this)||this;_this._renderLayout=memoizeRendering(_this.renderLayout,_this.unrenderLayout);_this._updateTitle=memoizeRendering(_this.updateTitle,null,[_this._renderLayout]);_this._updateActiveButton=memoizeRendering(_this.updateActiveButton,null,[_this._renderLayout]);_this._updateToday=memoizeRendering(_this.updateToday,null,[_this._renderLayout]);_this._updatePrev=memoizeRendering(_this.updatePrev,null,[_this._renderLayout]);_this._updateNext=memoizeRendering(_this.updateNext,null,[_this._renderLayout]);_this.el=createElement('div',{className:'fc-toolbar '+extraClassName});return _this;}
Toolbar.prototype.destroy=function(){_super.prototype.destroy.call(this);this._renderLayout.unrender();removeElement(this.el);};Toolbar.prototype.render=function(props){this._renderLayout(props.layout);this._updateTitle(props.title);this._updateActiveButton(props.activeButton);this._updateToday(props.isTodayEnabled);this._updatePrev(props.isPrevEnabled);this._updateNext(props.isNextEnabled);};Toolbar.prototype.renderLayout=function(layout){var el=this.el;this.viewsWithButtons=[];appendToElement(el,this.renderSection('left',layout.left));appendToElement(el,this.renderSection('center',layout.center));appendToElement(el,this.renderSection('right',layout.right));};Toolbar.prototype.unrenderLayout=function(){this.el.innerHTML='';};Toolbar.prototype.renderSection=function(position,buttonStr){var _this=this;var _a=this.context,theme=_a.theme,calendar=_a.calendar;var optionsManager=calendar.optionsManager;var viewSpecs=calendar.viewSpecs;var sectionEl=createElement('div',{className:'fc-'+position});var calendarCustomButtons=optionsManager.computed.customButtons||{};var calendarButtonTextOverrides=optionsManager.overrides.buttonText||{};var calendarButtonText=optionsManager.computed.buttonText||{};if(buttonStr){buttonStr.split(' ').forEach(function(buttonGroupStr,i){var groupChildren=[];var isOnlyButtons=true;var groupEl;buttonGroupStr.split(',').forEach(function(buttonName,j){var customButtonProps;var viewSpec;var buttonClick;var buttonIcon;var buttonText;var buttonInnerHtml;var buttonClasses;var buttonEl;var buttonAriaAttr;if(buttonName==='title'){groupChildren.push(htmlToElement('<h2>&nbsp;</h2>'));isOnlyButtons=false;}
else{if((customButtonProps=calendarCustomButtons[buttonName])){buttonClick=function(ev){if(customButtonProps.click){customButtonProps.click.call(buttonEl,ev);}};(buttonIcon=theme.getCustomButtonIconClass(customButtonProps))||(buttonIcon=theme.getIconClass(buttonName))||(buttonText=customButtonProps.text);}
else if((viewSpec=viewSpecs[buttonName])){_this.viewsWithButtons.push(buttonName);buttonClick=function(){calendar.changeView(buttonName);};(buttonText=viewSpec.buttonTextOverride)||(buttonIcon=theme.getIconClass(buttonName))||(buttonText=viewSpec.buttonTextDefault);}
else if(calendar[buttonName]){buttonClick=function(){calendar[buttonName]();};(buttonText=calendarButtonTextOverrides[buttonName])||(buttonIcon=theme.getIconClass(buttonName))||(buttonText=calendarButtonText[buttonName]);}
if(buttonClick){buttonClasses=['fc-'+buttonName+'-button',theme.getClass('button')];if(buttonText){buttonInnerHtml=htmlEscape(buttonText);buttonAriaAttr='';}
else if(buttonIcon){buttonInnerHtml="<span class='"+buttonIcon+"'></span>";buttonAriaAttr=' aria-label="'+buttonName+'"';}
buttonEl=htmlToElement('<button type="button" class="'+buttonClasses.join(' ')+'"'+
buttonAriaAttr+
'>'+buttonInnerHtml+'</button>');buttonEl.addEventListener('click',buttonClick);groupChildren.push(buttonEl);}}});if(groupChildren.length>1){groupEl=document.createElement('div');var buttonGroupClassName=theme.getClass('buttonGroup');if(isOnlyButtons&&buttonGroupClassName){groupEl.classList.add(buttonGroupClassName);}
appendToElement(groupEl,groupChildren);sectionEl.appendChild(groupEl);}
else{appendToElement(sectionEl,groupChildren);}});}
return sectionEl;};Toolbar.prototype.updateToday=function(isTodayEnabled){this.toggleButtonEnabled('today',isTodayEnabled);};Toolbar.prototype.updatePrev=function(isPrevEnabled){this.toggleButtonEnabled('prev',isPrevEnabled);};Toolbar.prototype.updateNext=function(isNextEnabled){this.toggleButtonEnabled('next',isNextEnabled);};Toolbar.prototype.updateTitle=function(text){findElements(this.el,'h2').forEach(function(titleEl){titleEl.innerText=text;});};Toolbar.prototype.updateActiveButton=function(buttonName){var theme=this.context.theme;var className=theme.getClass('buttonActive');findElements(this.el,'button').forEach(function(buttonEl){if(buttonName&&buttonEl.classList.contains('fc-'+buttonName+'-button')){buttonEl.classList.add(className);}
else{buttonEl.classList.remove(className);}});};Toolbar.prototype.toggleButtonEnabled=function(buttonName,bool){findElements(this.el,'.fc-'+buttonName+'-button').forEach(function(buttonEl){buttonEl.disabled=!bool;});};return Toolbar;}(Component));var CalendarComponent=(function(_super){__extends(CalendarComponent,_super);function CalendarComponent(el){var _this=_super.call(this)||this;_this.elClassNames=[];_this.renderSkeleton=memoizeRendering(_this._renderSkeleton,_this._unrenderSkeleton);_this.renderToolbars=memoizeRendering(_this._renderToolbars,_this._unrenderToolbars,[_this.renderSkeleton]);_this.buildComponentContext=memoize(buildComponentContext);_this.buildViewPropTransformers=memoize(buildViewPropTransformers);_this.el=el;_this.computeTitle=memoize(computeTitle);_this.parseBusinessHours=memoize(function(input){return parseBusinessHours(input,_this.context.calendar);});return _this;}
CalendarComponent.prototype.render=function(props,context){this.freezeHeight();var title=this.computeTitle(props.dateProfile,props.viewSpec.options);this.renderSkeleton(context);this.renderToolbars(props.viewSpec,props.dateProfile,props.currentDate,title);this.renderView(props,title);this.updateSize();this.thawHeight();};CalendarComponent.prototype.destroy=function(){if(this.header){this.header.destroy();}
if(this.footer){this.footer.destroy();}
this.renderSkeleton.unrender();_super.prototype.destroy.call(this);};CalendarComponent.prototype._renderSkeleton=function(context){this.updateElClassNames(context);prependToElement(this.el,this.contentEl=createElement('div',{className:'fc-view-container'}));var calendar=context.calendar;for(var _i=0,_a=calendar.pluginSystem.hooks.viewContainerModifiers;_i<_a.length;_i++){var modifyViewContainer=_a[_i];modifyViewContainer(this.contentEl,calendar);}};CalendarComponent.prototype._unrenderSkeleton=function(){if(this.view){this.savedScroll=this.view.queryScroll();this.view.destroy();this.view=null;}
removeElement(this.contentEl);this.removeElClassNames();};CalendarComponent.prototype.removeElClassNames=function(){var classList=this.el.classList;for(var _i=0,_a=this.elClassNames;_i<_a.length;_i++){var className=_a[_i];classList.remove(className);}
this.elClassNames=[];};CalendarComponent.prototype.updateElClassNames=function(context){this.removeElClassNames();var theme=context.theme,options=context.options;this.elClassNames=['fc','fc-'+options.dir,theme.getClass('widget')];var classList=this.el.classList;for(var _i=0,_a=this.elClassNames;_i<_a.length;_i++){var className=_a[_i];classList.add(className);}};CalendarComponent.prototype._renderToolbars=function(viewSpec,dateProfile,currentDate,title){var _a=this,context=_a.context,header=_a.header,footer=_a.footer;var options=context.options,calendar=context.calendar;var headerLayout=options.header;var footerLayout=options.footer;var dateProfileGenerator=this.props.dateProfileGenerator;var now=calendar.getNow();var todayInfo=dateProfileGenerator.build(now);var prevInfo=dateProfileGenerator.buildPrev(dateProfile,currentDate);var nextInfo=dateProfileGenerator.buildNext(dateProfile,currentDate);var toolbarProps={title:title,activeButton:viewSpec.type,isTodayEnabled:todayInfo.isValid&&!rangeContainsMarker(dateProfile.currentRange,now),isPrevEnabled:prevInfo.isValid,isNextEnabled:nextInfo.isValid};if(headerLayout){if(!header){header=this.header=new Toolbar('fc-header-toolbar');prependToElement(this.el,header.el);}
header.receiveProps(__assign({layout:headerLayout},toolbarProps),context);}
else if(header){header.destroy();header=this.header=null;}
if(footerLayout){if(!footer){footer=this.footer=new Toolbar('fc-footer-toolbar');appendToElement(this.el,footer.el);}
footer.receiveProps(__assign({layout:footerLayout},toolbarProps),context);}
else if(footer){footer.destroy();footer=this.footer=null;}};CalendarComponent.prototype._unrenderToolbars=function(){if(this.header){this.header.destroy();this.header=null;}
if(this.footer){this.footer.destroy();this.footer=null;}};CalendarComponent.prototype.renderView=function(props,title){var view=this.view;var _a=this.context,calendar=_a.calendar,options=_a.options;var viewSpec=props.viewSpec,dateProfileGenerator=props.dateProfileGenerator;if(!view||view.viewSpec!==viewSpec){if(view){view.destroy();}
view=this.view=new viewSpec['class'](viewSpec,this.contentEl);if(this.savedScroll){view.addScroll(this.savedScroll,true);this.savedScroll=null;}}
view.title=title;var viewProps={dateProfileGenerator:dateProfileGenerator,dateProfile:props.dateProfile,businessHours:this.parseBusinessHours(viewSpec.options.businessHours),eventStore:props.eventStore,eventUiBases:props.eventUiBases,dateSelection:props.dateSelection,eventSelection:props.eventSelection,eventDrag:props.eventDrag,eventResize:props.eventResize};var transformers=this.buildViewPropTransformers(calendar.pluginSystem.hooks.viewPropsTransformers);for(var _i=0,transformers_1=transformers;_i<transformers_1.length;_i++){var transformer=transformers_1[_i];__assign(viewProps,transformer.transform(viewProps,viewSpec,props,options));}
view.receiveProps(viewProps,this.buildComponentContext(this.context,viewSpec,view));};CalendarComponent.prototype.updateSize=function(isResize){if(isResize===void 0){isResize=false;}
var view=this.view;if(!view){return;}
if(isResize||this.isHeightAuto==null){this.computeHeightVars();}
view.updateSize(isResize,this.viewHeight,this.isHeightAuto);view.updateNowIndicator();view.popScroll(isResize);};CalendarComponent.prototype.computeHeightVars=function(){var calendar=this.context.calendar;var heightInput=calendar.opt('height');var contentHeightInput=calendar.opt('contentHeight');this.isHeightAuto=heightInput==='auto'||contentHeightInput==='auto';if(typeof contentHeightInput==='number'){this.viewHeight=contentHeightInput;}
else if(typeof contentHeightInput==='function'){this.viewHeight=contentHeightInput();}
else if(typeof heightInput==='number'){this.viewHeight=heightInput-this.queryToolbarsHeight();}
else if(typeof heightInput==='function'){this.viewHeight=heightInput()-this.queryToolbarsHeight();}
else if(heightInput==='parent'){var parentEl=this.el.parentNode;this.viewHeight=parentEl.getBoundingClientRect().height-this.queryToolbarsHeight();}
else{this.viewHeight=Math.round(this.contentEl.getBoundingClientRect().width/Math.max(calendar.opt('aspectRatio'),.5));}};CalendarComponent.prototype.queryToolbarsHeight=function(){var height=0;if(this.header){height+=computeHeightAndMargins(this.header.el);}
if(this.footer){height+=computeHeightAndMargins(this.footer.el);}
return height;};CalendarComponent.prototype.freezeHeight=function(){applyStyle(this.el,{height:this.el.getBoundingClientRect().height,overflow:'hidden'});};CalendarComponent.prototype.thawHeight=function(){applyStyle(this.el,{height:'',overflow:''});};return CalendarComponent;}(Component));function computeTitle(dateProfile,viewOptions){var range;if(/^(year|month)$/.test(dateProfile.currentRangeUnit)){range=dateProfile.currentRange;}
else{range=dateProfile.activeRange;}
return this.context.dateEnv.formatRange(range.start,range.end,createFormatter(viewOptions.titleFormat||computeTitleFormat(dateProfile),viewOptions.titleRangeSeparator),{isEndExclusive:dateProfile.isRangeAllDay});}
function computeTitleFormat(dateProfile){var currentRangeUnit=dateProfile.currentRangeUnit;if(currentRangeUnit==='year'){return{year:'numeric'};}
else if(currentRangeUnit==='month'){return{year:'numeric',month:'long'};}
else{var days=diffWholeDays(dateProfile.currentRange.start,dateProfile.currentRange.end);if(days!==null&&days>1){return{year:'numeric',month:'short',day:'numeric'};}
else{return{year:'numeric',month:'long',day:'numeric'};}}}
function buildComponentContext(context,viewSpec,view){return context.extend(viewSpec.options,view);}
function buildViewPropTransformers(theClasses){return theClasses.map(function(theClass){return new theClass();});}
var Interaction=(function(){function Interaction(settings){this.component=settings.component;}
Interaction.prototype.destroy=function(){};return Interaction;}());function parseInteractionSettings(component,input){return{component:component,el:input.el,useEventCenter:input.useEventCenter!=null?input.useEventCenter:true};}
function interactionSettingsToStore(settings){var _a;return _a={},_a[settings.component.uid]=settings,_a;}
var interactionSettingsStore={};var EventClicking=(function(_super){__extends(EventClicking,_super);function EventClicking(settings){var _this=_super.call(this,settings)||this;_this.handleSegClick=function(ev,segEl){var component=_this.component;var _a=component.context,calendar=_a.calendar,view=_a.view;var seg=getElSeg(segEl);if(seg&&component.isValidSegDownEl(ev.target)){var hasUrlContainer=elementClosest(ev.target,'.fc-has-url');var url=hasUrlContainer?hasUrlContainer.querySelector('a[href]').href:'';calendar.publiclyTrigger('eventClick',[{el:segEl,event:new EventApi(component.context.calendar,seg.eventRange.def,seg.eventRange.instance),jsEvent:ev,view:view}]);if(url&&!ev.defaultPrevented){window.location.href=url;}}};var component=settings.component;_this.destroy=listenBySelector(component.el,'click',component.fgSegSelector+','+component.bgSegSelector,_this.handleSegClick);return _this;}
return EventClicking;}(Interaction));var EventHovering=(function(_super){__extends(EventHovering,_super);function EventHovering(settings){var _this=_super.call(this,settings)||this;_this.handleEventElRemove=function(el){if(el===_this.currentSegEl){_this.handleSegLeave(null,_this.currentSegEl);}};_this.handleSegEnter=function(ev,segEl){if(getElSeg(segEl)){segEl.classList.add('fc-allow-mouse-resize');_this.currentSegEl=segEl;_this.triggerEvent('eventMouseEnter',ev,segEl);}};_this.handleSegLeave=function(ev,segEl){if(_this.currentSegEl){segEl.classList.remove('fc-allow-mouse-resize');_this.currentSegEl=null;_this.triggerEvent('eventMouseLeave',ev,segEl);}};var component=settings.component;_this.removeHoverListeners=listenToHoverBySelector(component.el,component.fgSegSelector+','+component.bgSegSelector,_this.handleSegEnter,_this.handleSegLeave);component.context.calendar.on('eventElRemove',_this.handleEventElRemove);return _this;}
EventHovering.prototype.destroy=function(){this.removeHoverListeners();this.component.context.calendar.off('eventElRemove',this.handleEventElRemove);};EventHovering.prototype.triggerEvent=function(publicEvName,ev,segEl){var component=this.component;var _a=component.context,calendar=_a.calendar,view=_a.view;var seg=getElSeg(segEl);if(!ev||component.isValidSegDownEl(ev.target)){calendar.publiclyTrigger(publicEvName,[{el:segEl,event:new EventApi(calendar,seg.eventRange.def,seg.eventRange.instance),jsEvent:ev,view:view}]);}};return EventHovering;}(Interaction));var StandardTheme=(function(_super){__extends(StandardTheme,_super);function StandardTheme(){return _super!==null&&_super.apply(this,arguments)||this;}
return StandardTheme;}(Theme));StandardTheme.prototype.classes={widget:'fc-unthemed',widgetHeader:'fc-widget-header',widgetContent:'fc-widget-content',buttonGroup:'fc-button-group',button:'fc-button fc-button-primary',buttonActive:'fc-button-active',popoverHeader:'fc-widget-header',popoverContent:'fc-widget-content',headerRow:'fc-widget-header',dayRow:'fc-widget-content',listView:'fc-widget-content'};StandardTheme.prototype.baseIconClass='fc-icon';StandardTheme.prototype.iconClasses={close:'fc-icon-x',prev:'fc-icon-chevron-left',next:'fc-icon-chevron-right',prevYear:'fc-icon-chevrons-left',nextYear:'fc-icon-chevrons-right'};StandardTheme.prototype.iconOverrideOption='buttonIcons';StandardTheme.prototype.iconOverrideCustomButtonOption='icon';StandardTheme.prototype.iconOverridePrefix='fc-icon-';var Calendar=(function(){function Calendar(el,overrides){var _this=this;this.buildComponentContext=memoize(buildComponentContext$1);this.parseRawLocales=memoize(parseRawLocales);this.buildLocale=memoize(buildLocale);this.buildDateEnv=memoize(buildDateEnv);this.buildTheme=memoize(buildTheme);this.buildEventUiSingleBase=memoize(this._buildEventUiSingleBase);this.buildSelectionConfig=memoize(this._buildSelectionConfig);this.buildEventUiBySource=memoizeOutput(buildEventUiBySource,isPropsEqual);this.buildEventUiBases=memoize(buildEventUiBases);this.interactionsStore={};this.actionQueue=[];this.isReducing=false;this.needsRerender=false;this.isRendering=false;this.renderingPauseDepth=0;this.buildDelayedRerender=memoize(buildDelayedRerender);this.afterSizingTriggers={};this.isViewUpdated=false;this.isDatesUpdated=false;this.isEventsUpdated=false;this.el=el;this.optionsManager=new OptionsManager(overrides||{});this.pluginSystem=new PluginSystem();this.addPluginInputs(this.optionsManager.computed.plugins||[]);this.handleOptions(this.optionsManager.computed);this.publiclyTrigger('_init');this.hydrate();this.calendarInteractions=this.pluginSystem.hooks.calendarInteractions.map(function(calendarInteractionClass){return new calendarInteractionClass(_this);});}
Calendar.prototype.addPluginInputs=function(pluginInputs){var pluginDefs=refinePluginDefs(pluginInputs);for(var _i=0,pluginDefs_1=pluginDefs;_i<pluginDefs_1.length;_i++){var pluginDef=pluginDefs_1[_i];this.pluginSystem.add(pluginDef);}};Object.defineProperty(Calendar.prototype,"view",{get:function(){return this.component?this.component.view:null;},enumerable:true,configurable:true});Calendar.prototype.render=function(){if(!this.component){this.component=new CalendarComponent(this.el);this.renderableEventStore=createEmptyEventStore();this.bindHandlers();this.executeRender();}
else{this.requestRerender();}};Calendar.prototype.destroy=function(){if(this.component){this.unbindHandlers();this.component.destroy();this.component=null;for(var _i=0,_a=this.calendarInteractions;_i<_a.length;_i++){var interaction=_a[_i];interaction.destroy();}
this.publiclyTrigger('_destroyed');}};Calendar.prototype.bindHandlers=function(){var _this=this;this.removeNavLinkListener=listenBySelector(this.el,'click','a[data-goto]',function(ev,anchorEl){var gotoOptions=anchorEl.getAttribute('data-goto');gotoOptions=gotoOptions?JSON.parse(gotoOptions):{};var dateEnv=_this.dateEnv;var dateMarker=dateEnv.createMarker(gotoOptions.date);var viewType=gotoOptions.type;var customAction=_this.viewOpt('navLink'+capitaliseFirstLetter(viewType)+'Click');if(typeof customAction==='function'){customAction(dateEnv.toDate(dateMarker),ev);}
else{if(typeof customAction==='string'){viewType=customAction;}
_this.zoomTo(dateMarker,viewType);}});if(this.opt('handleWindowResize')){window.addEventListener('resize',this.windowResizeProxy=debounce(this.windowResize.bind(this),this.opt('windowResizeDelay')));}};Calendar.prototype.unbindHandlers=function(){this.removeNavLinkListener();if(this.windowResizeProxy){window.removeEventListener('resize',this.windowResizeProxy);this.windowResizeProxy=null;}};Calendar.prototype.hydrate=function(){var _this=this;this.state=this.buildInitialState();var rawSources=this.opt('eventSources')||[];var singleRawSource=this.opt('events');var sources=[];if(singleRawSource){rawSources.unshift(singleRawSource);}
for(var _i=0,rawSources_1=rawSources;_i<rawSources_1.length;_i++){var rawSource=rawSources_1[_i];var source=parseEventSource(rawSource,this);if(source){sources.push(source);}}
this.batchRendering(function(){_this.dispatch({type:'INIT'});_this.dispatch({type:'ADD_EVENT_SOURCES',sources:sources});_this.dispatch({type:'SET_VIEW_TYPE',viewType:_this.opt('defaultView')||_this.pluginSystem.hooks.defaultView});});};Calendar.prototype.buildInitialState=function(){return{viewType:null,loadingLevel:0,eventSourceLoadingLevel:0,currentDate:this.getInitialDate(),dateProfile:null,eventSources:{},eventStore:createEmptyEventStore(),dateSelection:null,eventSelection:'',eventDrag:null,eventResize:null};};Calendar.prototype.dispatch=function(action){this.actionQueue.push(action);if(!this.isReducing){this.isReducing=true;var oldState=this.state;while(this.actionQueue.length){this.state=this.reduce(this.state,this.actionQueue.shift(),this);}
var newState=this.state;this.isReducing=false;if(!oldState.loadingLevel&&newState.loadingLevel){this.publiclyTrigger('loading',[true]);}
else if(oldState.loadingLevel&&!newState.loadingLevel){this.publiclyTrigger('loading',[false]);}
var view=this.component&&this.component.view;if(oldState.eventStore!==newState.eventStore){if(oldState.eventStore){this.isEventsUpdated=true;}}
if(oldState.dateProfile!==newState.dateProfile){if(oldState.dateProfile&&view){this.publiclyTrigger('datesDestroy',[{view:view,el:view.el}]);}
this.isDatesUpdated=true;}
if(oldState.viewType!==newState.viewType){if(oldState.viewType&&view){this.publiclyTrigger('viewSkeletonDestroy',[{view:view,el:view.el}]);}
this.isViewUpdated=true;}
this.requestRerender();}};Calendar.prototype.reduce=function(state,action,calendar){return reduce(state,action,calendar);};Calendar.prototype.requestRerender=function(){this.needsRerender=true;this.delayedRerender();};Calendar.prototype.tryRerender=function(){if(this.component&&this.needsRerender&&!this.renderingPauseDepth&&!this.isRendering){this.executeRender();}};Calendar.prototype.batchRendering=function(func){this.renderingPauseDepth++;func();this.renderingPauseDepth--;if(this.needsRerender){this.requestRerender();}};Calendar.prototype.executeRender=function(){this.needsRerender=false;this.isRendering=true;this.renderComponent();this.isRendering=false;if(this.needsRerender){this.delayedRerender();}};Calendar.prototype.renderComponent=function(){var _a=this,state=_a.state,component=_a.component;var viewType=state.viewType;var viewSpec=this.viewSpecs[viewType];if(!viewSpec){throw new Error("View type \""+viewType+"\" is not valid");}
var renderableEventStore=this.renderableEventStore=(state.eventSourceLoadingLevel&&!this.opt('progressiveEventRendering'))?this.renderableEventStore:state.eventStore;var eventUiSingleBase=this.buildEventUiSingleBase(viewSpec.options);var eventUiBySource=this.buildEventUiBySource(state.eventSources);var eventUiBases=this.eventUiBases=this.buildEventUiBases(renderableEventStore.defs,eventUiSingleBase,eventUiBySource);component.receiveProps(__assign({},state,{viewSpec:viewSpec,dateProfileGenerator:this.dateProfileGenerators[viewType],dateProfile:state.dateProfile,eventStore:renderableEventStore,eventUiBases:eventUiBases,dateSelection:state.dateSelection,eventSelection:state.eventSelection,eventDrag:state.eventDrag,eventResize:state.eventResize}),this.buildComponentContext(this.theme,this.dateEnv,this.optionsManager.computed));if(this.isViewUpdated){this.isViewUpdated=false;this.publiclyTrigger('viewSkeletonRender',[{view:component.view,el:component.view.el}]);}
if(this.isDatesUpdated){this.isDatesUpdated=false;this.publiclyTrigger('datesRender',[{view:component.view,el:component.view.el}]);}
if(this.isEventsUpdated){this.isEventsUpdated=false;}
this.releaseAfterSizingTriggers();};Calendar.prototype.setOption=function(name,val){var _a;this.mutateOptions((_a={},_a[name]=val,_a),[],true);};Calendar.prototype.getOption=function(name){return this.optionsManager.computed[name];};Calendar.prototype.opt=function(name){return this.optionsManager.computed[name];};Calendar.prototype.viewOpt=function(name){return this.viewOpts()[name];};Calendar.prototype.viewOpts=function(){return this.viewSpecs[this.state.viewType].options;};Calendar.prototype.mutateOptions=function(updates,removals,isDynamic,deepEqual){var _this=this;var changeHandlers=this.pluginSystem.hooks.optionChangeHandlers;var normalUpdates={};var specialUpdates={};var oldDateEnv=this.dateEnv;var isTimeZoneDirty=false;var isSizeDirty=false;var anyDifficultOptions=Boolean(removals.length);for(var name_1 in updates){if(changeHandlers[name_1]){specialUpdates[name_1]=updates[name_1];}
else{normalUpdates[name_1]=updates[name_1];}}
for(var name_2 in normalUpdates){if(/^(height|contentHeight|aspectRatio)$/.test(name_2)){isSizeDirty=true;}
else if(/^(defaultDate|defaultView)$/.test(name_2));else{anyDifficultOptions=true;if(name_2==='timeZone'){isTimeZoneDirty=true;}}}
this.optionsManager.mutate(normalUpdates,removals,isDynamic);if(anyDifficultOptions){this.handleOptions(this.optionsManager.computed);}
this.batchRendering(function(){if(anyDifficultOptions){if(isTimeZoneDirty){_this.dispatch({type:'CHANGE_TIMEZONE',oldDateEnv:oldDateEnv});}
_this.dispatch({type:'SET_VIEW_TYPE',viewType:_this.state.viewType});}
else if(isSizeDirty){_this.updateSize();}
if(deepEqual){for(var name_3 in specialUpdates){changeHandlers[name_3](specialUpdates[name_3],_this,deepEqual);}}});};Calendar.prototype.handleOptions=function(options){var _this=this;var pluginHooks=this.pluginSystem.hooks;this.defaultAllDayEventDuration=createDuration(options.defaultAllDayEventDuration);this.defaultTimedEventDuration=createDuration(options.defaultTimedEventDuration);this.delayedRerender=this.buildDelayedRerender(options.rerenderDelay);this.theme=this.buildTheme(options);var available=this.parseRawLocales(options.locales);this.availableRawLocales=available.map;var locale=this.buildLocale(options.locale||available.defaultCode,available.map);this.dateEnv=this.buildDateEnv(locale,options.timeZone,pluginHooks.namedTimeZonedImpl,options.firstDay,options.weekNumberCalculation,options.weekLabel,pluginHooks.cmdFormatter);this.selectionConfig=this.buildSelectionConfig(options);this.viewSpecs=buildViewSpecs(pluginHooks.views,this.optionsManager);this.dateProfileGenerators=mapHash(this.viewSpecs,function(viewSpec){return new viewSpec.class.prototype.dateProfileGeneratorClass(viewSpec,_this);});};Calendar.prototype.getAvailableLocaleCodes=function(){return Object.keys(this.availableRawLocales);};Calendar.prototype._buildSelectionConfig=function(rawOpts){return processScopedUiProps('select',rawOpts,this);};Calendar.prototype._buildEventUiSingleBase=function(rawOpts){if(rawOpts.editable){rawOpts=__assign({},rawOpts,{eventEditable:true});}
return processScopedUiProps('event',rawOpts,this);};Calendar.prototype.hasPublicHandlers=function(name){return this.hasHandlers(name)||this.opt(name);};Calendar.prototype.publiclyTrigger=function(name,args){var optHandler=this.opt(name);this.triggerWith(name,this,args);if(optHandler){return optHandler.apply(this,args);}};Calendar.prototype.publiclyTriggerAfterSizing=function(name,args){var afterSizingTriggers=this.afterSizingTriggers;(afterSizingTriggers[name]||(afterSizingTriggers[name]=[])).push(args);};Calendar.prototype.releaseAfterSizingTriggers=function(){var afterSizingTriggers=this.afterSizingTriggers;for(var name_4 in afterSizingTriggers){for(var _i=0,_a=afterSizingTriggers[name_4];_i<_a.length;_i++){var args=_a[_i];this.publiclyTrigger(name_4,args);}}
this.afterSizingTriggers={};};Calendar.prototype.isValidViewType=function(viewType){return Boolean(this.viewSpecs[viewType]);};Calendar.prototype.changeView=function(viewType,dateOrRange){var dateMarker=null;if(dateOrRange){if(dateOrRange.start&&dateOrRange.end){this.optionsManager.mutate({visibleRange:dateOrRange},[]);this.handleOptions(this.optionsManager.computed);}
else{dateMarker=this.dateEnv.createMarker(dateOrRange);}}
this.unselect();this.dispatch({type:'SET_VIEW_TYPE',viewType:viewType,dateMarker:dateMarker});};Calendar.prototype.zoomTo=function(dateMarker,viewType){var spec;viewType=viewType||'day';spec=this.viewSpecs[viewType]||this.getUnitViewSpec(viewType);this.unselect();if(spec){this.dispatch({type:'SET_VIEW_TYPE',viewType:spec.type,dateMarker:dateMarker});}
else{this.dispatch({type:'SET_DATE',dateMarker:dateMarker});}};Calendar.prototype.getUnitViewSpec=function(unit){var component=this.component;var viewTypes=[];var i;var spec;if(component.header){viewTypes.push.apply(viewTypes,component.header.viewsWithButtons);}
if(component.footer){viewTypes.push.apply(viewTypes,component.footer.viewsWithButtons);}
for(var viewType in this.viewSpecs){viewTypes.push(viewType);}
for(i=0;i<viewTypes.length;i++){spec=this.viewSpecs[viewTypes[i]];if(spec){if(spec.singleUnit===unit){return spec;}}}};Calendar.prototype.getInitialDate=function(){var defaultDateInput=this.opt('defaultDate');if(defaultDateInput!=null){return this.dateEnv.createMarker(defaultDateInput);}
else{return this.getNow();}};Calendar.prototype.prev=function(){this.unselect();this.dispatch({type:'PREV'});};Calendar.prototype.next=function(){this.unselect();this.dispatch({type:'NEXT'});};Calendar.prototype.prevYear=function(){this.unselect();this.dispatch({type:'SET_DATE',dateMarker:this.dateEnv.addYears(this.state.currentDate,-1)});};Calendar.prototype.nextYear=function(){this.unselect();this.dispatch({type:'SET_DATE',dateMarker:this.dateEnv.addYears(this.state.currentDate,1)});};Calendar.prototype.today=function(){this.unselect();this.dispatch({type:'SET_DATE',dateMarker:this.getNow()});};Calendar.prototype.gotoDate=function(zonedDateInput){this.unselect();this.dispatch({type:'SET_DATE',dateMarker:this.dateEnv.createMarker(zonedDateInput)});};Calendar.prototype.incrementDate=function(deltaInput){var delta=createDuration(deltaInput);if(delta){this.unselect();this.dispatch({type:'SET_DATE',dateMarker:this.dateEnv.add(this.state.currentDate,delta)});}};Calendar.prototype.getDate=function(){return this.dateEnv.toDate(this.state.currentDate);};Calendar.prototype.formatDate=function(d,formatter){var dateEnv=this.dateEnv;return dateEnv.format(dateEnv.createMarker(d),createFormatter(formatter));};Calendar.prototype.formatRange=function(d0,d1,settings){var dateEnv=this.dateEnv;return dateEnv.formatRange(dateEnv.createMarker(d0),dateEnv.createMarker(d1),createFormatter(settings,this.opt('defaultRangeSeparator')),settings);};Calendar.prototype.formatIso=function(d,omitTime){var dateEnv=this.dateEnv;return dateEnv.formatIso(dateEnv.createMarker(d),{omitTime:omitTime});};Calendar.prototype.windowResize=function(ev){if(!this.isHandlingWindowResize&&this.component&&ev.target===window){this.isHandlingWindowResize=true;this.updateSize();this.publiclyTrigger('windowResize',[this.view]);this.isHandlingWindowResize=false;}};Calendar.prototype.updateSize=function(){if(this.component){this.component.updateSize(true);}};Calendar.prototype.registerInteractiveComponent=function(component,settingsInput){var settings=parseInteractionSettings(component,settingsInput);var DEFAULT_INTERACTIONS=[EventClicking,EventHovering];var interactionClasses=DEFAULT_INTERACTIONS.concat(this.pluginSystem.hooks.componentInteractions);var interactions=interactionClasses.map(function(interactionClass){return new interactionClass(settings);});this.interactionsStore[component.uid]=interactions;interactionSettingsStore[component.uid]=settings;};Calendar.prototype.unregisterInteractiveComponent=function(component){for(var _i=0,_a=this.interactionsStore[component.uid];_i<_a.length;_i++){var listener=_a[_i];listener.destroy();}
delete this.interactionsStore[component.uid];delete interactionSettingsStore[component.uid];};Calendar.prototype.select=function(dateOrObj,endDate){var selectionInput;if(endDate==null){if(dateOrObj.start!=null){selectionInput=dateOrObj;}
else{selectionInput={start:dateOrObj,end:null};}}
else{selectionInput={start:dateOrObj,end:endDate};}
var selection=parseDateSpan(selectionInput,this.dateEnv,createDuration({days:1}));if(selection){this.dispatch({type:'SELECT_DATES',selection:selection});this.triggerDateSelect(selection);}};Calendar.prototype.unselect=function(pev){if(this.state.dateSelection){this.dispatch({type:'UNSELECT_DATES'});this.triggerDateUnselect(pev);}};Calendar.prototype.triggerDateSelect=function(selection,pev){var arg=__assign({},this.buildDateSpanApi(selection),{jsEvent:pev?pev.origEvent:null,view:this.view});this.publiclyTrigger('select',[arg]);};Calendar.prototype.triggerDateUnselect=function(pev){this.publiclyTrigger('unselect',[{jsEvent:pev?pev.origEvent:null,view:this.view}]);};Calendar.prototype.triggerDateClick=function(dateSpan,dayEl,view,ev){var arg=__assign({},this.buildDatePointApi(dateSpan),{dayEl:dayEl,jsEvent:ev,view:view});this.publiclyTrigger('dateClick',[arg]);};Calendar.prototype.buildDatePointApi=function(dateSpan){var props={};for(var _i=0,_a=this.pluginSystem.hooks.datePointTransforms;_i<_a.length;_i++){var transform=_a[_i];__assign(props,transform(dateSpan,this));}
__assign(props,buildDatePointApi(dateSpan,this.dateEnv));return props;};Calendar.prototype.buildDateSpanApi=function(dateSpan){var props={};for(var _i=0,_a=this.pluginSystem.hooks.dateSpanTransforms;_i<_a.length;_i++){var transform=_a[_i];__assign(props,transform(dateSpan,this));}
__assign(props,buildDateSpanApi(dateSpan,this.dateEnv));return props;};Calendar.prototype.getNow=function(){var now=this.opt('now');if(typeof now==='function'){now=now();}
if(now==null){return this.dateEnv.createNowMarker();}
return this.dateEnv.createMarker(now);};Calendar.prototype.getDefaultEventEnd=function(allDay,marker){var end=marker;if(allDay){end=startOfDay(end);end=this.dateEnv.add(end,this.defaultAllDayEventDuration);}
else{end=this.dateEnv.add(end,this.defaultTimedEventDuration);}
return end;};Calendar.prototype.addEvent=function(eventInput,sourceInput){if(eventInput instanceof EventApi){var def=eventInput._def;var instance=eventInput._instance;if(!this.state.eventStore.defs[def.defId]){this.dispatch({type:'ADD_EVENTS',eventStore:eventTupleToStore({def:def,instance:instance})});}
return eventInput;}
var sourceId;if(sourceInput instanceof EventSourceApi){sourceId=sourceInput.internalEventSource.sourceId;}
else if(sourceInput!=null){var sourceApi=this.getEventSourceById(sourceInput);if(!sourceApi){console.warn('Could not find an event source with ID "'+sourceInput+'"');return null;}
else{sourceId=sourceApi.internalEventSource.sourceId;}}
var tuple=parseEvent(eventInput,sourceId,this);if(tuple){this.dispatch({type:'ADD_EVENTS',eventStore:eventTupleToStore(tuple)});return new EventApi(this,tuple.def,tuple.def.recurringDef?null:tuple.instance);}
return null;};Calendar.prototype.getEventById=function(id){var _a=this.state.eventStore,defs=_a.defs,instances=_a.instances;id=String(id);for(var defId in defs){var def=defs[defId];if(def.publicId===id){if(def.recurringDef){return new EventApi(this,def,null);}
else{for(var instanceId in instances){var instance=instances[instanceId];if(instance.defId===def.defId){return new EventApi(this,def,instance);}}}}}
return null;};Calendar.prototype.getEvents=function(){var _a=this.state.eventStore,defs=_a.defs,instances=_a.instances;var eventApis=[];for(var id in instances){var instance=instances[id];var def=defs[instance.defId];eventApis.push(new EventApi(this,def,instance));}
return eventApis;};Calendar.prototype.removeAllEvents=function(){this.dispatch({type:'REMOVE_ALL_EVENTS'});};Calendar.prototype.rerenderEvents=function(){this.dispatch({type:'RESET_EVENTS'});};Calendar.prototype.getEventSources=function(){var sourceHash=this.state.eventSources;var sourceApis=[];for(var internalId in sourceHash){sourceApis.push(new EventSourceApi(this,sourceHash[internalId]));}
return sourceApis;};Calendar.prototype.getEventSourceById=function(id){var sourceHash=this.state.eventSources;id=String(id);for(var sourceId in sourceHash){if(sourceHash[sourceId].publicId===id){return new EventSourceApi(this,sourceHash[sourceId]);}}
return null;};Calendar.prototype.addEventSource=function(sourceInput){if(sourceInput instanceof EventSourceApi){if(!this.state.eventSources[sourceInput.internalEventSource.sourceId]){this.dispatch({type:'ADD_EVENT_SOURCES',sources:[sourceInput.internalEventSource]});}
return sourceInput;}
var eventSource=parseEventSource(sourceInput,this);if(eventSource){this.dispatch({type:'ADD_EVENT_SOURCES',sources:[eventSource]});return new EventSourceApi(this,eventSource);}
return null;};Calendar.prototype.removeAllEventSources=function(){this.dispatch({type:'REMOVE_ALL_EVENT_SOURCES'});};Calendar.prototype.refetchEvents=function(){this.dispatch({type:'FETCH_EVENT_SOURCES'});};Calendar.prototype.scrollToTime=function(timeInput){var duration=createDuration(timeInput);if(duration){this.component.view.scrollToDuration(duration);}};return Calendar;}());EmitterMixin.mixInto(Calendar);function buildComponentContext$1(theme,dateEnv,options){return new ComponentContext(this,theme,dateEnv,options,null);}
function buildDateEnv(locale,timeZone,namedTimeZoneImpl,firstDay,weekNumberCalculation,weekLabel,cmdFormatter){return new DateEnv({calendarSystem:'gregory',timeZone:timeZone,namedTimeZoneImpl:namedTimeZoneImpl,locale:locale,weekNumberCalculation:weekNumberCalculation,firstDay:firstDay,weekLabel:weekLabel,cmdFormatter:cmdFormatter});}
function buildTheme(calendarOptions){var themeClass=this.pluginSystem.hooks.themeClasses[calendarOptions.themeSystem]||StandardTheme;return new themeClass(calendarOptions);}
function buildDelayedRerender(wait){var func=this.tryRerender.bind(this);if(wait!=null){func=debounce(func,wait);}
return func;}
function buildEventUiBySource(eventSources){return mapHash(eventSources,function(eventSource){return eventSource.ui;});}
function buildEventUiBases(eventDefs,eventUiSingleBase,eventUiBySource){var eventUiBases={'':eventUiSingleBase};for(var defId in eventDefs){var def=eventDefs[defId];if(def.sourceId&&eventUiBySource[def.sourceId]){eventUiBases[defId]=eventUiBySource[def.sourceId];}}
return eventUiBases;}
var View=(function(_super){__extends(View,_super);function View(viewSpec,parentEl){var _this=_super.call(this,createElement('div',{className:'fc-view fc-'+viewSpec.type+'-view'}))||this;_this.renderDatesMem=memoizeRendering(_this.renderDatesWrap,_this.unrenderDatesWrap);_this.renderBusinessHoursMem=memoizeRendering(_this.renderBusinessHours,_this.unrenderBusinessHours,[_this.renderDatesMem]);_this.renderDateSelectionMem=memoizeRendering(_this.renderDateSelectionWrap,_this.unrenderDateSelectionWrap,[_this.renderDatesMem]);_this.renderEventsMem=memoizeRendering(_this.renderEvents,_this.unrenderEvents,[_this.renderDatesMem]);_this.renderEventSelectionMem=memoizeRendering(_this.renderEventSelectionWrap,_this.unrenderEventSelectionWrap,[_this.renderEventsMem]);_this.renderEventDragMem=memoizeRendering(_this.renderEventDragWrap,_this.unrenderEventDragWrap,[_this.renderDatesMem]);_this.renderEventResizeMem=memoizeRendering(_this.renderEventResizeWrap,_this.unrenderEventResizeWrap,[_this.renderDatesMem]);_this.viewSpec=viewSpec;_this.type=viewSpec.type;parentEl.appendChild(_this.el);_this.initialize();return _this;}
View.prototype.initialize=function(){};Object.defineProperty(View.prototype,"activeStart",{get:function(){return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.start);},enumerable:true,configurable:true});Object.defineProperty(View.prototype,"activeEnd",{get:function(){return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.end);},enumerable:true,configurable:true});Object.defineProperty(View.prototype,"currentStart",{get:function(){return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.start);},enumerable:true,configurable:true});Object.defineProperty(View.prototype,"currentEnd",{get:function(){return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.end);},enumerable:true,configurable:true});View.prototype.render=function(props,context){this.renderDatesMem(props.dateProfile);this.renderBusinessHoursMem(props.businessHours);this.renderDateSelectionMem(props.dateSelection);this.renderEventsMem(props.eventStore);this.renderEventSelectionMem(props.eventSelection);this.renderEventDragMem(props.eventDrag);this.renderEventResizeMem(props.eventResize);};View.prototype.beforeUpdate=function(){this.addScroll(this.queryScroll());};View.prototype.destroy=function(){_super.prototype.destroy.call(this);this.renderDatesMem.unrender();};View.prototype.updateSize=function(isResize,viewHeight,isAuto){var calendar=this.context.calendar;if(isResize){this.addScroll(this.queryScroll());}
if(isResize||calendar.isViewUpdated||calendar.isDatesUpdated||calendar.isEventsUpdated){this.updateBaseSize(isResize,viewHeight,isAuto);}};View.prototype.updateBaseSize=function(isResize,viewHeight,isAuto){};View.prototype.renderDatesWrap=function(dateProfile){this.renderDates(dateProfile);this.addScroll({duration:createDuration(this.context.options.scrollTime)});};View.prototype.unrenderDatesWrap=function(){this.stopNowIndicator();this.unrenderDates();};View.prototype.renderDates=function(dateProfile){};View.prototype.unrenderDates=function(){};View.prototype.renderBusinessHours=function(businessHours){};View.prototype.unrenderBusinessHours=function(){};View.prototype.renderDateSelectionWrap=function(selection){if(selection){this.renderDateSelection(selection);}};View.prototype.unrenderDateSelectionWrap=function(selection){if(selection){this.unrenderDateSelection(selection);}};View.prototype.renderDateSelection=function(selection){};View.prototype.unrenderDateSelection=function(selection){};View.prototype.renderEvents=function(eventStore){};View.prototype.unrenderEvents=function(){};View.prototype.sliceEvents=function(eventStore,allDay){var props=this.props;return sliceEventStore(eventStore,props.eventUiBases,props.dateProfile.activeRange,allDay?this.context.nextDayThreshold:null).fg;};View.prototype.renderEventSelectionWrap=function(instanceId){if(instanceId){this.renderEventSelection(instanceId);}};View.prototype.unrenderEventSelectionWrap=function(instanceId){if(instanceId){this.unrenderEventSelection(instanceId);}};View.prototype.renderEventSelection=function(instanceId){};View.prototype.unrenderEventSelection=function(instanceId){};View.prototype.renderEventDragWrap=function(state){if(state){this.renderEventDrag(state);}};View.prototype.unrenderEventDragWrap=function(state){if(state){this.unrenderEventDrag(state);}};View.prototype.renderEventDrag=function(state){};View.prototype.unrenderEventDrag=function(state){};View.prototype.renderEventResizeWrap=function(state){if(state){this.renderEventResize(state);}};View.prototype.unrenderEventResizeWrap=function(state){if(state){this.unrenderEventResize(state);}};View.prototype.renderEventResize=function(state){};View.prototype.unrenderEventResize=function(state){};View.prototype.startNowIndicator=function(dateProfile,dateProfileGenerator){var _this=this;var _a=this.context,calendar=_a.calendar,dateEnv=_a.dateEnv,options=_a.options;var unit;var update;var delay;if(options.nowIndicator&&!this.initialNowDate){unit=this.getNowIndicatorUnit(dateProfile,dateProfileGenerator);if(unit){update=this.updateNowIndicator.bind(this);this.initialNowDate=calendar.getNow();this.initialNowQueriedMs=new Date().valueOf();delay=dateEnv.add(dateEnv.startOf(this.initialNowDate,unit),createDuration(1,unit)).valueOf()-this.initialNowDate.valueOf();this.nowIndicatorTimeoutID=setTimeout(function(){_this.nowIndicatorTimeoutID=null;update();if(unit==='second'){delay=1000;}
else{delay=1000*60;}
_this.nowIndicatorIntervalID=setInterval(update,delay);},delay);}}};View.prototype.updateNowIndicator=function(){if(this.props.dateProfile&&this.initialNowDate){this.unrenderNowIndicator();this.renderNowIndicator(addMs(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs));this.isNowIndicatorRendered=true;}};View.prototype.stopNowIndicator=function(){if(this.nowIndicatorTimeoutID){clearTimeout(this.nowIndicatorTimeoutID);this.nowIndicatorTimeoutID=null;}
if(this.nowIndicatorIntervalID){clearInterval(this.nowIndicatorIntervalID);this.nowIndicatorIntervalID=null;}
if(this.isNowIndicatorRendered){this.unrenderNowIndicator();this.isNowIndicatorRendered=false;}};View.prototype.getNowIndicatorUnit=function(dateProfile,dateProfileGenerator){};View.prototype.renderNowIndicator=function(date){};View.prototype.unrenderNowIndicator=function(){};View.prototype.addScroll=function(scroll,isForced){if(isForced){scroll.isForced=isForced;}
__assign(this.queuedScroll||(this.queuedScroll={}),scroll);};View.prototype.popScroll=function(isResize){this.applyQueuedScroll(isResize);this.queuedScroll=null;};View.prototype.applyQueuedScroll=function(isResize){if(this.queuedScroll){this.applyScroll(this.queuedScroll,isResize);}};View.prototype.queryScroll=function(){var scroll={};if(this.props.dateProfile){__assign(scroll,this.queryDateScroll());}
return scroll;};View.prototype.applyScroll=function(scroll,isResize){var duration=scroll.duration,isForced=scroll.isForced;if(duration!=null&&!isForced){delete scroll.duration;if(this.props.dateProfile){__assign(scroll,this.computeDateScroll(duration));}}
if(this.props.dateProfile){this.applyDateScroll(scroll);}};View.prototype.computeDateScroll=function(duration){return{};};View.prototype.queryDateScroll=function(){return{};};View.prototype.applyDateScroll=function(scroll){};View.prototype.scrollToDuration=function(duration){this.applyScroll({duration:duration},false);};return View;}(DateComponent));EmitterMixin.mixInto(View);View.prototype.usesMinMaxTime=false;View.prototype.dateProfileGeneratorClass=DateProfileGenerator;var FgEventRenderer=(function(){function FgEventRenderer(){this.segs=[];this.isSizeDirty=false;}
FgEventRenderer.prototype.renderSegs=function(context,segs,mirrorInfo){this.context=context;this.rangeUpdated();segs=this.renderSegEls(segs,mirrorInfo);this.segs=segs;this.attachSegs(segs,mirrorInfo);this.isSizeDirty=true;triggerRenderedSegs(this.context,this.segs,Boolean(mirrorInfo));};FgEventRenderer.prototype.unrender=function(context,_segs,mirrorInfo){triggerWillRemoveSegs(this.context,this.segs,Boolean(mirrorInfo));this.detachSegs(this.segs);this.segs=[];};FgEventRenderer.prototype.rangeUpdated=function(){var options=this.context.options;var displayEventTime;var displayEventEnd;this.eventTimeFormat=createFormatter(options.eventTimeFormat||this.computeEventTimeFormat(),options.defaultRangeSeparator);displayEventTime=options.displayEventTime;if(displayEventTime==null){displayEventTime=this.computeDisplayEventTime();}
displayEventEnd=options.displayEventEnd;if(displayEventEnd==null){displayEventEnd=this.computeDisplayEventEnd();}
this.displayEventTime=displayEventTime;this.displayEventEnd=displayEventEnd;};FgEventRenderer.prototype.renderSegEls=function(segs,mirrorInfo){var html='';var i;if(segs.length){for(i=0;i<segs.length;i++){html+=this.renderSegHtml(segs[i],mirrorInfo);}
htmlToElements(html).forEach(function(el,i){var seg=segs[i];if(el){seg.el=el;}});segs=filterSegsViaEls(this.context,segs,Boolean(mirrorInfo));}
return segs;};FgEventRenderer.prototype.getSegClasses=function(seg,isDraggable,isResizable,mirrorInfo){var classes=['fc-event',seg.isStart?'fc-start':'fc-not-start',seg.isEnd?'fc-end':'fc-not-end'].concat(seg.eventRange.ui.classNames);if(isDraggable){classes.push('fc-draggable');}
if(isResizable){classes.push('fc-resizable');}
if(mirrorInfo){classes.push('fc-mirror');if(mirrorInfo.isDragging){classes.push('fc-dragging');}
if(mirrorInfo.isResizing){classes.push('fc-resizing');}}
return classes;};FgEventRenderer.prototype.getTimeText=function(eventRange,formatter,displayEnd){var def=eventRange.def,instance=eventRange.instance;return this._getTimeText(instance.range.start,def.hasEnd?instance.range.end:null,def.allDay,formatter,displayEnd,instance.forcedStartTzo,instance.forcedEndTzo);};FgEventRenderer.prototype._getTimeText=function(start,end,allDay,formatter,displayEnd,forcedStartTzo,forcedEndTzo){var dateEnv=this.context.dateEnv;if(formatter==null){formatter=this.eventTimeFormat;}
if(displayEnd==null){displayEnd=this.displayEventEnd;}
if(this.displayEventTime&&!allDay){if(displayEnd&&end){return dateEnv.formatRange(start,end,formatter,{forcedStartTzo:forcedStartTzo,forcedEndTzo:forcedEndTzo});}
else{return dateEnv.format(start,formatter,{forcedTzo:forcedStartTzo});}}
return '';};FgEventRenderer.prototype.computeEventTimeFormat=function(){return{hour:'numeric',minute:'2-digit',omitZeroMinute:true};};FgEventRenderer.prototype.computeDisplayEventTime=function(){return true;};FgEventRenderer.prototype.computeDisplayEventEnd=function(){return true;};FgEventRenderer.prototype.getSkinCss=function(ui){return{'background-color':ui.backgroundColor,'border-color':ui.borderColor,color:ui.textColor};};FgEventRenderer.prototype.sortEventSegs=function(segs){var specs=this.context.eventOrderSpecs;var objs=segs.map(buildSegCompareObj);objs.sort(function(obj0,obj1){return compareByFieldSpecs(obj0,obj1,specs);});return objs.map(function(c){return c._seg;});};FgEventRenderer.prototype.computeSizes=function(force){if(force||this.isSizeDirty){this.computeSegSizes(this.segs);}};FgEventRenderer.prototype.assignSizes=function(force){if(force||this.isSizeDirty){this.assignSegSizes(this.segs);this.isSizeDirty=false;}};FgEventRenderer.prototype.computeSegSizes=function(segs){};FgEventRenderer.prototype.assignSegSizes=function(segs){};FgEventRenderer.prototype.hideByHash=function(hash){if(hash){for(var _i=0,_a=this.segs;_i<_a.length;_i++){var seg=_a[_i];if(hash[seg.eventRange.instance.instanceId]){seg.el.style.visibility='hidden';}}}};FgEventRenderer.prototype.showByHash=function(hash){if(hash){for(var _i=0,_a=this.segs;_i<_a.length;_i++){var seg=_a[_i];if(hash[seg.eventRange.instance.instanceId]){seg.el.style.visibility='';}}}};FgEventRenderer.prototype.selectByInstanceId=function(instanceId){if(instanceId){for(var _i=0,_a=this.segs;_i<_a.length;_i++){var seg=_a[_i];var eventInstance=seg.eventRange.instance;if(eventInstance&&eventInstance.instanceId===instanceId&&seg.el){seg.el.classList.add('fc-selected');}}}};FgEventRenderer.prototype.unselectByInstanceId=function(instanceId){if(instanceId){for(var _i=0,_a=this.segs;_i<_a.length;_i++){var seg=_a[_i];if(seg.el){seg.el.classList.remove('fc-selected');}}}};return FgEventRenderer;}());function buildSegCompareObj(seg){var eventDef=seg.eventRange.def;var range=seg.eventRange.instance.range;var start=range.start?range.start.valueOf():0;var end=range.end?range.end.valueOf():0;return __assign({},eventDef.extendedProps,eventDef,{id:eventDef.publicId,start:start,end:end,duration:end-start,allDay:Number(eventDef.allDay),_seg:seg});}
var FillRenderer=(function(){function FillRenderer(){this.fillSegTag='div';this.dirtySizeFlags={};this.containerElsByType={};this.segsByType={};}
FillRenderer.prototype.getSegsByType=function(type){return this.segsByType[type]||[];};FillRenderer.prototype.renderSegs=function(type,context,segs){var _a;this.context=context;var renderedSegs=this.renderSegEls(type,segs);var containerEls=this.attachSegs(type,renderedSegs);if(containerEls){(_a=(this.containerElsByType[type]||(this.containerElsByType[type]=[]))).push.apply(_a,containerEls);}
this.segsByType[type]=renderedSegs;if(type==='bgEvent'){triggerRenderedSegs(context,renderedSegs,false);}
this.dirtySizeFlags[type]=true;};FillRenderer.prototype.unrender=function(type,context){var segs=this.segsByType[type];if(segs){if(type==='bgEvent'){triggerWillRemoveSegs(context,segs,false);}
this.detachSegs(type,segs);}};FillRenderer.prototype.renderSegEls=function(type,segs){var _this=this;var html='';var i;if(segs.length){for(i=0;i<segs.length;i++){html+=this.renderSegHtml(type,segs[i]);}
htmlToElements(html).forEach(function(el,i){var seg=segs[i];if(el){seg.el=el;}});if(type==='bgEvent'){segs=filterSegsViaEls(this.context,segs,false);}
segs=segs.filter(function(seg){return elementMatches(seg.el,_this.fillSegTag);});}
return segs;};FillRenderer.prototype.renderSegHtml=function(type,seg){var css=null;var classNames=[];if(type!=='highlight'&&type!=='businessHours'){css={'background-color':seg.eventRange.ui.backgroundColor};}
if(type!=='highlight'){classNames=classNames.concat(seg.eventRange.ui.classNames);}
if(type==='businessHours'){classNames.push('fc-bgevent');}
else{classNames.push('fc-'+type.toLowerCase());}
return '<'+this.fillSegTag+
(classNames.length?' class="'+classNames.join(' ')+'"':'')+
(css?' style="'+cssToStr(css)+'"':'')+
'></'+this.fillSegTag+'>';};FillRenderer.prototype.detachSegs=function(type,segs){var containerEls=this.containerElsByType[type];if(containerEls){containerEls.forEach(removeElement);delete this.containerElsByType[type];}};FillRenderer.prototype.computeSizes=function(force){for(var type in this.segsByType){if(force||this.dirtySizeFlags[type]){this.computeSegSizes(this.segsByType[type]);}}};FillRenderer.prototype.assignSizes=function(force){for(var type in this.segsByType){if(force||this.dirtySizeFlags[type]){this.assignSegSizes(this.segsByType[type]);}}
this.dirtySizeFlags={};};FillRenderer.prototype.computeSegSizes=function(segs){};FillRenderer.prototype.assignSegSizes=function(segs){};return FillRenderer;}());var NamedTimeZoneImpl=(function(){function NamedTimeZoneImpl(timeZoneName){this.timeZoneName=timeZoneName;}
return NamedTimeZoneImpl;}());var ElementDragging=(function(){function ElementDragging(el){this.emitter=new EmitterMixin();}
ElementDragging.prototype.destroy=function(){};ElementDragging.prototype.setMirrorIsVisible=function(bool){};ElementDragging.prototype.setMirrorNeedsRevert=function(bool){};ElementDragging.prototype.setAutoScrollEnabled=function(bool){};return ElementDragging;}());function formatDate(dateInput,settings){if(settings===void 0){settings={};}
var dateEnv=buildDateEnv$1(settings);var formatter=createFormatter(settings);var dateMeta=dateEnv.createMarkerMeta(dateInput);if(!dateMeta){return '';}
return dateEnv.format(dateMeta.marker,formatter,{forcedTzo:dateMeta.forcedTzo});}
function formatRange(startInput,endInput,settings){var dateEnv=buildDateEnv$1(typeof settings==='object'&&settings?settings:{});var formatter=createFormatter(settings,globalDefaults.defaultRangeSeparator);var startMeta=dateEnv.createMarkerMeta(startInput);var endMeta=dateEnv.createMarkerMeta(endInput);if(!startMeta||!endMeta){return '';}
return dateEnv.formatRange(startMeta.marker,endMeta.marker,formatter,{forcedStartTzo:startMeta.forcedTzo,forcedEndTzo:endMeta.forcedTzo,isEndExclusive:settings.isEndExclusive});}
function buildDateEnv$1(settings){var locale=buildLocale(settings.locale||'en',parseRawLocales([]).map);settings=__assign({timeZone:globalDefaults.timeZone,calendarSystem:'gregory'},settings,{locale:locale});return new DateEnv(settings);}
var DRAG_META_PROPS={startTime:createDuration,duration:createDuration,create:Boolean,sourceId:String};var DRAG_META_DEFAULTS={create:true};function parseDragMeta(raw){var leftoverProps={};var refined=refineProps(raw,DRAG_META_PROPS,DRAG_META_DEFAULTS,leftoverProps);refined.leftoverProps=leftoverProps;return refined;}
function computeFallbackHeaderFormat(datesRepDistinctDays,dayCnt){if(!datesRepDistinctDays||dayCnt>10){return{weekday:'short'};}
else if(dayCnt>1){return{weekday:'short',month:'numeric',day:'numeric',omitCommas:true};}
else{return{weekday:'long'};}}
function renderDateCell(dateMarker,dateProfile,datesRepDistinctDays,colCnt,colHeadFormat,context,colspan,otherAttrs){var dateEnv=context.dateEnv,theme=context.theme,options=context.options;var isDateValid=rangeContainsMarker(dateProfile.activeRange,dateMarker);var classNames=['fc-day-header',theme.getClass('widgetHeader')];var innerHtml;if(typeof options.columnHeaderHtml==='function'){innerHtml=options.columnHeaderHtml(dateEnv.toDate(dateMarker));}
else if(typeof options.columnHeaderText==='function'){innerHtml=htmlEscape(options.columnHeaderText(dateEnv.toDate(dateMarker)));}
else{innerHtml=htmlEscape(dateEnv.format(dateMarker,colHeadFormat));}
if(datesRepDistinctDays){classNames=classNames.concat(getDayClasses(dateMarker,dateProfile,context,true));}
else{classNames.push('fc-'+DAY_IDS[dateMarker.getUTCDay()]);}
return ''+
'<th class="'+classNames.join(' ')+'"'+
((isDateValid&&datesRepDistinctDays)?' data-date="'+dateEnv.formatIso(dateMarker,{omitTime:true})+'"':'')+
(colspan>1?' colspan="'+colspan+'"':'')+
(otherAttrs?' '+otherAttrs:'')+
'>'+
(isDateValid?buildGotoAnchorHtml(options,dateEnv,{date:dateMarker,forceOff:!datesRepDistinctDays||colCnt===1},innerHtml):innerHtml)+
'</th>';}
var DayHeader=(function(_super){__extends(DayHeader,_super);function DayHeader(parentEl){var _this=_super.call(this)||this;_this.renderSkeleton=memoizeRendering(_this._renderSkeleton,_this._unrenderSkeleton);_this.parentEl=parentEl;return _this;}
DayHeader.prototype.render=function(props,context){var dates=props.dates,datesRepDistinctDays=props.datesRepDistinctDays;var parts=[];this.renderSkeleton(context);if(props.renderIntroHtml){parts.push(props.renderIntroHtml());}
var colHeadFormat=createFormatter(context.options.columnHeaderFormat||computeFallbackHeaderFormat(datesRepDistinctDays,dates.length));for(var _i=0,dates_1=dates;_i<dates_1.length;_i++){var date=dates_1[_i];parts.push(renderDateCell(date,props.dateProfile,datesRepDistinctDays,dates.length,colHeadFormat,context));}
if(context.isRtl){parts.reverse();}
this.thead.innerHTML='<tr>'+parts.join('')+'</tr>';};DayHeader.prototype.destroy=function(){_super.prototype.destroy.call(this);this.renderSkeleton.unrender();};DayHeader.prototype._renderSkeleton=function(context){var theme=context.theme;var parentEl=this.parentEl;parentEl.innerHTML='';parentEl.appendChild(this.el=htmlToElement('<div class="fc-row '+theme.getClass('headerRow')+'">'+
'<table class="'+theme.getClass('tableGrid')+'">'+
'<thead></thead>'+
'</table>'+
'</div>'));this.thead=this.el.querySelector('thead');};DayHeader.prototype._unrenderSkeleton=function(){removeElement(this.el);};return DayHeader;}(Component));var DaySeries=(function(){function DaySeries(range,dateProfileGenerator){var date=range.start;var end=range.end;var indices=[];var dates=[];var dayIndex=-1;while(date<end){if(dateProfileGenerator.isHiddenDay(date)){indices.push(dayIndex+0.5);}
else{dayIndex++;indices.push(dayIndex);dates.push(date);}
date=addDays(date,1);}
this.dates=dates;this.indices=indices;this.cnt=dates.length;}
DaySeries.prototype.sliceRange=function(range){var firstIndex=this.getDateDayIndex(range.start);var lastIndex=this.getDateDayIndex(addDays(range.end,-1));var clippedFirstIndex=Math.max(0,firstIndex);var clippedLastIndex=Math.min(this.cnt-1,lastIndex);clippedFirstIndex=Math.ceil(clippedFirstIndex);clippedLastIndex=Math.floor(clippedLastIndex);if(clippedFirstIndex<=clippedLastIndex){return{firstIndex:clippedFirstIndex,lastIndex:clippedLastIndex,isStart:firstIndex===clippedFirstIndex,isEnd:lastIndex===clippedLastIndex};}
else{return null;}};DaySeries.prototype.getDateDayIndex=function(date){var indices=this.indices;var dayOffset=Math.floor(diffDays(this.dates[0],date));if(dayOffset<0){return indices[0]-1;}
else if(dayOffset>=indices.length){return indices[indices.length-1]+1;}
else{return indices[dayOffset];}};return DaySeries;}());var DayTable=(function(){function DayTable(daySeries,breakOnWeeks){var dates=daySeries.dates;var daysPerRow;var firstDay;var rowCnt;if(breakOnWeeks){firstDay=dates[0].getUTCDay();for(daysPerRow=1;daysPerRow<dates.length;daysPerRow++){if(dates[daysPerRow].getUTCDay()===firstDay){break;}}
rowCnt=Math.ceil(dates.length/daysPerRow);}
else{rowCnt=1;daysPerRow=dates.length;}
this.rowCnt=rowCnt;this.colCnt=daysPerRow;this.daySeries=daySeries;this.cells=this.buildCells();this.headerDates=this.buildHeaderDates();}
DayTable.prototype.buildCells=function(){var rows=[];for(var row=0;row<this.rowCnt;row++){var cells=[];for(var col=0;col<this.colCnt;col++){cells.push(this.buildCell(row,col));}
rows.push(cells);}
return rows;};DayTable.prototype.buildCell=function(row,col){return{date:this.daySeries.dates[row*this.colCnt+col]};};DayTable.prototype.buildHeaderDates=function(){var dates=[];for(var col=0;col<this.colCnt;col++){dates.push(this.cells[0][col].date);}
return dates;};DayTable.prototype.sliceRange=function(range){var colCnt=this.colCnt;var seriesSeg=this.daySeries.sliceRange(range);var segs=[];if(seriesSeg){var firstIndex=seriesSeg.firstIndex,lastIndex=seriesSeg.lastIndex;var index=firstIndex;while(index<=lastIndex){var row=Math.floor(index/colCnt);var nextIndex=Math.min((row+1)*colCnt,lastIndex+1);segs.push({row:row,firstCol:index%colCnt,lastCol:(nextIndex-1)%colCnt,isStart:seriesSeg.isStart&&index===firstIndex,isEnd:seriesSeg.isEnd&&(nextIndex-1)===lastIndex});index=nextIndex;}}
return segs;};return DayTable;}());var Slicer=(function(){function Slicer(){this.sliceBusinessHours=memoize(this._sliceBusinessHours);this.sliceDateSelection=memoize(this._sliceDateSpan);this.sliceEventStore=memoize(this._sliceEventStore);this.sliceEventDrag=memoize(this._sliceInteraction);this.sliceEventResize=memoize(this._sliceInteraction);}
Slicer.prototype.sliceProps=function(props,dateProfile,nextDayThreshold,calendar,component){var extraArgs=[];for(var _i=5;_i<arguments.length;_i++){extraArgs[_i-5]=arguments[_i];}
var eventUiBases=props.eventUiBases;var eventSegs=this.sliceEventStore.apply(this,[props.eventStore,eventUiBases,dateProfile,nextDayThreshold,component].concat(extraArgs));return{dateSelectionSegs:this.sliceDateSelection.apply(this,[props.dateSelection,eventUiBases,component].concat(extraArgs)),businessHourSegs:this.sliceBusinessHours.apply(this,[props.businessHours,dateProfile,nextDayThreshold,calendar,component].concat(extraArgs)),fgEventSegs:eventSegs.fg,bgEventSegs:eventSegs.bg,eventDrag:this.sliceEventDrag.apply(this,[props.eventDrag,eventUiBases,dateProfile,nextDayThreshold,component].concat(extraArgs)),eventResize:this.sliceEventResize.apply(this,[props.eventResize,eventUiBases,dateProfile,nextDayThreshold,component].concat(extraArgs)),eventSelection:props.eventSelection};};Slicer.prototype.sliceNowDate=function(date,component){var extraArgs=[];for(var _i=2;_i<arguments.length;_i++){extraArgs[_i-2]=arguments[_i];}
return this._sliceDateSpan.apply(this,[{range:{start:date,end:addMs(date,1)},allDay:false},{},component].concat(extraArgs));};Slicer.prototype._sliceBusinessHours=function(businessHours,dateProfile,nextDayThreshold,calendar,component){var extraArgs=[];for(var _i=5;_i<arguments.length;_i++){extraArgs[_i-5]=arguments[_i];}
if(!businessHours){return[];}
return this._sliceEventStore.apply(this,[expandRecurring(businessHours,computeActiveRange(dateProfile,Boolean(nextDayThreshold)),calendar),{},dateProfile,nextDayThreshold,component].concat(extraArgs)).bg;};Slicer.prototype._sliceEventStore=function(eventStore,eventUiBases,dateProfile,nextDayThreshold,component){var extraArgs=[];for(var _i=5;_i<arguments.length;_i++){extraArgs[_i-5]=arguments[_i];}
if(eventStore){var rangeRes=sliceEventStore(eventStore,eventUiBases,computeActiveRange(dateProfile,Boolean(nextDayThreshold)),nextDayThreshold);return{bg:this.sliceEventRanges(rangeRes.bg,component,extraArgs),fg:this.sliceEventRanges(rangeRes.fg,component,extraArgs)};}
else{return{bg:[],fg:[]};}};Slicer.prototype._sliceInteraction=function(interaction,eventUiBases,dateProfile,nextDayThreshold,component){var extraArgs=[];for(var _i=5;_i<arguments.length;_i++){extraArgs[_i-5]=arguments[_i];}
if(!interaction){return null;}
var rangeRes=sliceEventStore(interaction.mutatedEvents,eventUiBases,computeActiveRange(dateProfile,Boolean(nextDayThreshold)),nextDayThreshold);return{segs:this.sliceEventRanges(rangeRes.fg,component,extraArgs),affectedInstances:interaction.affectedEvents.instances,isEvent:interaction.isEvent,sourceSeg:interaction.origSeg};};Slicer.prototype._sliceDateSpan=function(dateSpan,eventUiBases,component){var extraArgs=[];for(var _i=3;_i<arguments.length;_i++){extraArgs[_i-3]=arguments[_i];}
if(!dateSpan){return[];}
var eventRange=fabricateEventRange(dateSpan,eventUiBases,component.context.calendar);var segs=this.sliceRange.apply(this,[dateSpan.range].concat(extraArgs));for(var _a=0,segs_1=segs;_a<segs_1.length;_a++){var seg=segs_1[_a];seg.component=component;seg.eventRange=eventRange;}
return segs;};Slicer.prototype.sliceEventRanges=function(eventRanges,component,extraArgs){var segs=[];for(var _i=0,eventRanges_1=eventRanges;_i<eventRanges_1.length;_i++){var eventRange=eventRanges_1[_i];segs.push.apply(segs,this.sliceEventRange(eventRange,component,extraArgs));}
return segs;};Slicer.prototype.sliceEventRange=function(eventRange,component,extraArgs){var segs=this.sliceRange.apply(this,[eventRange.range].concat(extraArgs));for(var _i=0,segs_2=segs;_i<segs_2.length;_i++){var seg=segs_2[_i];seg.component=component;seg.eventRange=eventRange;seg.isStart=eventRange.isStart&&seg.isStart;seg.isEnd=eventRange.isEnd&&seg.isEnd;}
return segs;};return Slicer;}());function computeActiveRange(dateProfile,isComponentAllDay){var range=dateProfile.activeRange;if(isComponentAllDay){return range;}
return{start:addMs(range.start,dateProfile.minTime.milliseconds),end:addMs(range.end,dateProfile.maxTime.milliseconds-864e5)};}
var version='4.4.2';exports.Calendar=Calendar;exports.Component=Component;exports.ComponentContext=ComponentContext;exports.DateComponent=DateComponent;exports.DateEnv=DateEnv;exports.DateProfileGenerator=DateProfileGenerator;exports.DayHeader=DayHeader;exports.DaySeries=DaySeries;exports.DayTable=DayTable;exports.ElementDragging=ElementDragging;exports.ElementScrollController=ElementScrollController;exports.EmitterMixin=EmitterMixin;exports.EventApi=EventApi;exports.FgEventRenderer=FgEventRenderer;exports.FillRenderer=FillRenderer;exports.Interaction=Interaction;exports.Mixin=Mixin;exports.NamedTimeZoneImpl=NamedTimeZoneImpl;exports.PositionCache=PositionCache;exports.ScrollComponent=ScrollComponent;exports.ScrollController=ScrollController;exports.Slicer=Slicer;exports.Splitter=Splitter;exports.Theme=Theme;exports.View=View;exports.WindowScrollController=WindowScrollController;exports.addDays=addDays;exports.addDurations=addDurations;exports.addMs=addMs;exports.addWeeks=addWeeks;exports.allowContextMenu=allowContextMenu;exports.allowSelection=allowSelection;exports.appendToElement=appendToElement;exports.applyAll=applyAll;exports.applyMutationToEventStore=applyMutationToEventStore;exports.applyStyle=applyStyle;exports.applyStyleProp=applyStyleProp;exports.asRoughMinutes=asRoughMinutes;exports.asRoughMs=asRoughMs;exports.asRoughSeconds=asRoughSeconds;exports.buildGotoAnchorHtml=buildGotoAnchorHtml;exports.buildSegCompareObj=buildSegCompareObj;exports.capitaliseFirstLetter=capitaliseFirstLetter;exports.combineEventUis=combineEventUis;exports.compareByFieldSpec=compareByFieldSpec;exports.compareByFieldSpecs=compareByFieldSpecs;exports.compareNumbers=compareNumbers;exports.compensateScroll=compensateScroll;exports.computeClippingRect=computeClippingRect;exports.computeEdges=computeEdges;exports.computeEventDraggable=computeEventDraggable;exports.computeEventEndResizable=computeEventEndResizable;exports.computeEventStartResizable=computeEventStartResizable;exports.computeFallbackHeaderFormat=computeFallbackHeaderFormat;exports.computeHeightAndMargins=computeHeightAndMargins;exports.computeInnerRect=computeInnerRect;exports.computeRect=computeRect;exports.computeVisibleDayRange=computeVisibleDayRange;exports.config=config;exports.constrainPoint=constrainPoint;exports.createDuration=createDuration;exports.createElement=createElement;exports.createEmptyEventStore=createEmptyEventStore;exports.createEventInstance=createEventInstance;exports.createFormatter=createFormatter;exports.createPlugin=createPlugin;exports.cssToStr=cssToStr;exports.debounce=debounce;exports.diffDates=diffDates;exports.diffDayAndTime=diffDayAndTime;exports.diffDays=diffDays;exports.diffPoints=diffPoints;exports.diffWeeks=diffWeeks;exports.diffWholeDays=diffWholeDays;exports.diffWholeWeeks=diffWholeWeeks;exports.disableCursor=disableCursor;exports.distributeHeight=distributeHeight;exports.elementClosest=elementClosest;exports.elementMatches=elementMatches;exports.enableCursor=enableCursor;exports.eventTupleToStore=eventTupleToStore;exports.filterEventStoreDefs=filterEventStoreDefs;exports.filterHash=filterHash;exports.findChildren=findChildren;exports.findElements=findElements;exports.flexibleCompare=flexibleCompare;exports.forceClassName=forceClassName;exports.formatDate=formatDate;exports.formatIsoTimeString=formatIsoTimeString;exports.formatRange=formatRange;exports.getAllDayHtml=getAllDayHtml;exports.getClippingParents=getClippingParents;exports.getDayClasses=getDayClasses;exports.getElSeg=getElSeg;exports.getRectCenter=getRectCenter;exports.getRelevantEvents=getRelevantEvents;exports.globalDefaults=globalDefaults;exports.greatestDurationDenominator=greatestDurationDenominator;exports.hasBgRendering=hasBgRendering;exports.htmlEscape=htmlEscape;exports.htmlToElement=htmlToElement;exports.insertAfterElement=insertAfterElement;exports.interactionSettingsStore=interactionSettingsStore;exports.interactionSettingsToStore=interactionSettingsToStore;exports.intersectRanges=intersectRanges;exports.intersectRects=intersectRects;exports.isArraysEqual=isArraysEqual;exports.isDateSpansEqual=isDateSpansEqual;exports.isInt=isInt;exports.isInteractionValid=isInteractionValid;exports.isMultiDayRange=isMultiDayRange;exports.isPropsEqual=isPropsEqual;exports.isPropsValid=isPropsValid;exports.isSingleDay=isSingleDay;exports.isValidDate=isValidDate;exports.listenBySelector=listenBySelector;exports.mapHash=mapHash;exports.matchCellWidths=matchCellWidths;exports.memoize=memoize;exports.memoizeOutput=memoizeOutput;exports.memoizeRendering=memoizeRendering;exports.mergeEventStores=mergeEventStores;exports.multiplyDuration=multiplyDuration;exports.padStart=padStart;exports.parseBusinessHours=parseBusinessHours;exports.parseDragMeta=parseDragMeta;exports.parseEventDef=parseEventDef;exports.parseFieldSpecs=parseFieldSpecs;exports.parseMarker=parse;exports.pointInsideRect=pointInsideRect;exports.prependToElement=prependToElement;exports.preventContextMenu=preventContextMenu;exports.preventDefault=preventDefault;exports.preventSelection=preventSelection;exports.processScopedUiProps=processScopedUiProps;exports.rangeContainsMarker=rangeContainsMarker;exports.rangeContainsRange=rangeContainsRange;exports.rangesEqual=rangesEqual;exports.rangesIntersect=rangesIntersect;exports.refineProps=refineProps;exports.removeElement=removeElement;exports.removeExact=removeExact;exports.renderDateCell=renderDateCell;exports.requestJson=requestJson;exports.sliceEventStore=sliceEventStore;exports.startOfDay=startOfDay;exports.subtractInnerElHeight=subtractInnerElHeight;exports.translateRect=translateRect;exports.uncompensateScroll=uncompensateScroll;exports.undistributeHeight=undistributeHeight;exports.unpromisify=unpromisify;exports.version=version;exports.whenTransitionDone=whenTransitionDone;exports.wholeDivideDurations=wholeDivideDurations;Object.defineProperty(exports,'__esModule',{value:true});}));/*!
FullCalendar Moment Timezone Plugin v4.4.2
Docs & License: https://fullcalendar.io/
(c) 2019 Adam Shaw
*/(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports,require('moment'),require('moment-timezone/builds/moment-timezone-with-data'),require('@fullcalendar/core')):typeof define==='function'&&define.amd?define(['exports','moment','moment-timezone/builds/moment-timezone-with-data','@fullcalendar/core'],factory):(global=global||self,factory(global.FullCalendarMomentTimezone={},global.moment,global.moment,global.FullCalendar));}(this,function(exports,momentNs,momentTimezoneWithData,core){'use strict';/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return extendStatics(d,b);};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}
var moment=momentNs;var MomentNamedTimeZone=(function(_super){__extends(MomentNamedTimeZone,_super);function MomentNamedTimeZone(){return _super!==null&&_super.apply(this,arguments)||this;}
MomentNamedTimeZone.prototype.offsetForArray=function(a){return moment.tz(a,this.timeZoneName).utcOffset();};MomentNamedTimeZone.prototype.timestampToArray=function(ms){return moment.tz(ms,this.timeZoneName).toArray();};return MomentNamedTimeZone;}(core.NamedTimeZoneImpl));var main=core.createPlugin({namedTimeZonedImpl:MomentNamedTimeZone});exports.default=main;Object.defineProperty(exports,'__esModule',{value:true});}));/*!
FullCalendar Bootstrap Plugin v4.4.2
Docs & License: https://fullcalendar.io/
(c) 2019 Adam Shaw
*/!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@fullcalendar/core")):"function"==typeof define&&define.amd?define(["exports","@fullcalendar/core"],t):t((e=e||self).FullCalendarBootstrap={},e.FullCalendar)}(this,(function(e,t){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(t.Theme);r.prototype.classes={widget:"fc-bootstrap",tableGrid:"table-bordered",tableList:"table",tableListHeading:"table-active",buttonGroup:"btn-group",button:"btn btn-primary",buttonActive:"active",today:"alert alert-info",popover:"card card-primary",popoverHeader:"card-header",popoverContent:"card-body",headerRow:"table-bordered",dayRow:"table-bordered",listView:"card card-primary"},r.prototype.baseIconClass="fa",r.prototype.iconClasses={close:"fa-times",prev:"fa-chevron-left",next:"fa-chevron-right",prevYear:"fa-angle-double-left",nextYear:"fa-angle-double-right"},r.prototype.iconOverrideOption="bootstrapFontAwesome",r.prototype.iconOverrideCustomButtonOption="bootstrapFontAwesome",r.prototype.iconOverridePrefix="fa-";var a=t.createPlugin({themeClasses:{bootstrap:r}});e.BootstrapTheme=r,e.default=a,Object.defineProperty(e,"__esModule",{value:!0})}));/*!
FullCalendar Day Grid Plugin v4.4.2
Docs & License: https://fullcalendar.io/
(c) 2019 Adam Shaw
*/(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports,require('@fullcalendar/core')):typeof define==='function'&&define.amd?define(['exports','@fullcalendar/core'],factory):(global=global||self,factory(global.FullCalendarDayGrid={},global.FullCalendar));}(this,function(exports,core){'use strict';/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return extendStatics(d,b);};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}
var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}
return t;};return __assign.apply(this,arguments);};var DayGridDateProfileGenerator=(function(_super){__extends(DayGridDateProfileGenerator,_super);function DayGridDateProfileGenerator(){return _super!==null&&_super.apply(this,arguments)||this;}
DayGridDateProfileGenerator.prototype.buildRenderRange=function(currentRange,currentRangeUnit,isRangeAllDay){var dateEnv=this.dateEnv;var renderRange=_super.prototype.buildRenderRange.call(this,currentRange,currentRangeUnit,isRangeAllDay);var start=renderRange.start;var end=renderRange.end;var endOfWeek;if(/^(year|month)$/.test(currentRangeUnit)){start=dateEnv.startOfWeek(start);endOfWeek=dateEnv.startOfWeek(end);if(endOfWeek.valueOf()!==end.valueOf()){end=core.addWeeks(endOfWeek,1);}}
if(this.options.monthMode&&this.options.fixedWeekCount){var rowCnt=Math.ceil(core.diffWeeks(start,end));end=core.addWeeks(end,6-rowCnt);}
return{start:start,end:end};};return DayGridDateProfileGenerator;}(core.DateProfileGenerator));var Popover=(function(){function Popover(options){var _this=this;this.isHidden=true;this.margin=10;this.documentMousedown=function(ev){if(_this.el&&!_this.el.contains(ev.target)){_this.hide();}};this.options=options;}
Popover.prototype.show=function(){if(this.isHidden){if(!this.el){this.render();}
this.el.style.display='';this.position();this.isHidden=false;this.trigger('show');}};Popover.prototype.hide=function(){if(!this.isHidden){this.el.style.display='none';this.isHidden=true;this.trigger('hide');}};Popover.prototype.render=function(){var _this=this;var options=this.options;var el=this.el=core.createElement('div',{className:'fc-popover '+(options.className||''),style:{top:'0',left:'0'}});if(typeof options.content==='function'){options.content(el);}
options.parentEl.appendChild(el);core.listenBySelector(el,'click','.fc-close',function(ev){_this.hide();});if(options.autoHide){document.addEventListener('mousedown',this.documentMousedown);}};Popover.prototype.destroy=function(){this.hide();if(this.el){core.removeElement(this.el);this.el=null;}
document.removeEventListener('mousedown',this.documentMousedown);};Popover.prototype.position=function(){var options=this.options;var el=this.el;var elDims=el.getBoundingClientRect();var origin=core.computeRect(el.offsetParent);var clippingRect=core.computeClippingRect(options.parentEl);var top;var left;top=options.top||0;if(options.left!==undefined){left=options.left;}
else if(options.right!==undefined){left=options.right-elDims.width;}
else{left=0;}
top=Math.min(top,clippingRect.bottom-elDims.height-this.margin);top=Math.max(top,clippingRect.top+this.margin);left=Math.min(left,clippingRect.right-elDims.width-this.margin);left=Math.max(left,clippingRect.left+this.margin);core.applyStyle(el,{top:top-origin.top,left:left-origin.left});};Popover.prototype.trigger=function(name){if(this.options[name]){this.options[name].apply(this,Array.prototype.slice.call(arguments,1));}};return Popover;}());var SimpleDayGridEventRenderer=(function(_super){__extends(SimpleDayGridEventRenderer,_super);function SimpleDayGridEventRenderer(){return _super!==null&&_super.apply(this,arguments)||this;}
SimpleDayGridEventRenderer.prototype.renderSegHtml=function(seg,mirrorInfo){var context=this.context;var eventRange=seg.eventRange;var eventDef=eventRange.def;var eventUi=eventRange.ui;var allDay=eventDef.allDay;var isDraggable=core.computeEventDraggable(context,eventDef,eventUi);var isResizableFromStart=allDay&&seg.isStart&&core.computeEventStartResizable(context,eventDef,eventUi);var isResizableFromEnd=allDay&&seg.isEnd&&core.computeEventEndResizable(context,eventDef,eventUi);var classes=this.getSegClasses(seg,isDraggable,isResizableFromStart||isResizableFromEnd,mirrorInfo);var skinCss=core.cssToStr(this.getSkinCss(eventUi));var timeHtml='';var timeText;var titleHtml;classes.unshift('fc-day-grid-event','fc-h-event');if(seg.isStart){timeText=this.getTimeText(eventRange);if(timeText){timeHtml='<span class="fc-time">'+core.htmlEscape(timeText)+'</span>';}}
titleHtml='<span class="fc-title">'+
(core.htmlEscape(eventDef.title||'')||'&nbsp;')+
'</span>';return '<a class="'+classes.join(' ')+'"'+
(eventDef.url?' href="'+core.htmlEscape(eventDef.url)+'"':'')+
(skinCss?' style="'+skinCss+'"':'')+
'>'+
'<div class="fc-content">'+
(context.options.dir==='rtl'?titleHtml+' '+timeHtml:timeHtml+' '+titleHtml)+
'</div>'+
(isResizableFromStart?'<div class="fc-resizer fc-start-resizer"></div>':'')+
(isResizableFromEnd?'<div class="fc-resizer fc-end-resizer"></div>':'')+
'</a>';};SimpleDayGridEventRenderer.prototype.computeEventTimeFormat=function(){return{hour:'numeric',minute:'2-digit',omitZeroMinute:true,meridiem:'narrow'};};SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd=function(){return false;};return SimpleDayGridEventRenderer;}(core.FgEventRenderer));var DayGridEventRenderer=(function(_super){__extends(DayGridEventRenderer,_super);function DayGridEventRenderer(dayGrid){var _this=_super.call(this)||this;_this.dayGrid=dayGrid;return _this;}
DayGridEventRenderer.prototype.attachSegs=function(segs,mirrorInfo){var rowStructs=this.rowStructs=this.renderSegRows(segs);this.dayGrid.rowEls.forEach(function(rowNode,i){rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);});if(!mirrorInfo){this.dayGrid.removeSegPopover();}};DayGridEventRenderer.prototype.detachSegs=function(){var rowStructs=this.rowStructs||[];var rowStruct;while((rowStruct=rowStructs.pop())){core.removeElement(rowStruct.tbodyEl);}
this.rowStructs=null;};DayGridEventRenderer.prototype.renderSegRows=function(segs){var rowStructs=[];var segRows;var row;segRows=this.groupSegRows(segs);for(row=0;row<segRows.length;row++){rowStructs.push(this.renderSegRow(row,segRows[row]));}
return rowStructs;};DayGridEventRenderer.prototype.renderSegRow=function(row,rowSegs){var isRtl=this.context.isRtl;var dayGrid=this.dayGrid;var colCnt=dayGrid.colCnt;var segLevels=this.buildSegLevels(rowSegs);var levelCnt=Math.max(1,segLevels.length);var tbody=document.createElement('tbody');var segMatrix=[];var cellMatrix=[];var loneCellMatrix=[];var i;var levelSegs;var col;var tr;var j;var seg;var td;function emptyCellsUntil(endCol){while(col<endCol){td=(loneCellMatrix[i-1]||[])[col];if(td){td.rowSpan=(td.rowSpan||1)+1;}
else{td=document.createElement('td');tr.appendChild(td);}
cellMatrix[i][col]=td;loneCellMatrix[i][col]=td;col++;}}
for(i=0;i<levelCnt;i++){levelSegs=segLevels[i];col=0;tr=document.createElement('tr');segMatrix.push([]);cellMatrix.push([]);loneCellMatrix.push([]);if(levelSegs){for(j=0;j<levelSegs.length;j++){seg=levelSegs[j];var leftCol=isRtl?(colCnt-1-seg.lastCol):seg.firstCol;var rightCol=isRtl?(colCnt-1-seg.firstCol):seg.lastCol;emptyCellsUntil(leftCol);td=core.createElement('td',{className:'fc-event-container'},seg.el);if(leftCol!==rightCol){td.colSpan=rightCol-leftCol+1;}
else{loneCellMatrix[i][col]=td;}
while(col<=rightCol){cellMatrix[i][col]=td;segMatrix[i][col]=seg;col++;}
tr.appendChild(td);}}
emptyCellsUntil(colCnt);var introHtml=dayGrid.renderProps.renderIntroHtml();if(introHtml){if(isRtl){core.appendToElement(tr,introHtml);}
else{core.prependToElement(tr,introHtml);}}
tbody.appendChild(tr);}
return{row:row,tbodyEl:tbody,cellMatrix:cellMatrix,segMatrix:segMatrix,segLevels:segLevels,segs:rowSegs};};DayGridEventRenderer.prototype.buildSegLevels=function(segs){var isRtl=this.context.isRtl;var colCnt=this.dayGrid.colCnt;var levels=[];var i;var seg;var j;segs=this.sortEventSegs(segs);for(i=0;i<segs.length;i++){seg=segs[i];for(j=0;j<levels.length;j++){if(!isDaySegCollision(seg,levels[j])){break;}}
seg.level=j;seg.leftCol=isRtl?(colCnt-1-seg.lastCol):seg.firstCol;seg.rightCol=isRtl?(colCnt-1-seg.firstCol):seg.lastCol;(levels[j]||(levels[j]=[])).push(seg);}
for(j=0;j<levels.length;j++){levels[j].sort(compareDaySegCols);}
return levels;};DayGridEventRenderer.prototype.groupSegRows=function(segs){var segRows=[];var i;for(i=0;i<this.dayGrid.rowCnt;i++){segRows.push([]);}
for(i=0;i<segs.length;i++){segRows[segs[i].row].push(segs[i]);}
return segRows;};DayGridEventRenderer.prototype.computeDisplayEventEnd=function(){return this.dayGrid.colCnt===1;};return DayGridEventRenderer;}(SimpleDayGridEventRenderer));function isDaySegCollision(seg,otherSegs){var i;var otherSeg;for(i=0;i<otherSegs.length;i++){otherSeg=otherSegs[i];if(otherSeg.firstCol<=seg.lastCol&&otherSeg.lastCol>=seg.firstCol){return true;}}
return false;}
function compareDaySegCols(a,b){return a.leftCol-b.leftCol;}
var DayGridMirrorRenderer=(function(_super){__extends(DayGridMirrorRenderer,_super);function DayGridMirrorRenderer(){return _super!==null&&_super.apply(this,arguments)||this;}
DayGridMirrorRenderer.prototype.attachSegs=function(segs,mirrorInfo){var sourceSeg=mirrorInfo.sourceSeg;var rowStructs=this.rowStructs=this.renderSegRows(segs);this.dayGrid.rowEls.forEach(function(rowNode,row){var skeletonEl=core.htmlToElement('<div class="fc-mirror-skeleton"><table></table></div>');var skeletonTopEl;var skeletonTop;if(sourceSeg&&sourceSeg.row===row){skeletonTopEl=sourceSeg.el;}
else{skeletonTopEl=rowNode.querySelector('.fc-content-skeleton tbody');if(!skeletonTopEl){skeletonTopEl=rowNode.querySelector('.fc-content-skeleton table');}}
skeletonTop=skeletonTopEl.getBoundingClientRect().top-
rowNode.getBoundingClientRect().top;skeletonEl.style.top=skeletonTop+'px';skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);rowNode.appendChild(skeletonEl);});};return DayGridMirrorRenderer;}(DayGridEventRenderer));var EMPTY_CELL_HTML='<td style="pointer-events:none"></td>';var DayGridFillRenderer=(function(_super){__extends(DayGridFillRenderer,_super);function DayGridFillRenderer(dayGrid){var _this=_super.call(this)||this;_this.fillSegTag='td';_this.dayGrid=dayGrid;return _this;}
DayGridFillRenderer.prototype.renderSegs=function(type,context,segs){if(type==='bgEvent'){segs=segs.filter(function(seg){return seg.eventRange.def.allDay;});}
_super.prototype.renderSegs.call(this,type,context,segs);};DayGridFillRenderer.prototype.attachSegs=function(type,segs){var els=[];var i;var seg;var skeletonEl;for(i=0;i<segs.length;i++){seg=segs[i];skeletonEl=this.renderFillRow(type,seg);this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);els.push(skeletonEl);}
return els;};DayGridFillRenderer.prototype.renderFillRow=function(type,seg){var dayGrid=this.dayGrid;var isRtl=this.context.isRtl;var colCnt=dayGrid.colCnt;var leftCol=isRtl?(colCnt-1-seg.lastCol):seg.firstCol;var rightCol=isRtl?(colCnt-1-seg.firstCol):seg.lastCol;var startCol=leftCol;var endCol=rightCol+1;var className;var skeletonEl;var trEl;if(type==='businessHours'){className='bgevent';}
else{className=type.toLowerCase();}
skeletonEl=core.htmlToElement('<div class="fc-'+className+'-skeleton">'+
'<table><tr></tr></table>'+
'</div>');trEl=skeletonEl.getElementsByTagName('tr')[0];if(startCol>0){core.appendToElement(trEl,new Array(startCol+1).join(EMPTY_CELL_HTML));}
seg.el.colSpan=endCol-startCol;trEl.appendChild(seg.el);if(endCol<colCnt){core.appendToElement(trEl,new Array(colCnt-endCol+1).join(EMPTY_CELL_HTML));}
var introHtml=dayGrid.renderProps.renderIntroHtml();if(introHtml){if(isRtl){core.appendToElement(trEl,introHtml);}
else{core.prependToElement(trEl,introHtml);}}
return skeletonEl;};return DayGridFillRenderer;}(core.FillRenderer));var DayTile=(function(_super){__extends(DayTile,_super);function DayTile(el){var _this=_super.call(this,el)||this;var eventRenderer=_this.eventRenderer=new DayTileEventRenderer(_this);var renderFrame=_this.renderFrame=core.memoizeRendering(_this._renderFrame);_this.renderFgEvents=core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer),eventRenderer.unrender.bind(eventRenderer),[renderFrame]);_this.renderEventSelection=core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer),eventRenderer.unselectByInstanceId.bind(eventRenderer),[_this.renderFgEvents]);_this.renderEventDrag=core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer),eventRenderer.showByHash.bind(eventRenderer),[renderFrame]);_this.renderEventResize=core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer),eventRenderer.showByHash.bind(eventRenderer),[renderFrame]);return _this;}
DayTile.prototype.firstContext=function(context){context.calendar.registerInteractiveComponent(this,{el:this.el,useEventCenter:false});};DayTile.prototype.render=function(props,context){this.renderFrame(props.date);this.renderFgEvents(context,props.fgSegs);this.renderEventSelection(props.eventSelection);this.renderEventDrag(props.eventDragInstances);this.renderEventResize(props.eventResizeInstances);};DayTile.prototype.destroy=function(){_super.prototype.destroy.call(this);this.renderFrame.unrender();this.context.calendar.unregisterInteractiveComponent(this);};DayTile.prototype._renderFrame=function(date){var _a=this.context,theme=_a.theme,dateEnv=_a.dateEnv,options=_a.options;var title=dateEnv.format(date,core.createFormatter(options.dayPopoverFormat));this.el.innerHTML='<div class="fc-header '+theme.getClass('popoverHeader')+'">'+
'<span class="fc-title">'+
core.htmlEscape(title)+
'</span>'+
'<span class="fc-close '+theme.getIconClass('close')+'"></span>'+
'</div>'+
'<div class="fc-body '+theme.getClass('popoverContent')+'">'+
'<div class="fc-event-container"></div>'+
'</div>';this.segContainerEl=this.el.querySelector('.fc-event-container');};DayTile.prototype.queryHit=function(positionLeft,positionTop,elWidth,elHeight){var date=this.props.date;if(positionLeft<elWidth&&positionTop<elHeight){return{component:this,dateSpan:{allDay:true,range:{start:date,end:core.addDays(date,1)}},dayEl:this.el,rect:{left:0,top:0,right:elWidth,bottom:elHeight},layer:1};}};return DayTile;}(core.DateComponent));var DayTileEventRenderer=(function(_super){__extends(DayTileEventRenderer,_super);function DayTileEventRenderer(dayTile){var _this=_super.call(this)||this;_this.dayTile=dayTile;return _this;}
DayTileEventRenderer.prototype.attachSegs=function(segs){for(var _i=0,segs_1=segs;_i<segs_1.length;_i++){var seg=segs_1[_i];this.dayTile.segContainerEl.appendChild(seg.el);}};DayTileEventRenderer.prototype.detachSegs=function(segs){for(var _i=0,segs_2=segs;_i<segs_2.length;_i++){var seg=segs_2[_i];core.removeElement(seg.el);}};return DayTileEventRenderer;}(SimpleDayGridEventRenderer));var DayBgRow=(function(){function DayBgRow(context){this.context=context;}
DayBgRow.prototype.renderHtml=function(props){var parts=[];if(props.renderIntroHtml){parts.push(props.renderIntroHtml());}
for(var _i=0,_a=props.cells;_i<_a.length;_i++){var cell=_a[_i];parts.push(renderCellHtml(cell.date,props.dateProfile,this.context,cell.htmlAttrs));}
if(!props.cells.length){parts.push('<td class="fc-day '+this.context.theme.getClass('widgetContent')+'"></td>');}
if(this.context.options.dir==='rtl'){parts.reverse();}
return '<tr>'+parts.join('')+'</tr>';};return DayBgRow;}());function renderCellHtml(date,dateProfile,context,otherAttrs){var dateEnv=context.dateEnv,theme=context.theme;var isDateValid=core.rangeContainsMarker(dateProfile.activeRange,date);var classes=core.getDayClasses(date,dateProfile,context);classes.unshift('fc-day',theme.getClass('widgetContent'));return '<td class="'+classes.join(' ')+'"'+
(isDateValid?' data-date="'+dateEnv.formatIso(date,{omitTime:true})+'"':'')+
(otherAttrs?' '+otherAttrs:'')+
'></td>';}
var DAY_NUM_FORMAT=core.createFormatter({day:'numeric'});var WEEK_NUM_FORMAT=core.createFormatter({week:'numeric'});var DayGrid=(function(_super){__extends(DayGrid,_super);function DayGrid(el,renderProps){var _this=_super.call(this,el)||this;_this.bottomCoordPadding=0;_this.isCellSizesDirty=false;_this.renderProps=renderProps;var eventRenderer=_this.eventRenderer=new DayGridEventRenderer(_this);var fillRenderer=_this.fillRenderer=new DayGridFillRenderer(_this);_this.mirrorRenderer=new DayGridMirrorRenderer(_this);var renderCells=_this.renderCells=core.memoizeRendering(_this._renderCells,_this._unrenderCells);_this.renderBusinessHours=core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer,'businessHours'),fillRenderer.unrender.bind(fillRenderer,'businessHours'),[renderCells]);_this.renderDateSelection=core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer,'highlight'),fillRenderer.unrender.bind(fillRenderer,'highlight'),[renderCells]);_this.renderBgEvents=core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer,'bgEvent'),fillRenderer.unrender.bind(fillRenderer,'bgEvent'),[renderCells]);_this.renderFgEvents=core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer),eventRenderer.unrender.bind(eventRenderer),[renderCells]);_this.renderEventSelection=core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer),eventRenderer.unselectByInstanceId.bind(eventRenderer),[_this.renderFgEvents]);_this.renderEventDrag=core.memoizeRendering(_this._renderEventDrag,_this._unrenderEventDrag,[renderCells]);_this.renderEventResize=core.memoizeRendering(_this._renderEventResize,_this._unrenderEventResize,[renderCells]);return _this;}
DayGrid.prototype.render=function(props,context){var cells=props.cells;this.rowCnt=cells.length;this.colCnt=cells[0].length;this.renderCells(cells,props.isRigid);this.renderBusinessHours(context,props.businessHourSegs);this.renderDateSelection(context,props.dateSelectionSegs);this.renderBgEvents(context,props.bgEventSegs);this.renderFgEvents(context,props.fgEventSegs);this.renderEventSelection(props.eventSelection);this.renderEventDrag(props.eventDrag);this.renderEventResize(props.eventResize);if(this.segPopoverTile){this.updateSegPopoverTile();}};DayGrid.prototype.destroy=function(){_super.prototype.destroy.call(this);this.renderCells.unrender();};DayGrid.prototype.getCellRange=function(row,col){var start=this.props.cells[row][col].date;var end=core.addDays(start,1);return{start:start,end:end};};DayGrid.prototype.updateSegPopoverTile=function(date,segs){var ownProps=this.props;this.segPopoverTile.receiveProps({date:date||this.segPopoverTile.props.date,fgSegs:segs||this.segPopoverTile.props.fgSegs,eventSelection:ownProps.eventSelection,eventDragInstances:ownProps.eventDrag?ownProps.eventDrag.affectedInstances:null,eventResizeInstances:ownProps.eventResize?ownProps.eventResize.affectedInstances:null},this.context);};DayGrid.prototype._renderCells=function(cells,isRigid){var _a=this.context,calendar=_a.calendar,view=_a.view,isRtl=_a.isRtl,dateEnv=_a.dateEnv;var _b=this,rowCnt=_b.rowCnt,colCnt=_b.colCnt;var html='';var row;var col;for(row=0;row<rowCnt;row++){html+=this.renderDayRowHtml(row,isRigid);}
this.el.innerHTML=html;this.rowEls=core.findElements(this.el,'.fc-row');this.cellEls=core.findElements(this.el,'.fc-day, .fc-disabled-day');if(isRtl){this.cellEls.reverse();}
this.rowPositions=new core.PositionCache(this.el,this.rowEls,false,true);this.colPositions=new core.PositionCache(this.el,this.cellEls.slice(0,colCnt),true,false);for(row=0;row<rowCnt;row++){for(col=0;col<colCnt;col++){calendar.publiclyTrigger('dayRender',[{date:dateEnv.toDate(cells[row][col].date),el:this.getCellEl(row,col),view:view}]);}}
this.isCellSizesDirty=true;};DayGrid.prototype._unrenderCells=function(){this.removeSegPopover();};DayGrid.prototype.renderDayRowHtml=function(row,isRigid){var theme=this.context.theme;var classes=['fc-row','fc-week',theme.getClass('dayRow')];if(isRigid){classes.push('fc-rigid');}
var bgRow=new DayBgRow(this.context);return ''+
'<div class="'+classes.join(' ')+'">'+
'<div class="fc-bg">'+
'<table class="'+theme.getClass('tableGrid')+'">'+
bgRow.renderHtml({cells:this.props.cells[row],dateProfile:this.props.dateProfile,renderIntroHtml:this.renderProps.renderBgIntroHtml})+
'</table>'+
'</div>'+
'<div class="fc-content-skeleton">'+
'<table>'+
(this.getIsNumbersVisible()?'<thead>'+
this.renderNumberTrHtml(row)+
'</thead>':'')+
'</table>'+
'</div>'+
'</div>';};DayGrid.prototype.getIsNumbersVisible=function(){return this.getIsDayNumbersVisible()||this.renderProps.cellWeekNumbersVisible||this.renderProps.colWeekNumbersVisible;};DayGrid.prototype.getIsDayNumbersVisible=function(){return this.rowCnt>1;};DayGrid.prototype.renderNumberTrHtml=function(row){var isRtl=this.context.isRtl;var intro=this.renderProps.renderNumberIntroHtml(row,this);return ''+
'<tr>'+
(isRtl?'':intro)+
this.renderNumberCellsHtml(row)+
(isRtl?intro:'')+
'</tr>';};DayGrid.prototype.renderNumberCellsHtml=function(row){var htmls=[];var col;var date;for(col=0;col<this.colCnt;col++){date=this.props.cells[row][col].date;htmls.push(this.renderNumberCellHtml(date));}
if(this.context.isRtl){htmls.reverse();}
return htmls.join('');};DayGrid.prototype.renderNumberCellHtml=function(date){var _a=this.context,dateEnv=_a.dateEnv,options=_a.options;var html='';var isDateValid=core.rangeContainsMarker(this.props.dateProfile.activeRange,date);var isDayNumberVisible=this.getIsDayNumbersVisible()&&isDateValid;var classes;var weekCalcFirstDow;if(!isDayNumberVisible&&!this.renderProps.cellWeekNumbersVisible){return '<td></td>';}
classes=core.getDayClasses(date,this.props.dateProfile,this.context);classes.unshift('fc-day-top');if(this.renderProps.cellWeekNumbersVisible){weekCalcFirstDow=dateEnv.weekDow;}
html+='<td class="'+classes.join(' ')+'"'+
(isDateValid?' data-date="'+dateEnv.formatIso(date,{omitTime:true})+'"':'')+
'>';if(this.renderProps.cellWeekNumbersVisible&&(date.getUTCDay()===weekCalcFirstDow)){html+=core.buildGotoAnchorHtml(options,dateEnv,{date:date,type:'week'},{'class':'fc-week-number'},dateEnv.format(date,WEEK_NUM_FORMAT));}
if(isDayNumberVisible){html+=core.buildGotoAnchorHtml(options,dateEnv,date,{'class':'fc-day-number'},dateEnv.format(date,DAY_NUM_FORMAT));}
html+='</td>';return html;};DayGrid.prototype.updateSize=function(isResize){var calendar=this.context.calendar;var _a=this,fillRenderer=_a.fillRenderer,eventRenderer=_a.eventRenderer,mirrorRenderer=_a.mirrorRenderer;if(isResize||this.isCellSizesDirty||calendar.isEventsUpdated){this.buildPositionCaches();this.isCellSizesDirty=false;}
fillRenderer.computeSizes(isResize);eventRenderer.computeSizes(isResize);mirrorRenderer.computeSizes(isResize);fillRenderer.assignSizes(isResize);eventRenderer.assignSizes(isResize);mirrorRenderer.assignSizes(isResize);};DayGrid.prototype.buildPositionCaches=function(){this.buildColPositions();this.buildRowPositions();};DayGrid.prototype.buildColPositions=function(){this.colPositions.build();};DayGrid.prototype.buildRowPositions=function(){this.rowPositions.build();this.rowPositions.bottoms[this.rowCnt-1]+=this.bottomCoordPadding;};DayGrid.prototype.positionToHit=function(leftPosition,topPosition){var _a=this,colPositions=_a.colPositions,rowPositions=_a.rowPositions;var col=colPositions.leftToIndex(leftPosition);var row=rowPositions.topToIndex(topPosition);if(row!=null&&col!=null){return{row:row,col:col,dateSpan:{range:this.getCellRange(row,col),allDay:true},dayEl:this.getCellEl(row,col),relativeRect:{left:colPositions.lefts[col],right:colPositions.rights[col],top:rowPositions.tops[row],bottom:rowPositions.bottoms[row]}};}};DayGrid.prototype.getCellEl=function(row,col){return this.cellEls[row*this.colCnt+col];};DayGrid.prototype._renderEventDrag=function(state){if(state){this.eventRenderer.hideByHash(state.affectedInstances);this.fillRenderer.renderSegs('highlight',this.context,state.segs);}};DayGrid.prototype._unrenderEventDrag=function(state){if(state){this.eventRenderer.showByHash(state.affectedInstances);this.fillRenderer.unrender('highlight',this.context);}};DayGrid.prototype._renderEventResize=function(state){if(state){this.eventRenderer.hideByHash(state.affectedInstances);this.fillRenderer.renderSegs('highlight',this.context,state.segs);this.mirrorRenderer.renderSegs(this.context,state.segs,{isResizing:true,sourceSeg:state.sourceSeg});}};DayGrid.prototype._unrenderEventResize=function(state){if(state){this.eventRenderer.showByHash(state.affectedInstances);this.fillRenderer.unrender('highlight',this.context);this.mirrorRenderer.unrender(this.context,state.segs,{isResizing:true,sourceSeg:state.sourceSeg});}};DayGrid.prototype.removeSegPopover=function(){if(this.segPopover){this.segPopover.hide();}};DayGrid.prototype.limitRows=function(levelLimit){var rowStructs=this.eventRenderer.rowStructs||[];var row;var rowLevelLimit;for(row=0;row<rowStructs.length;row++){this.unlimitRow(row);if(!levelLimit){rowLevelLimit=false;}
else if(typeof levelLimit==='number'){rowLevelLimit=levelLimit;}
else{rowLevelLimit=this.computeRowLevelLimit(row);}
if(rowLevelLimit!==false){this.limitRow(row,rowLevelLimit);}}};DayGrid.prototype.computeRowLevelLimit=function(row){var rowEl=this.rowEls[row];var rowBottom=rowEl.getBoundingClientRect().bottom;var trEls=core.findChildren(this.eventRenderer.rowStructs[row].tbodyEl);var i;var trEl;for(i=0;i<trEls.length;i++){trEl=trEls[i];trEl.classList.remove('fc-limited');if(trEl.getBoundingClientRect().bottom>rowBottom){return i;}}
return false;};DayGrid.prototype.limitRow=function(row,levelLimit){var _this=this;var colCnt=this.colCnt;var isRtl=this.context.isRtl;var rowStruct=this.eventRenderer.rowStructs[row];var moreNodes=[];var col=0;var levelSegs;var cellMatrix;var limitedNodes;var i;var seg;var segsBelow;var totalSegsBelow;var colSegsBelow;var td;var rowSpan;var segMoreNodes;var j;var moreTd;var moreWrap;var moreLink;var emptyCellsUntil=function(endCol){while(col<endCol){segsBelow=_this.getCellSegs(row,col,levelLimit);if(segsBelow.length){td=cellMatrix[levelLimit-1][col];moreLink=_this.renderMoreLink(row,col,segsBelow);moreWrap=core.createElement('div',null,moreLink);td.appendChild(moreWrap);moreNodes.push(moreWrap);}
col++;}};if(levelLimit&&levelLimit<rowStruct.segLevels.length){levelSegs=rowStruct.segLevels[levelLimit-1];cellMatrix=rowStruct.cellMatrix;limitedNodes=core.findChildren(rowStruct.tbodyEl).slice(levelLimit);limitedNodes.forEach(function(node){node.classList.add('fc-limited');});for(i=0;i<levelSegs.length;i++){seg=levelSegs[i];var leftCol=isRtl?(colCnt-1-seg.lastCol):seg.firstCol;var rightCol=isRtl?(colCnt-1-seg.firstCol):seg.lastCol;emptyCellsUntil(leftCol);colSegsBelow=[];totalSegsBelow=0;while(col<=rightCol){segsBelow=this.getCellSegs(row,col,levelLimit);colSegsBelow.push(segsBelow);totalSegsBelow+=segsBelow.length;col++;}
if(totalSegsBelow){td=cellMatrix[levelLimit-1][leftCol];rowSpan=td.rowSpan||1;segMoreNodes=[];for(j=0;j<colSegsBelow.length;j++){moreTd=core.createElement('td',{className:'fc-more-cell',rowSpan:rowSpan});segsBelow=colSegsBelow[j];moreLink=this.renderMoreLink(row,leftCol+j,[seg].concat(segsBelow));moreWrap=core.createElement('div',null,moreLink);moreTd.appendChild(moreWrap);segMoreNodes.push(moreTd);moreNodes.push(moreTd);}
td.classList.add('fc-limited');core.insertAfterElement(td,segMoreNodes);limitedNodes.push(td);}}
emptyCellsUntil(this.colCnt);rowStruct.moreEls=moreNodes;rowStruct.limitedEls=limitedNodes;}};DayGrid.prototype.unlimitRow=function(row){var rowStruct=this.eventRenderer.rowStructs[row];if(rowStruct.moreEls){rowStruct.moreEls.forEach(core.removeElement);rowStruct.moreEls=null;}
if(rowStruct.limitedEls){rowStruct.limitedEls.forEach(function(limitedEl){limitedEl.classList.remove('fc-limited');});rowStruct.limitedEls=null;}};DayGrid.prototype.renderMoreLink=function(row,col,hiddenSegs){var _this=this;var _a=this.context,calendar=_a.calendar,view=_a.view,dateEnv=_a.dateEnv,options=_a.options,isRtl=_a.isRtl;var a=core.createElement('a',{className:'fc-more'});a.innerText=this.getMoreLinkText(hiddenSegs.length);a.addEventListener('click',function(ev){var clickOption=options.eventLimitClick;var _col=isRtl?_this.colCnt-col-1:col;var date=_this.props.cells[row][_col].date;var moreEl=ev.currentTarget;var dayEl=_this.getCellEl(row,col);var allSegs=_this.getCellSegs(row,col);var reslicedAllSegs=_this.resliceDaySegs(allSegs,date);var reslicedHiddenSegs=_this.resliceDaySegs(hiddenSegs,date);if(typeof clickOption==='function'){clickOption=calendar.publiclyTrigger('eventLimitClick',[{date:dateEnv.toDate(date),allDay:true,dayEl:dayEl,moreEl:moreEl,segs:reslicedAllSegs,hiddenSegs:reslicedHiddenSegs,jsEvent:ev,view:view}]);}
if(clickOption==='popover'){_this.showSegPopover(row,col,moreEl,reslicedAllSegs);}
else if(typeof clickOption==='string'){calendar.zoomTo(date,clickOption);}});return a;};DayGrid.prototype.showSegPopover=function(row,col,moreLink,segs){var _this=this;var _a=this.context,calendar=_a.calendar,view=_a.view,theme=_a.theme,isRtl=_a.isRtl;var _col=isRtl?this.colCnt-col-1:col;var moreWrap=moreLink.parentNode;var topEl;var options;if(this.rowCnt===1){topEl=view.el;}
else{topEl=this.rowEls[row];}
options={className:'fc-more-popover '+theme.getClass('popover'),parentEl:view.el,top:core.computeRect(topEl).top,autoHide:true,content:function(el){_this.segPopoverTile=new DayTile(el);_this.updateSegPopoverTile(_this.props.cells[row][_col].date,segs);},hide:function(){_this.segPopoverTile.destroy();_this.segPopoverTile=null;_this.segPopover.destroy();_this.segPopover=null;}};if(isRtl){options.right=core.computeRect(moreWrap).right+1;}
else{options.left=core.computeRect(moreWrap).left-1;}
this.segPopover=new Popover(options);this.segPopover.show();calendar.releaseAfterSizingTriggers();};DayGrid.prototype.resliceDaySegs=function(segs,dayDate){var dayStart=dayDate;var dayEnd=core.addDays(dayStart,1);var dayRange={start:dayStart,end:dayEnd};var newSegs=[];for(var _i=0,segs_1=segs;_i<segs_1.length;_i++){var seg=segs_1[_i];var eventRange=seg.eventRange;var origRange=eventRange.range;var slicedRange=core.intersectRanges(origRange,dayRange);if(slicedRange){newSegs.push(__assign({},seg,{eventRange:{def:eventRange.def,ui:__assign({},eventRange.ui,{durationEditable:false}),instance:eventRange.instance,range:slicedRange},isStart:seg.isStart&&slicedRange.start.valueOf()===origRange.start.valueOf(),isEnd:seg.isEnd&&slicedRange.end.valueOf()===origRange.end.valueOf()}));}}
return newSegs;};DayGrid.prototype.getMoreLinkText=function(num){var opt=this.context.options.eventLimitText;if(typeof opt==='function'){return opt(num);}
else{return '+'+num+' '+opt;}};DayGrid.prototype.getCellSegs=function(row,col,startLevel){var segMatrix=this.eventRenderer.rowStructs[row].segMatrix;var level=startLevel||0;var segs=[];var seg;while(level<segMatrix.length){seg=segMatrix[level][col];if(seg){segs.push(seg);}
level++;}
return segs;};return DayGrid;}(core.DateComponent));var WEEK_NUM_FORMAT$1=core.createFormatter({week:'numeric'});var AbstractDayGridView=(function(_super){__extends(AbstractDayGridView,_super);function AbstractDayGridView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.processOptions=core.memoize(_this._processOptions);_this.renderSkeleton=core.memoizeRendering(_this._renderSkeleton,_this._unrenderSkeleton);_this.renderHeadIntroHtml=function(){var _a=_this.context,theme=_a.theme,options=_a.options;if(_this.colWeekNumbersVisible){return ''+
'<th class="fc-week-number '+theme.getClass('widgetHeader')+'" '+_this.weekNumberStyleAttr()+'>'+
'<span>'+
core.htmlEscape(options.weekLabel)+
'</span>'+
'</th>';}
return '';};_this.renderDayGridNumberIntroHtml=function(row,dayGrid){var _a=_this.context,options=_a.options,dateEnv=_a.dateEnv;var weekStart=dayGrid.props.cells[row][0].date;if(_this.colWeekNumbersVisible){return ''+
'<td class="fc-week-number" '+_this.weekNumberStyleAttr()+'>'+
core.buildGotoAnchorHtml(options,dateEnv,{date:weekStart,type:'week',forceOff:dayGrid.colCnt===1},dateEnv.format(weekStart,WEEK_NUM_FORMAT$1))+
'</td>';}
return '';};_this.renderDayGridBgIntroHtml=function(){var theme=_this.context.theme;if(_this.colWeekNumbersVisible){return '<td class="fc-week-number '+theme.getClass('widgetContent')+'" '+_this.weekNumberStyleAttr()+'></td>';}
return '';};_this.renderDayGridIntroHtml=function(){if(_this.colWeekNumbersVisible){return '<td class="fc-week-number" '+_this.weekNumberStyleAttr()+'></td>';}
return '';};return _this;}
AbstractDayGridView.prototype._processOptions=function(options){if(options.weekNumbers){if(options.weekNumbersWithinDays){this.cellWeekNumbersVisible=true;this.colWeekNumbersVisible=false;}
else{this.cellWeekNumbersVisible=false;this.colWeekNumbersVisible=true;}}
else{this.colWeekNumbersVisible=false;this.cellWeekNumbersVisible=false;}};AbstractDayGridView.prototype.render=function(props,context){_super.prototype.render.call(this,props,context);this.processOptions(context.options);this.renderSkeleton(context);};AbstractDayGridView.prototype.destroy=function(){_super.prototype.destroy.call(this);this.renderSkeleton.unrender();};AbstractDayGridView.prototype._renderSkeleton=function(context){this.el.classList.add('fc-dayGrid-view');this.el.innerHTML=this.renderSkeletonHtml();this.scroller=new core.ScrollComponent('hidden','auto');var dayGridContainerEl=this.scroller.el;this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);dayGridContainerEl.classList.add('fc-day-grid-container');var dayGridEl=core.createElement('div',{className:'fc-day-grid'});dayGridContainerEl.appendChild(dayGridEl);this.dayGrid=new DayGrid(dayGridEl,{renderNumberIntroHtml:this.renderDayGridNumberIntroHtml,renderBgIntroHtml:this.renderDayGridBgIntroHtml,renderIntroHtml:this.renderDayGridIntroHtml,colWeekNumbersVisible:this.colWeekNumbersVisible,cellWeekNumbersVisible:this.cellWeekNumbersVisible});};AbstractDayGridView.prototype._unrenderSkeleton=function(){this.el.classList.remove('fc-dayGrid-view');this.dayGrid.destroy();this.scroller.destroy();};AbstractDayGridView.prototype.renderSkeletonHtml=function(){var _a=this.context,theme=_a.theme,options=_a.options;return ''+
'<table class="'+theme.getClass('tableGrid')+'">'+
(options.columnHeader?'<thead class="fc-head">'+
'<tr>'+
'<td class="fc-head-container '+theme.getClass('widgetHeader')+'">&nbsp;</td>'+
'</tr>'+
'</thead>':'')+
'<tbody class="fc-body">'+
'<tr>'+
'<td class="'+theme.getClass('widgetContent')+'"></td>'+
'</tr>'+
'</tbody>'+
'</table>';};AbstractDayGridView.prototype.weekNumberStyleAttr=function(){if(this.weekNumberWidth!=null){return 'style="width:'+this.weekNumberWidth+'px"';}
return '';};AbstractDayGridView.prototype.hasRigidRows=function(){var eventLimit=this.context.options.eventLimit;return eventLimit&&typeof eventLimit!=='number';};AbstractDayGridView.prototype.updateSize=function(isResize,viewHeight,isAuto){_super.prototype.updateSize.call(this,isResize,viewHeight,isAuto);this.dayGrid.updateSize(isResize);};AbstractDayGridView.prototype.updateBaseSize=function(isResize,viewHeight,isAuto){var dayGrid=this.dayGrid;var eventLimit=this.context.options.eventLimit;var headRowEl=this.header?this.header.el:null;var scrollerHeight;var scrollbarWidths;if(!dayGrid.rowEls){if(!isAuto){scrollerHeight=this.computeScrollerHeight(viewHeight);this.scroller.setHeight(scrollerHeight);}
return;}
if(this.colWeekNumbersVisible){this.weekNumberWidth=core.matchCellWidths(core.findElements(this.el,'.fc-week-number'));}
this.scroller.clear();if(headRowEl){core.uncompensateScroll(headRowEl);}
dayGrid.removeSegPopover();if(eventLimit&&typeof eventLimit==='number'){dayGrid.limitRows(eventLimit);}
scrollerHeight=this.computeScrollerHeight(viewHeight);this.setGridHeight(scrollerHeight,isAuto);if(eventLimit&&typeof eventLimit!=='number'){dayGrid.limitRows(eventLimit);}
if(!isAuto){this.scroller.setHeight(scrollerHeight);scrollbarWidths=this.scroller.getScrollbarWidths();if(scrollbarWidths.left||scrollbarWidths.right){if(headRowEl){core.compensateScroll(headRowEl,scrollbarWidths);}
scrollerHeight=this.computeScrollerHeight(viewHeight);this.scroller.setHeight(scrollerHeight);}
this.scroller.lockOverflow(scrollbarWidths);}};AbstractDayGridView.prototype.computeScrollerHeight=function(viewHeight){return viewHeight-
core.subtractInnerElHeight(this.el,this.scroller.el);};AbstractDayGridView.prototype.setGridHeight=function(height,isAuto){if(this.context.options.monthMode){if(isAuto){height*=this.dayGrid.rowCnt/6;}
core.distributeHeight(this.dayGrid.rowEls,height,!isAuto);}
else{if(isAuto){core.undistributeHeight(this.dayGrid.rowEls);}
else{core.distributeHeight(this.dayGrid.rowEls,height,true);}}};AbstractDayGridView.prototype.computeDateScroll=function(duration){return{top:0};};AbstractDayGridView.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()};};AbstractDayGridView.prototype.applyDateScroll=function(scroll){if(scroll.top!==undefined){this.scroller.setScrollTop(scroll.top);}};return AbstractDayGridView;}(core.View));AbstractDayGridView.prototype.dateProfileGeneratorClass=DayGridDateProfileGenerator;var SimpleDayGrid=(function(_super){__extends(SimpleDayGrid,_super);function SimpleDayGrid(dayGrid){var _this=_super.call(this,dayGrid.el)||this;_this.slicer=new DayGridSlicer();_this.dayGrid=dayGrid;return _this;}
SimpleDayGrid.prototype.firstContext=function(context){context.calendar.registerInteractiveComponent(this,{el:this.dayGrid.el});};SimpleDayGrid.prototype.destroy=function(){_super.prototype.destroy.call(this);this.context.calendar.unregisterInteractiveComponent(this);};SimpleDayGrid.prototype.render=function(props,context){var dayGrid=this.dayGrid;var dateProfile=props.dateProfile,dayTable=props.dayTable;dayGrid.receiveContext(context);dayGrid.receiveProps(__assign({},this.slicer.sliceProps(props,dateProfile,props.nextDayThreshold,context.calendar,dayGrid,dayTable),{dateProfile:dateProfile,cells:dayTable.cells,isRigid:props.isRigid}),context);};SimpleDayGrid.prototype.buildPositionCaches=function(){this.dayGrid.buildPositionCaches();};SimpleDayGrid.prototype.queryHit=function(positionLeft,positionTop){var rawHit=this.dayGrid.positionToHit(positionLeft,positionTop);if(rawHit){return{component:this.dayGrid,dateSpan:rawHit.dateSpan,dayEl:rawHit.dayEl,rect:{left:rawHit.relativeRect.left,right:rawHit.relativeRect.right,top:rawHit.relativeRect.top,bottom:rawHit.relativeRect.bottom},layer:0};}};return SimpleDayGrid;}(core.DateComponent));var DayGridSlicer=(function(_super){__extends(DayGridSlicer,_super);function DayGridSlicer(){return _super!==null&&_super.apply(this,arguments)||this;}
DayGridSlicer.prototype.sliceRange=function(dateRange,dayTable){return dayTable.sliceRange(dateRange);};return DayGridSlicer;}(core.Slicer));var DayGridView=(function(_super){__extends(DayGridView,_super);function DayGridView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.buildDayTable=core.memoize(buildDayTable);return _this;}
DayGridView.prototype.render=function(props,context){_super.prototype.render.call(this,props,context);var dateProfile=this.props.dateProfile;var dayTable=this.dayTable=this.buildDayTable(dateProfile,props.dateProfileGenerator);if(this.header){this.header.receiveProps({dateProfile:dateProfile,dates:dayTable.headerDates,datesRepDistinctDays:dayTable.rowCnt===1,renderIntroHtml:this.renderHeadIntroHtml},context);}
this.simpleDayGrid.receiveProps({dateProfile:dateProfile,dayTable:dayTable,businessHours:props.businessHours,dateSelection:props.dateSelection,eventStore:props.eventStore,eventUiBases:props.eventUiBases,eventSelection:props.eventSelection,eventDrag:props.eventDrag,eventResize:props.eventResize,isRigid:this.hasRigidRows(),nextDayThreshold:this.context.nextDayThreshold},context);};DayGridView.prototype._renderSkeleton=function(context){_super.prototype._renderSkeleton.call(this,context);if(context.options.columnHeader){this.header=new core.DayHeader(this.el.querySelector('.fc-head-container'));}
this.simpleDayGrid=new SimpleDayGrid(this.dayGrid);};DayGridView.prototype._unrenderSkeleton=function(){_super.prototype._unrenderSkeleton.call(this);if(this.header){this.header.destroy();}
this.simpleDayGrid.destroy();};return DayGridView;}(AbstractDayGridView));function buildDayTable(dateProfile,dateProfileGenerator){var daySeries=new core.DaySeries(dateProfile.renderRange,dateProfileGenerator);return new core.DayTable(daySeries,/year|month|week/.test(dateProfile.currentRangeUnit));}
var main=core.createPlugin({defaultView:'dayGridMonth',views:{dayGrid:DayGridView,dayGridDay:{type:'dayGrid',duration:{days:1}},dayGridWeek:{type:'dayGrid',duration:{weeks:1}},dayGridMonth:{type:'dayGrid',duration:{months:1},monthMode:true,fixedWeekCount:true}}});exports.AbstractDayGridView=AbstractDayGridView;exports.DayBgRow=DayBgRow;exports.DayGrid=DayGrid;exports.DayGridSlicer=DayGridSlicer;exports.DayGridView=DayGridView;exports.SimpleDayGrid=SimpleDayGrid;exports.buildBasicDayTable=buildDayTable;exports.default=main;Object.defineProperty(exports,'__esModule',{value:true});}));/*!
FullCalendar Time Grid Plugin v4.4.2
Docs & License: https://fullcalendar.io/
(c) 2019 Adam Shaw
*/(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports,require('@fullcalendar/core'),require('@fullcalendar/daygrid')):typeof define==='function'&&define.amd?define(['exports','@fullcalendar/core','@fullcalendar/daygrid'],factory):(global=global||self,factory(global.FullCalendarTimeGrid={},global.FullCalendar,global.FullCalendarDayGrid));}(this,function(exports,core,daygrid){'use strict';/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return extendStatics(d,b);};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}
var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}
return t;};return __assign.apply(this,arguments);};var TimeGridEventRenderer=(function(_super){__extends(TimeGridEventRenderer,_super);function TimeGridEventRenderer(timeGrid){var _this=_super.call(this)||this;_this.timeGrid=timeGrid;return _this;}
TimeGridEventRenderer.prototype.renderSegs=function(context,segs,mirrorInfo){_super.prototype.renderSegs.call(this,context,segs,mirrorInfo);this.fullTimeFormat=core.createFormatter({hour:'numeric',minute:'2-digit',separator:this.context.options.defaultRangeSeparator});};TimeGridEventRenderer.prototype.attachSegs=function(segs,mirrorInfo){var segsByCol=this.timeGrid.groupSegsByCol(segs);for(var col=0;col<segsByCol.length;col++){segsByCol[col]=this.sortEventSegs(segsByCol[col]);}
this.segsByCol=segsByCol;this.timeGrid.attachSegsByCol(segsByCol,this.timeGrid.fgContainerEls);};TimeGridEventRenderer.prototype.detachSegs=function(segs){segs.forEach(function(seg){core.removeElement(seg.el);});this.segsByCol=null;};TimeGridEventRenderer.prototype.computeSegSizes=function(allSegs){var _a=this,timeGrid=_a.timeGrid,segsByCol=_a.segsByCol;var colCnt=timeGrid.colCnt;timeGrid.computeSegVerticals(allSegs);if(segsByCol){for(var col=0;col<colCnt;col++){this.computeSegHorizontals(segsByCol[col]);}}};TimeGridEventRenderer.prototype.assignSegSizes=function(allSegs){var _a=this,timeGrid=_a.timeGrid,segsByCol=_a.segsByCol;var colCnt=timeGrid.colCnt;timeGrid.assignSegVerticals(allSegs);if(segsByCol){for(var col=0;col<colCnt;col++){this.assignSegCss(segsByCol[col]);}}};TimeGridEventRenderer.prototype.computeEventTimeFormat=function(){return{hour:'numeric',minute:'2-digit',meridiem:false};};TimeGridEventRenderer.prototype.computeDisplayEventEnd=function(){return true;};TimeGridEventRenderer.prototype.renderSegHtml=function(seg,mirrorInfo){var eventRange=seg.eventRange;var eventDef=eventRange.def;var eventUi=eventRange.ui;var allDay=eventDef.allDay;var isDraggable=core.computeEventDraggable(this.context,eventDef,eventUi);var isResizableFromStart=seg.isStart&&core.computeEventStartResizable(this.context,eventDef,eventUi);var isResizableFromEnd=seg.isEnd&&core.computeEventEndResizable(this.context,eventDef,eventUi);var classes=this.getSegClasses(seg,isDraggable,isResizableFromStart||isResizableFromEnd,mirrorInfo);var skinCss=core.cssToStr(this.getSkinCss(eventUi));var timeText;var fullTimeText;var startTimeText;classes.unshift('fc-time-grid-event');if(core.isMultiDayRange(eventRange.range)){if(seg.isStart||seg.isEnd){var unzonedStart=seg.start;var unzonedEnd=seg.end;timeText=this._getTimeText(unzonedStart,unzonedEnd,allDay);fullTimeText=this._getTimeText(unzonedStart,unzonedEnd,allDay,this.fullTimeFormat);startTimeText=this._getTimeText(unzonedStart,unzonedEnd,allDay,null,false);}}
else{timeText=this.getTimeText(eventRange);fullTimeText=this.getTimeText(eventRange,this.fullTimeFormat);startTimeText=this.getTimeText(eventRange,null,false);}
return '<a class="'+classes.join(' ')+'"'+
(eventDef.url?' href="'+core.htmlEscape(eventDef.url)+'"':'')+
(skinCss?' style="'+skinCss+'"':'')+
'>'+
'<div class="fc-content">'+
(timeText?'<div class="fc-time"'+
' data-start="'+core.htmlEscape(startTimeText)+'"'+
' data-full="'+core.htmlEscape(fullTimeText)+'"'+
'>'+
'<span>'+core.htmlEscape(timeText)+'</span>'+
'</div>':'')+
(eventDef.title?'<div class="fc-title">'+
core.htmlEscape(eventDef.title)+
'</div>':'')+
'</div>'+
(isResizableFromEnd?'<div class="fc-resizer fc-end-resizer"></div>':'')+
'</a>';};TimeGridEventRenderer.prototype.computeSegHorizontals=function(segs){var levels;var level0;var i;levels=buildSlotSegLevels(segs);computeForwardSlotSegs(levels);if((level0=levels[0])){for(i=0;i<level0.length;i++){computeSlotSegPressures(level0[i]);}
for(i=0;i<level0.length;i++){this.computeSegForwardBack(level0[i],0,0);}}};TimeGridEventRenderer.prototype.computeSegForwardBack=function(seg,seriesBackwardPressure,seriesBackwardCoord){var forwardSegs=seg.forwardSegs;var i;if(seg.forwardCoord===undefined){if(!forwardSegs.length){seg.forwardCoord=1;}
else{this.sortForwardSegs(forwardSegs);this.computeSegForwardBack(forwardSegs[0],seriesBackwardPressure+1,seriesBackwardCoord);seg.forwardCoord=forwardSegs[0].backwardCoord;}
seg.backwardCoord=seg.forwardCoord-
(seg.forwardCoord-seriesBackwardCoord)/(seriesBackwardPressure+1);for(i=0;i<forwardSegs.length;i++){this.computeSegForwardBack(forwardSegs[i],0,seg.forwardCoord);}}};TimeGridEventRenderer.prototype.sortForwardSegs=function(forwardSegs){var objs=forwardSegs.map(buildTimeGridSegCompareObj);var specs=[{field:'forwardPressure',order:-1},{field:'backwardCoord',order:1}].concat(this.context.eventOrderSpecs);objs.sort(function(obj0,obj1){return core.compareByFieldSpecs(obj0,obj1,specs);});return objs.map(function(c){return c._seg;});};TimeGridEventRenderer.prototype.assignSegCss=function(segs){for(var _i=0,segs_1=segs;_i<segs_1.length;_i++){var seg=segs_1[_i];core.applyStyle(seg.el,this.generateSegCss(seg));if(seg.level>0){seg.el.classList.add('fc-time-grid-event-inset');}
if(seg.eventRange.def.title&&seg.bottom-seg.top<30){seg.el.classList.add('fc-short');}}};TimeGridEventRenderer.prototype.generateSegCss=function(seg){var shouldOverlap=this.context.options.slotEventOverlap;var backwardCoord=seg.backwardCoord;var forwardCoord=seg.forwardCoord;var props=this.timeGrid.generateSegVerticalCss(seg);var isRtl=this.context.isRtl;var left;var right;if(shouldOverlap){forwardCoord=Math.min(1,backwardCoord+(forwardCoord-backwardCoord)*2);}
if(isRtl){left=1-forwardCoord;right=backwardCoord;}
else{left=backwardCoord;right=1-forwardCoord;}
props.zIndex=seg.level+1;props.left=left*100+'%';props.right=right*100+'%';if(shouldOverlap&&seg.forwardPressure){props[isRtl?'marginLeft':'marginRight']=10*2;}
return props;};return TimeGridEventRenderer;}(core.FgEventRenderer));function buildSlotSegLevels(segs){var levels=[];var i;var seg;var j;for(i=0;i<segs.length;i++){seg=segs[i];for(j=0;j<levels.length;j++){if(!computeSlotSegCollisions(seg,levels[j]).length){break;}}
seg.level=j;(levels[j]||(levels[j]=[])).push(seg);}
return levels;}
function computeForwardSlotSegs(levels){var i;var level;var j;var seg;var k;for(i=0;i<levels.length;i++){level=levels[i];for(j=0;j<level.length;j++){seg=level[j];seg.forwardSegs=[];for(k=i+1;k<levels.length;k++){computeSlotSegCollisions(seg,levels[k],seg.forwardSegs);}}}}
function computeSlotSegPressures(seg){var forwardSegs=seg.forwardSegs;var forwardPressure=0;var i;var forwardSeg;if(seg.forwardPressure===undefined){for(i=0;i<forwardSegs.length;i++){forwardSeg=forwardSegs[i];computeSlotSegPressures(forwardSeg);forwardPressure=Math.max(forwardPressure,1+forwardSeg.forwardPressure);}
seg.forwardPressure=forwardPressure;}}
function computeSlotSegCollisions(seg,otherSegs,results){if(results===void 0){results=[];}
for(var i=0;i<otherSegs.length;i++){if(isSlotSegCollision(seg,otherSegs[i])){results.push(otherSegs[i]);}}
return results;}
function isSlotSegCollision(seg1,seg2){return seg1.bottom>seg2.top&&seg1.top<seg2.bottom;}
function buildTimeGridSegCompareObj(seg){var obj=core.buildSegCompareObj(seg);obj.forwardPressure=seg.forwardPressure;obj.backwardCoord=seg.backwardCoord;return obj;}
var TimeGridMirrorRenderer=(function(_super){__extends(TimeGridMirrorRenderer,_super);function TimeGridMirrorRenderer(){return _super!==null&&_super.apply(this,arguments)||this;}
TimeGridMirrorRenderer.prototype.attachSegs=function(segs,mirrorInfo){this.segsByCol=this.timeGrid.groupSegsByCol(segs);this.timeGrid.attachSegsByCol(this.segsByCol,this.timeGrid.mirrorContainerEls);this.sourceSeg=mirrorInfo.sourceSeg;};TimeGridMirrorRenderer.prototype.generateSegCss=function(seg){var props=_super.prototype.generateSegCss.call(this,seg);var sourceSeg=this.sourceSeg;if(sourceSeg&&sourceSeg.col===seg.col){var sourceSegProps=_super.prototype.generateSegCss.call(this,sourceSeg);props.left=sourceSegProps.left;props.right=sourceSegProps.right;props.marginLeft=sourceSegProps.marginLeft;props.marginRight=sourceSegProps.marginRight;}
return props;};return TimeGridMirrorRenderer;}(TimeGridEventRenderer));var TimeGridFillRenderer=(function(_super){__extends(TimeGridFillRenderer,_super);function TimeGridFillRenderer(timeGrid){var _this=_super.call(this)||this;_this.timeGrid=timeGrid;return _this;}
TimeGridFillRenderer.prototype.attachSegs=function(type,segs){var timeGrid=this.timeGrid;var containerEls;if(type==='bgEvent'){containerEls=timeGrid.bgContainerEls;}
else if(type==='businessHours'){containerEls=timeGrid.businessContainerEls;}
else if(type==='highlight'){containerEls=timeGrid.highlightContainerEls;}
timeGrid.attachSegsByCol(timeGrid.groupSegsByCol(segs),containerEls);return segs.map(function(seg){return seg.el;});};TimeGridFillRenderer.prototype.computeSegSizes=function(segs){this.timeGrid.computeSegVerticals(segs);};TimeGridFillRenderer.prototype.assignSegSizes=function(segs){this.timeGrid.assignSegVerticals(segs);};return TimeGridFillRenderer;}(core.FillRenderer));var AGENDA_STOCK_SUB_DURATIONS=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];var TimeGrid=(function(_super){__extends(TimeGrid,_super);function TimeGrid(el,renderProps){var _this=_super.call(this,el)||this;_this.isSlatSizesDirty=false;_this.isColSizesDirty=false;_this.processOptions=core.memoize(_this._processOptions);_this.renderSkeleton=core.memoizeRendering(_this._renderSkeleton);_this.renderSlats=core.memoizeRendering(_this._renderSlats,null,[_this.renderSkeleton]);_this.renderColumns=core.memoizeRendering(_this._renderColumns,_this._unrenderColumns,[_this.renderSkeleton]);_this.renderProps=renderProps;var renderColumns=_this.renderColumns;var eventRenderer=_this.eventRenderer=new TimeGridEventRenderer(_this);var fillRenderer=_this.fillRenderer=new TimeGridFillRenderer(_this);_this.mirrorRenderer=new TimeGridMirrorRenderer(_this);_this.renderBusinessHours=core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer,'businessHours'),fillRenderer.unrender.bind(fillRenderer,'businessHours'),[renderColumns]);_this.renderDateSelection=core.memoizeRendering(_this._renderDateSelection,_this._unrenderDateSelection,[renderColumns]);_this.renderFgEvents=core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer),eventRenderer.unrender.bind(eventRenderer),[renderColumns]);_this.renderBgEvents=core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer,'bgEvent'),fillRenderer.unrender.bind(fillRenderer,'bgEvent'),[renderColumns]);_this.renderEventSelection=core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer),eventRenderer.unselectByInstanceId.bind(eventRenderer),[_this.renderFgEvents]);_this.renderEventDrag=core.memoizeRendering(_this._renderEventDrag,_this._unrenderEventDrag,[renderColumns]);_this.renderEventResize=core.memoizeRendering(_this._renderEventResize,_this._unrenderEventResize,[renderColumns]);return _this;}
TimeGrid.prototype._processOptions=function(options){var slotDuration=options.slotDuration,snapDuration=options.snapDuration;var snapsPerSlot;var input;slotDuration=core.createDuration(slotDuration);snapDuration=snapDuration?core.createDuration(snapDuration):slotDuration;snapsPerSlot=core.wholeDivideDurations(slotDuration,snapDuration);if(snapsPerSlot===null){snapDuration=slotDuration;snapsPerSlot=1;}
this.slotDuration=slotDuration;this.snapDuration=snapDuration;this.snapsPerSlot=snapsPerSlot;input=options.slotLabelFormat;if(Array.isArray(input)){input=input[input.length-1];}
this.labelFormat=core.createFormatter(input||{hour:'numeric',minute:'2-digit',omitZeroMinute:true,meridiem:'short'});input=options.slotLabelInterval;this.labelInterval=input?core.createDuration(input):this.computeLabelInterval(slotDuration);};TimeGrid.prototype.computeLabelInterval=function(slotDuration){var i;var labelInterval;var slotsPerLabel;for(i=AGENDA_STOCK_SUB_DURATIONS.length-1;i>=0;i--){labelInterval=core.createDuration(AGENDA_STOCK_SUB_DURATIONS[i]);slotsPerLabel=core.wholeDivideDurations(labelInterval,slotDuration);if(slotsPerLabel!==null&&slotsPerLabel>1){return labelInterval;}}
return slotDuration;};TimeGrid.prototype.render=function(props,context){this.processOptions(context.options);var cells=props.cells;this.colCnt=cells.length;this.renderSkeleton(context.theme);this.renderSlats(props.dateProfile);this.renderColumns(props.cells,props.dateProfile);this.renderBusinessHours(context,props.businessHourSegs);this.renderDateSelection(props.dateSelectionSegs);this.renderFgEvents(context,props.fgEventSegs);this.renderBgEvents(context,props.bgEventSegs);this.renderEventSelection(props.eventSelection);this.renderEventDrag(props.eventDrag);this.renderEventResize(props.eventResize);};TimeGrid.prototype.destroy=function(){_super.prototype.destroy.call(this);this.renderSlats.unrender();this.renderColumns.unrender();this.renderSkeleton.unrender();};TimeGrid.prototype.updateSize=function(isResize){var _a=this,fillRenderer=_a.fillRenderer,eventRenderer=_a.eventRenderer,mirrorRenderer=_a.mirrorRenderer;if(isResize||this.isSlatSizesDirty){this.buildSlatPositions();this.isSlatSizesDirty=false;}
if(isResize||this.isColSizesDirty){this.buildColPositions();this.isColSizesDirty=false;}
fillRenderer.computeSizes(isResize);eventRenderer.computeSizes(isResize);mirrorRenderer.computeSizes(isResize);fillRenderer.assignSizes(isResize);eventRenderer.assignSizes(isResize);mirrorRenderer.assignSizes(isResize);};TimeGrid.prototype._renderSkeleton=function(theme){var el=this.el;el.innerHTML='<div class="fc-bg"></div>'+
'<div class="fc-slats"></div>'+
'<hr class="fc-divider '+theme.getClass('widgetHeader')+'" style="display:none" />';this.rootBgContainerEl=el.querySelector('.fc-bg');this.slatContainerEl=el.querySelector('.fc-slats');this.bottomRuleEl=el.querySelector('.fc-divider');};TimeGrid.prototype._renderSlats=function(dateProfile){var theme=this.context.theme;this.slatContainerEl.innerHTML='<table class="'+theme.getClass('tableGrid')+'">'+
this.renderSlatRowHtml(dateProfile)+
'</table>';this.slatEls=core.findElements(this.slatContainerEl,'tr');this.slatPositions=new core.PositionCache(this.el,this.slatEls,false,true);this.isSlatSizesDirty=true;};TimeGrid.prototype.renderSlatRowHtml=function(dateProfile){var _a=this.context,dateEnv=_a.dateEnv,theme=_a.theme,isRtl=_a.isRtl;var html='';var dayStart=core.startOfDay(dateProfile.renderRange.start);var slotTime=dateProfile.minTime;var slotIterator=core.createDuration(0);var slotDate;var isLabeled;var axisHtml;while(core.asRoughMs(slotTime)<core.asRoughMs(dateProfile.maxTime)){slotDate=dateEnv.add(dayStart,slotTime);isLabeled=core.wholeDivideDurations(slotIterator,this.labelInterval)!==null;axisHtml='<td class="fc-axis fc-time '+theme.getClass('widgetContent')+'">'+
(isLabeled?'<span>'+
core.htmlEscape(dateEnv.format(slotDate,this.labelFormat))+
'</span>':'')+
'</td>';html+='<tr data-time="'+core.formatIsoTimeString(slotDate)+'"'+
(isLabeled?'':' class="fc-minor"')+
'>'+
(!isRtl?axisHtml:'')+
'<td class="'+theme.getClass('widgetContent')+'"></td>'+
(isRtl?axisHtml:'')+
'</tr>';slotTime=core.addDurations(slotTime,this.slotDuration);slotIterator=core.addDurations(slotIterator,this.slotDuration);}
return html;};TimeGrid.prototype._renderColumns=function(cells,dateProfile){var _a=this.context,calendar=_a.calendar,view=_a.view,isRtl=_a.isRtl,theme=_a.theme,dateEnv=_a.dateEnv;var bgRow=new daygrid.DayBgRow(this.context);this.rootBgContainerEl.innerHTML='<table class="'+theme.getClass('tableGrid')+'">'+
bgRow.renderHtml({cells:cells,dateProfile:dateProfile,renderIntroHtml:this.renderProps.renderBgIntroHtml})+
'</table>';this.colEls=core.findElements(this.el,'.fc-day, .fc-disabled-day');for(var col=0;col<this.colCnt;col++){calendar.publiclyTrigger('dayRender',[{date:dateEnv.toDate(cells[col].date),el:this.colEls[col],view:view}]);}
if(isRtl){this.colEls.reverse();}
this.colPositions=new core.PositionCache(this.el,this.colEls,true,false);this.renderContentSkeleton();this.isColSizesDirty=true;};TimeGrid.prototype._unrenderColumns=function(){this.unrenderContentSkeleton();};TimeGrid.prototype.renderContentSkeleton=function(){var isRtl=this.context.isRtl;var parts=[];var skeletonEl;parts.push(this.renderProps.renderIntroHtml());for(var i=0;i<this.colCnt;i++){parts.push('<td>'+
'<div class="fc-content-col">'+
'<div class="fc-event-container fc-mirror-container"></div>'+
'<div class="fc-event-container"></div>'+
'<div class="fc-highlight-container"></div>'+
'<div class="fc-bgevent-container"></div>'+
'<div class="fc-business-container"></div>'+
'</div>'+
'</td>');}
if(isRtl){parts.reverse();}
skeletonEl=this.contentSkeletonEl=core.htmlToElement('<div class="fc-content-skeleton">'+
'<table>'+
'<tr>'+parts.join('')+'</tr>'+
'</table>'+
'</div>');this.colContainerEls=core.findElements(skeletonEl,'.fc-content-col');this.mirrorContainerEls=core.findElements(skeletonEl,'.fc-mirror-container');this.fgContainerEls=core.findElements(skeletonEl,'.fc-event-container:not(.fc-mirror-container)');this.bgContainerEls=core.findElements(skeletonEl,'.fc-bgevent-container');this.highlightContainerEls=core.findElements(skeletonEl,'.fc-highlight-container');this.businessContainerEls=core.findElements(skeletonEl,'.fc-business-container');if(isRtl){this.colContainerEls.reverse();this.mirrorContainerEls.reverse();this.fgContainerEls.reverse();this.bgContainerEls.reverse();this.highlightContainerEls.reverse();this.businessContainerEls.reverse();}
this.el.appendChild(skeletonEl);};TimeGrid.prototype.unrenderContentSkeleton=function(){core.removeElement(this.contentSkeletonEl);};TimeGrid.prototype.groupSegsByCol=function(segs){var segsByCol=[];var i;for(i=0;i<this.colCnt;i++){segsByCol.push([]);}
for(i=0;i<segs.length;i++){segsByCol[segs[i].col].push(segs[i]);}
return segsByCol;};TimeGrid.prototype.attachSegsByCol=function(segsByCol,containerEls){var col;var segs;var i;for(col=0;col<this.colCnt;col++){segs=segsByCol[col];for(i=0;i<segs.length;i++){containerEls[col].appendChild(segs[i].el);}}};TimeGrid.prototype.getNowIndicatorUnit=function(){return 'minute';};TimeGrid.prototype.renderNowIndicator=function(segs,date){if(!this.colContainerEls){return;}
var top=this.computeDateTop(date);var nodes=[];var i;for(i=0;i<segs.length;i++){var lineEl=core.createElement('div',{className:'fc-now-indicator fc-now-indicator-line'});lineEl.style.top=top+'px';this.colContainerEls[segs[i].col].appendChild(lineEl);nodes.push(lineEl);}
if(segs.length>0){var arrowEl=core.createElement('div',{className:'fc-now-indicator fc-now-indicator-arrow'});arrowEl.style.top=top+'px';this.contentSkeletonEl.appendChild(arrowEl);nodes.push(arrowEl);}
this.nowIndicatorEls=nodes;};TimeGrid.prototype.unrenderNowIndicator=function(){if(this.nowIndicatorEls){this.nowIndicatorEls.forEach(core.removeElement);this.nowIndicatorEls=null;}};TimeGrid.prototype.getTotalSlatHeight=function(){return this.slatContainerEl.getBoundingClientRect().height;};TimeGrid.prototype.computeDateTop=function(when,startOfDayDate){if(!startOfDayDate){startOfDayDate=core.startOfDay(when);}
return this.computeTimeTop(core.createDuration(when.valueOf()-startOfDayDate.valueOf()));};TimeGrid.prototype.computeTimeTop=function(duration){var len=this.slatEls.length;var dateProfile=this.props.dateProfile;var slatCoverage=(duration.milliseconds-core.asRoughMs(dateProfile.minTime))/core.asRoughMs(this.slotDuration);var slatIndex;var slatRemainder;slatCoverage=Math.max(0,slatCoverage);slatCoverage=Math.min(len,slatCoverage);slatIndex=Math.floor(slatCoverage);slatIndex=Math.min(slatIndex,len-1);slatRemainder=slatCoverage-slatIndex;return this.slatPositions.tops[slatIndex]+
this.slatPositions.getHeight(slatIndex)*slatRemainder;};TimeGrid.prototype.computeSegVerticals=function(segs){var options=this.context.options;var eventMinHeight=options.timeGridEventMinHeight;var i;var seg;var dayDate;for(i=0;i<segs.length;i++){seg=segs[i];dayDate=this.props.cells[seg.col].date;seg.top=this.computeDateTop(seg.start,dayDate);seg.bottom=Math.max(seg.top+eventMinHeight,this.computeDateTop(seg.end,dayDate));}};TimeGrid.prototype.assignSegVerticals=function(segs){var i;var seg;for(i=0;i<segs.length;i++){seg=segs[i];core.applyStyle(seg.el,this.generateSegVerticalCss(seg));}};TimeGrid.prototype.generateSegVerticalCss=function(seg){return{top:seg.top,bottom:-seg.bottom};};TimeGrid.prototype.buildPositionCaches=function(){this.buildColPositions();this.buildSlatPositions();};TimeGrid.prototype.buildColPositions=function(){this.colPositions.build();};TimeGrid.prototype.buildSlatPositions=function(){this.slatPositions.build();};TimeGrid.prototype.positionToHit=function(positionLeft,positionTop){var dateEnv=this.context.dateEnv;var _a=this,snapsPerSlot=_a.snapsPerSlot,slatPositions=_a.slatPositions,colPositions=_a.colPositions;var colIndex=colPositions.leftToIndex(positionLeft);var slatIndex=slatPositions.topToIndex(positionTop);if(colIndex!=null&&slatIndex!=null){var slatTop=slatPositions.tops[slatIndex];var slatHeight=slatPositions.getHeight(slatIndex);var partial=(positionTop-slatTop)/slatHeight;var localSnapIndex=Math.floor(partial*snapsPerSlot);var snapIndex=slatIndex*snapsPerSlot+localSnapIndex;var dayDate=this.props.cells[colIndex].date;var time=core.addDurations(this.props.dateProfile.minTime,core.multiplyDuration(this.snapDuration,snapIndex));var start=dateEnv.add(dayDate,time);var end=dateEnv.add(start,this.snapDuration);return{col:colIndex,dateSpan:{range:{start:start,end:end},allDay:false},dayEl:this.colEls[colIndex],relativeRect:{left:colPositions.lefts[colIndex],right:colPositions.rights[colIndex],top:slatTop,bottom:slatTop+slatHeight}};}};TimeGrid.prototype._renderEventDrag=function(state){if(state){this.eventRenderer.hideByHash(state.affectedInstances);if(state.isEvent){this.mirrorRenderer.renderSegs(this.context,state.segs,{isDragging:true,sourceSeg:state.sourceSeg});}
else{this.fillRenderer.renderSegs('highlight',this.context,state.segs);}}};TimeGrid.prototype._unrenderEventDrag=function(state){if(state){this.eventRenderer.showByHash(state.affectedInstances);if(state.isEvent){this.mirrorRenderer.unrender(this.context,state.segs,{isDragging:true,sourceSeg:state.sourceSeg});}
else{this.fillRenderer.unrender('highlight',this.context);}}};TimeGrid.prototype._renderEventResize=function(state){if(state){this.eventRenderer.hideByHash(state.affectedInstances);this.mirrorRenderer.renderSegs(this.context,state.segs,{isResizing:true,sourceSeg:state.sourceSeg});}};TimeGrid.prototype._unrenderEventResize=function(state){if(state){this.eventRenderer.showByHash(state.affectedInstances);this.mirrorRenderer.unrender(this.context,state.segs,{isResizing:true,sourceSeg:state.sourceSeg});}};TimeGrid.prototype._renderDateSelection=function(segs){if(segs){if(this.context.options.selectMirror){this.mirrorRenderer.renderSegs(this.context,segs,{isSelecting:true});}
else{this.fillRenderer.renderSegs('highlight',this.context,segs);}}};TimeGrid.prototype._unrenderDateSelection=function(segs){if(segs){if(this.context.options.selectMirror){this.mirrorRenderer.unrender(this.context,segs,{isSelecting:true});}
else{this.fillRenderer.unrender('highlight',this.context);}}};return TimeGrid;}(core.DateComponent));var AllDaySplitter=(function(_super){__extends(AllDaySplitter,_super);function AllDaySplitter(){return _super!==null&&_super.apply(this,arguments)||this;}
AllDaySplitter.prototype.getKeyInfo=function(){return{allDay:{},timed:{}};};AllDaySplitter.prototype.getKeysForDateSpan=function(dateSpan){if(dateSpan.allDay){return['allDay'];}
else{return['timed'];}};AllDaySplitter.prototype.getKeysForEventDef=function(eventDef){if(!eventDef.allDay){return['timed'];}
else if(core.hasBgRendering(eventDef)){return['timed','allDay'];}
else{return['allDay'];}};return AllDaySplitter;}(core.Splitter));var TIMEGRID_ALL_DAY_EVENT_LIMIT=5;var WEEK_HEADER_FORMAT=core.createFormatter({week:'short'});var AbstractTimeGridView=(function(_super){__extends(AbstractTimeGridView,_super);function AbstractTimeGridView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.splitter=new AllDaySplitter();_this.renderSkeleton=core.memoizeRendering(_this._renderSkeleton,_this._unrenderSkeleton);_this.renderHeadIntroHtml=function(){var _a=_this.context,theme=_a.theme,dateEnv=_a.dateEnv,options=_a.options;var range=_this.props.dateProfile.renderRange;var dayCnt=core.diffDays(range.start,range.end);var weekText;if(options.weekNumbers){weekText=dateEnv.format(range.start,WEEK_HEADER_FORMAT);return ''+
'<th class="fc-axis fc-week-number '+theme.getClass('widgetHeader')+'" '+_this.axisStyleAttr()+'>'+
core.buildGotoAnchorHtml(options,dateEnv,{date:range.start,type:'week',forceOff:dayCnt>1},core.htmlEscape(weekText))+
'</th>';}
else{return '<th class="fc-axis '+theme.getClass('widgetHeader')+'" '+_this.axisStyleAttr()+'></th>';}};_this.renderTimeGridBgIntroHtml=function(){var theme=_this.context.theme;return '<td class="fc-axis '+theme.getClass('widgetContent')+'" '+_this.axisStyleAttr()+'></td>';};_this.renderTimeGridIntroHtml=function(){return '<td class="fc-axis" '+_this.axisStyleAttr()+'></td>';};_this.renderDayGridBgIntroHtml=function(){var _a=_this.context,theme=_a.theme,options=_a.options;return ''+
'<td class="fc-axis '+theme.getClass('widgetContent')+'" '+_this.axisStyleAttr()+'>'+
'<span>'+
core.getAllDayHtml(options)+
'</span>'+
'</td>';};_this.renderDayGridIntroHtml=function(){return '<td class="fc-axis" '+_this.axisStyleAttr()+'></td>';};return _this;}
AbstractTimeGridView.prototype.render=function(props,context){_super.prototype.render.call(this,props,context);this.renderSkeleton(context);};AbstractTimeGridView.prototype.destroy=function(){_super.prototype.destroy.call(this);this.renderSkeleton.unrender();};AbstractTimeGridView.prototype._renderSkeleton=function(context){this.el.classList.add('fc-timeGrid-view');this.el.innerHTML=this.renderSkeletonHtml();this.scroller=new core.ScrollComponent('hidden','auto');var timeGridWrapEl=this.scroller.el;this.el.querySelector('.fc-body > tr > td').appendChild(timeGridWrapEl);timeGridWrapEl.classList.add('fc-time-grid-container');var timeGridEl=core.createElement('div',{className:'fc-time-grid'});timeGridWrapEl.appendChild(timeGridEl);this.timeGrid=new TimeGrid(timeGridEl,{renderBgIntroHtml:this.renderTimeGridBgIntroHtml,renderIntroHtml:this.renderTimeGridIntroHtml});if(context.options.allDaySlot){this.dayGrid=new daygrid.DayGrid(this.el.querySelector('.fc-day-grid'),{renderNumberIntroHtml:this.renderDayGridIntroHtml,renderBgIntroHtml:this.renderDayGridBgIntroHtml,renderIntroHtml:this.renderDayGridIntroHtml,colWeekNumbersVisible:false,cellWeekNumbersVisible:false});var dividerEl=this.el.querySelector('.fc-divider');this.dayGrid.bottomCoordPadding=dividerEl.getBoundingClientRect().height;}};AbstractTimeGridView.prototype._unrenderSkeleton=function(){this.el.classList.remove('fc-timeGrid-view');this.timeGrid.destroy();if(this.dayGrid){this.dayGrid.destroy();}
this.scroller.destroy();};AbstractTimeGridView.prototype.renderSkeletonHtml=function(){var _a=this.context,theme=_a.theme,options=_a.options;return ''+
'<table class="'+theme.getClass('tableGrid')+'">'+
(options.columnHeader?'<thead class="fc-head">'+
'<tr>'+
'<td class="fc-head-container '+theme.getClass('widgetHeader')+'">&nbsp;</td>'+
'</tr>'+
'</thead>':'')+
'<tbody class="fc-body">'+
'<tr>'+
'<td class="'+theme.getClass('widgetContent')+'">'+
(options.allDaySlot?'<div class="fc-day-grid"></div>'+
'<hr class="fc-divider '+theme.getClass('widgetHeader')+'" />':'')+
'</td>'+
'</tr>'+
'</tbody>'+
'</table>';};AbstractTimeGridView.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit();};AbstractTimeGridView.prototype.unrenderNowIndicator=function(){this.timeGrid.unrenderNowIndicator();};AbstractTimeGridView.prototype.updateSize=function(isResize,viewHeight,isAuto){_super.prototype.updateSize.call(this,isResize,viewHeight,isAuto);this.timeGrid.updateSize(isResize);if(this.dayGrid){this.dayGrid.updateSize(isResize);}};AbstractTimeGridView.prototype.updateBaseSize=function(isResize,viewHeight,isAuto){var _this=this;var eventLimit;var scrollerHeight;var scrollbarWidths;this.axisWidth=core.matchCellWidths(core.findElements(this.el,'.fc-axis'));if(!this.timeGrid.colEls){if(!isAuto){scrollerHeight=this.computeScrollerHeight(viewHeight);this.scroller.setHeight(scrollerHeight);}
return;}
var noScrollRowEls=core.findElements(this.el,'.fc-row').filter(function(node){return!_this.scroller.el.contains(node);});this.timeGrid.bottomRuleEl.style.display='none';this.scroller.clear();noScrollRowEls.forEach(core.uncompensateScroll);if(this.dayGrid){this.dayGrid.removeSegPopover();eventLimit=this.context.options.eventLimit;if(eventLimit&&typeof eventLimit!=='number'){eventLimit=TIMEGRID_ALL_DAY_EVENT_LIMIT;}
if(eventLimit){this.dayGrid.limitRows(eventLimit);}}
if(!isAuto){scrollerHeight=this.computeScrollerHeight(viewHeight);this.scroller.setHeight(scrollerHeight);scrollbarWidths=this.scroller.getScrollbarWidths();if(scrollbarWidths.left||scrollbarWidths.right){noScrollRowEls.forEach(function(rowEl){core.compensateScroll(rowEl,scrollbarWidths);});scrollerHeight=this.computeScrollerHeight(viewHeight);this.scroller.setHeight(scrollerHeight);}
this.scroller.lockOverflow(scrollbarWidths);if(this.timeGrid.getTotalSlatHeight()<scrollerHeight){this.timeGrid.bottomRuleEl.style.display='';}}};AbstractTimeGridView.prototype.computeScrollerHeight=function(viewHeight){return viewHeight-
core.subtractInnerElHeight(this.el,this.scroller.el);};AbstractTimeGridView.prototype.computeDateScroll=function(duration){var top=this.timeGrid.computeTimeTop(duration);top=Math.ceil(top);if(top){top++;}
return{top:top};};AbstractTimeGridView.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()};};AbstractTimeGridView.prototype.applyDateScroll=function(scroll){if(scroll.top!==undefined){this.scroller.setScrollTop(scroll.top);}};AbstractTimeGridView.prototype.axisStyleAttr=function(){if(this.axisWidth!=null){return 'style="width:'+this.axisWidth+'px"';}
return '';};return AbstractTimeGridView;}(core.View));AbstractTimeGridView.prototype.usesMinMaxTime=true;var SimpleTimeGrid=(function(_super){__extends(SimpleTimeGrid,_super);function SimpleTimeGrid(timeGrid){var _this=_super.call(this,timeGrid.el)||this;_this.buildDayRanges=core.memoize(buildDayRanges);_this.slicer=new TimeGridSlicer();_this.timeGrid=timeGrid;return _this;}
SimpleTimeGrid.prototype.firstContext=function(context){context.calendar.registerInteractiveComponent(this,{el:this.timeGrid.el});};SimpleTimeGrid.prototype.destroy=function(){_super.prototype.destroy.call(this);this.context.calendar.unregisterInteractiveComponent(this);};SimpleTimeGrid.prototype.render=function(props,context){var dateEnv=this.context.dateEnv;var dateProfile=props.dateProfile,dayTable=props.dayTable;var dayRanges=this.dayRanges=this.buildDayRanges(dayTable,dateProfile,dateEnv);var timeGrid=this.timeGrid;timeGrid.receiveContext(context);timeGrid.receiveProps(__assign({},this.slicer.sliceProps(props,dateProfile,null,context.calendar,timeGrid,dayRanges),{dateProfile:dateProfile,cells:dayTable.cells[0]}),context);};SimpleTimeGrid.prototype.renderNowIndicator=function(date){this.timeGrid.renderNowIndicator(this.slicer.sliceNowDate(date,this.timeGrid,this.dayRanges),date);};SimpleTimeGrid.prototype.buildPositionCaches=function(){this.timeGrid.buildPositionCaches();};SimpleTimeGrid.prototype.queryHit=function(positionLeft,positionTop){var rawHit=this.timeGrid.positionToHit(positionLeft,positionTop);if(rawHit){return{component:this.timeGrid,dateSpan:rawHit.dateSpan,dayEl:rawHit.dayEl,rect:{left:rawHit.relativeRect.left,right:rawHit.relativeRect.right,top:rawHit.relativeRect.top,bottom:rawHit.relativeRect.bottom},layer:0};}};return SimpleTimeGrid;}(core.DateComponent));function buildDayRanges(dayTable,dateProfile,dateEnv){var ranges=[];for(var _i=0,_a=dayTable.headerDates;_i<_a.length;_i++){var date=_a[_i];ranges.push({start:dateEnv.add(date,dateProfile.minTime),end:dateEnv.add(date,dateProfile.maxTime)});}
return ranges;}
var TimeGridSlicer=(function(_super){__extends(TimeGridSlicer,_super);function TimeGridSlicer(){return _super!==null&&_super.apply(this,arguments)||this;}
TimeGridSlicer.prototype.sliceRange=function(range,dayRanges){var segs=[];for(var col=0;col<dayRanges.length;col++){var segRange=core.intersectRanges(range,dayRanges[col]);if(segRange){segs.push({start:segRange.start,end:segRange.end,isStart:segRange.start.valueOf()===range.start.valueOf(),isEnd:segRange.end.valueOf()===range.end.valueOf(),col:col});}}
return segs;};return TimeGridSlicer;}(core.Slicer));var TimeGridView=(function(_super){__extends(TimeGridView,_super);function TimeGridView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.buildDayTable=core.memoize(buildDayTable);return _this;}
TimeGridView.prototype.render=function(props,context){_super.prototype.render.call(this,props,context);var _a=this.props,dateProfile=_a.dateProfile,dateProfileGenerator=_a.dateProfileGenerator;var nextDayThreshold=context.nextDayThreshold;var dayTable=this.buildDayTable(dateProfile,dateProfileGenerator);var splitProps=this.splitter.splitProps(props);if(this.header){this.header.receiveProps({dateProfile:dateProfile,dates:dayTable.headerDates,datesRepDistinctDays:true,renderIntroHtml:this.renderHeadIntroHtml},context);}
this.simpleTimeGrid.receiveProps(__assign({},splitProps['timed'],{dateProfile:dateProfile,dayTable:dayTable}),context);if(this.simpleDayGrid){this.simpleDayGrid.receiveProps(__assign({},splitProps['allDay'],{dateProfile:dateProfile,dayTable:dayTable,nextDayThreshold:nextDayThreshold,isRigid:false}),context);}
this.startNowIndicator(dateProfile,dateProfileGenerator);};TimeGridView.prototype._renderSkeleton=function(context){_super.prototype._renderSkeleton.call(this,context);if(context.options.columnHeader){this.header=new core.DayHeader(this.el.querySelector('.fc-head-container'));}
this.simpleTimeGrid=new SimpleTimeGrid(this.timeGrid);if(this.dayGrid){this.simpleDayGrid=new daygrid.SimpleDayGrid(this.dayGrid);}};TimeGridView.prototype._unrenderSkeleton=function(){_super.prototype._unrenderSkeleton.call(this);if(this.header){this.header.destroy();}
this.simpleTimeGrid.destroy();if(this.simpleDayGrid){this.simpleDayGrid.destroy();}};TimeGridView.prototype.renderNowIndicator=function(date){this.simpleTimeGrid.renderNowIndicator(date);};return TimeGridView;}(AbstractTimeGridView));function buildDayTable(dateProfile,dateProfileGenerator){var daySeries=new core.DaySeries(dateProfile.renderRange,dateProfileGenerator);return new core.DayTable(daySeries,false);}
var main=core.createPlugin({defaultView:'timeGridWeek',views:{timeGrid:{class:TimeGridView,allDaySlot:true,slotDuration:'00:30:00',slotEventOverlap:true},timeGridDay:{type:'timeGrid',duration:{days:1}},timeGridWeek:{type:'timeGrid',duration:{weeks:1}}}});exports.AbstractTimeGridView=AbstractTimeGridView;exports.TimeGrid=TimeGrid;exports.TimeGridSlicer=TimeGridSlicer;exports.TimeGridView=TimeGridView;exports.buildDayRanges=buildDayRanges;exports.buildDayTable=buildDayTable;exports.default=main;Object.defineProperty(exports,'__esModule',{value:true});}));/*!
FullCalendar Interaction Plugin v4.4.2
Docs & License: https://fullcalendar.io/
(c) 2019 Adam Shaw
*/(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports,require('@fullcalendar/core')):typeof define==='function'&&define.amd?define(['exports','@fullcalendar/core'],factory):(global=global||self,factory(global.FullCalendarInteraction={},global.FullCalendar));}(this,function(exports,core){'use strict';/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return extendStatics(d,b);};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}
var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}
return t;};return __assign.apply(this,arguments);};core.config.touchMouseIgnoreWait=500;var ignoreMouseDepth=0;var listenerCnt=0;var isWindowTouchMoveCancelled=false;var PointerDragging=(function(){function PointerDragging(containerEl){var _this=this;this.subjectEl=null;this.downEl=null;this.selector='';this.handleSelector='';this.shouldIgnoreMove=false;this.shouldWatchScroll=true;this.isDragging=false;this.isTouchDragging=false;this.wasTouchScroll=false;this.handleMouseDown=function(ev){if(!_this.shouldIgnoreMouse()&&isPrimaryMouseButton(ev)&&_this.tryStart(ev)){var pev=_this.createEventFromMouse(ev,true);_this.emitter.trigger('pointerdown',pev);_this.initScrollWatch(pev);if(!_this.shouldIgnoreMove){document.addEventListener('mousemove',_this.handleMouseMove);}
document.addEventListener('mouseup',_this.handleMouseUp);}};this.handleMouseMove=function(ev){var pev=_this.createEventFromMouse(ev);_this.recordCoords(pev);_this.emitter.trigger('pointermove',pev);};this.handleMouseUp=function(ev){document.removeEventListener('mousemove',_this.handleMouseMove);document.removeEventListener('mouseup',_this.handleMouseUp);_this.emitter.trigger('pointerup',_this.createEventFromMouse(ev));_this.cleanup();};this.handleTouchStart=function(ev){if(_this.tryStart(ev)){_this.isTouchDragging=true;var pev=_this.createEventFromTouch(ev,true);_this.emitter.trigger('pointerdown',pev);_this.initScrollWatch(pev);var target=ev.target;if(!_this.shouldIgnoreMove){target.addEventListener('touchmove',_this.handleTouchMove);}
target.addEventListener('touchend',_this.handleTouchEnd);target.addEventListener('touchcancel',_this.handleTouchEnd);window.addEventListener('scroll',_this.handleTouchScroll,true);}};this.handleTouchMove=function(ev){var pev=_this.createEventFromTouch(ev);_this.recordCoords(pev);_this.emitter.trigger('pointermove',pev);};this.handleTouchEnd=function(ev){if(_this.isDragging){var target=ev.target;target.removeEventListener('touchmove',_this.handleTouchMove);target.removeEventListener('touchend',_this.handleTouchEnd);target.removeEventListener('touchcancel',_this.handleTouchEnd);window.removeEventListener('scroll',_this.handleTouchScroll,true);_this.emitter.trigger('pointerup',_this.createEventFromTouch(ev));_this.cleanup();_this.isTouchDragging=false;startIgnoringMouse();}};this.handleTouchScroll=function(){_this.wasTouchScroll=true;};this.handleScroll=function(ev){if(!_this.shouldIgnoreMove){var pageX=(window.pageXOffset-_this.prevScrollX)+_this.prevPageX;var pageY=(window.pageYOffset-_this.prevScrollY)+_this.prevPageY;_this.emitter.trigger('pointermove',{origEvent:ev,isTouch:_this.isTouchDragging,subjectEl:_this.subjectEl,pageX:pageX,pageY:pageY,deltaX:pageX-_this.origPageX,deltaY:pageY-_this.origPageY});}};this.containerEl=containerEl;this.emitter=new core.EmitterMixin();containerEl.addEventListener('mousedown',this.handleMouseDown);containerEl.addEventListener('touchstart',this.handleTouchStart,{passive:true});listenerCreated();}
PointerDragging.prototype.destroy=function(){this.containerEl.removeEventListener('mousedown',this.handleMouseDown);this.containerEl.removeEventListener('touchstart',this.handleTouchStart,{passive:true});listenerDestroyed();};PointerDragging.prototype.tryStart=function(ev){var subjectEl=this.querySubjectEl(ev);var downEl=ev.target;if(subjectEl&&(!this.handleSelector||core.elementClosest(downEl,this.handleSelector))){this.subjectEl=subjectEl;this.downEl=downEl;this.isDragging=true;this.wasTouchScroll=false;return true;}
return false;};PointerDragging.prototype.cleanup=function(){isWindowTouchMoveCancelled=false;this.isDragging=false;this.subjectEl=null;this.downEl=null;this.destroyScrollWatch();};PointerDragging.prototype.querySubjectEl=function(ev){if(this.selector){return core.elementClosest(ev.target,this.selector);}
else{return this.containerEl;}};PointerDragging.prototype.shouldIgnoreMouse=function(){return ignoreMouseDepth||this.isTouchDragging;};PointerDragging.prototype.cancelTouchScroll=function(){if(this.isDragging){isWindowTouchMoveCancelled=true;}};PointerDragging.prototype.initScrollWatch=function(ev){if(this.shouldWatchScroll){this.recordCoords(ev);window.addEventListener('scroll',this.handleScroll,true);}};PointerDragging.prototype.recordCoords=function(ev){if(this.shouldWatchScroll){this.prevPageX=ev.pageX;this.prevPageY=ev.pageY;this.prevScrollX=window.pageXOffset;this.prevScrollY=window.pageYOffset;}};PointerDragging.prototype.destroyScrollWatch=function(){if(this.shouldWatchScroll){window.removeEventListener('scroll',this.handleScroll,true);}};PointerDragging.prototype.createEventFromMouse=function(ev,isFirst){var deltaX=0;var deltaY=0;if(isFirst){this.origPageX=ev.pageX;this.origPageY=ev.pageY;}
else{deltaX=ev.pageX-this.origPageX;deltaY=ev.pageY-this.origPageY;}
return{origEvent:ev,isTouch:false,subjectEl:this.subjectEl,pageX:ev.pageX,pageY:ev.pageY,deltaX:deltaX,deltaY:deltaY};};PointerDragging.prototype.createEventFromTouch=function(ev,isFirst){var touches=ev.touches;var pageX;var pageY;var deltaX=0;var deltaY=0;if(touches&&touches.length){pageX=touches[0].pageX;pageY=touches[0].pageY;}
else{pageX=ev.pageX;pageY=ev.pageY;}
if(isFirst){this.origPageX=pageX;this.origPageY=pageY;}
else{deltaX=pageX-this.origPageX;deltaY=pageY-this.origPageY;}
return{origEvent:ev,isTouch:true,subjectEl:this.subjectEl,pageX:pageX,pageY:pageY,deltaX:deltaX,deltaY:deltaY};};return PointerDragging;}());function isPrimaryMouseButton(ev){return ev.button===0&&!ev.ctrlKey;}
function startIgnoringMouse(){ignoreMouseDepth++;setTimeout(function(){ignoreMouseDepth--;},core.config.touchMouseIgnoreWait);}
function listenerCreated(){if(!(listenerCnt++)){window.addEventListener('touchmove',onWindowTouchMove,{passive:false});}}
function listenerDestroyed(){if(!(--listenerCnt)){window.removeEventListener('touchmove',onWindowTouchMove,{passive:false});}}
function onWindowTouchMove(ev){if(isWindowTouchMoveCancelled){ev.preventDefault();}}
var ElementMirror=(function(){function ElementMirror(){this.isVisible=false;this.sourceEl=null;this.mirrorEl=null;this.sourceElRect=null;this.parentNode=document.body;this.zIndex=9999;this.revertDuration=0;}
ElementMirror.prototype.start=function(sourceEl,pageX,pageY){this.sourceEl=sourceEl;this.sourceElRect=this.sourceEl.getBoundingClientRect();this.origScreenX=pageX-window.pageXOffset;this.origScreenY=pageY-window.pageYOffset;this.deltaX=0;this.deltaY=0;this.updateElPosition();};ElementMirror.prototype.handleMove=function(pageX,pageY){this.deltaX=(pageX-window.pageXOffset)-this.origScreenX;this.deltaY=(pageY-window.pageYOffset)-this.origScreenY;this.updateElPosition();};ElementMirror.prototype.setIsVisible=function(bool){if(bool){if(!this.isVisible){if(this.mirrorEl){this.mirrorEl.style.display='';}
this.isVisible=bool;this.updateElPosition();}}
else{if(this.isVisible){if(this.mirrorEl){this.mirrorEl.style.display='none';}
this.isVisible=bool;}}};ElementMirror.prototype.stop=function(needsRevertAnimation,callback){var _this=this;var done=function(){_this.cleanup();callback();};if(needsRevertAnimation&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)){this.doRevertAnimation(done,this.revertDuration);}
else{setTimeout(done,0);}};ElementMirror.prototype.doRevertAnimation=function(callback,revertDuration){var mirrorEl=this.mirrorEl;var finalSourceElRect=this.sourceEl.getBoundingClientRect();mirrorEl.style.transition='top '+revertDuration+'ms,'+
'left '+revertDuration+'ms';core.applyStyle(mirrorEl,{left:finalSourceElRect.left,top:finalSourceElRect.top});core.whenTransitionDone(mirrorEl,function(){mirrorEl.style.transition='';callback();});};ElementMirror.prototype.cleanup=function(){if(this.mirrorEl){core.removeElement(this.mirrorEl);this.mirrorEl=null;}
this.sourceEl=null;};ElementMirror.prototype.updateElPosition=function(){if(this.sourceEl&&this.isVisible){core.applyStyle(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY});}};ElementMirror.prototype.getMirrorEl=function(){var sourceElRect=this.sourceElRect;var mirrorEl=this.mirrorEl;if(!mirrorEl){mirrorEl=this.mirrorEl=this.sourceEl.cloneNode(true);mirrorEl.classList.add('fc-unselectable');mirrorEl.classList.add('fc-dragging');core.applyStyle(mirrorEl,{position:'fixed',zIndex:this.zIndex,visibility:'',boxSizing:'border-box',width:sourceElRect.right-sourceElRect.left,height:sourceElRect.bottom-sourceElRect.top,right:'auto',bottom:'auto',margin:0});this.parentNode.appendChild(mirrorEl);}
return mirrorEl;};return ElementMirror;}());var ScrollGeomCache=(function(_super){__extends(ScrollGeomCache,_super);function ScrollGeomCache(scrollController,doesListening){var _this=_super.call(this)||this;_this.handleScroll=function(){_this.scrollTop=_this.scrollController.getScrollTop();_this.scrollLeft=_this.scrollController.getScrollLeft();_this.handleScrollChange();};_this.scrollController=scrollController;_this.doesListening=doesListening;_this.scrollTop=_this.origScrollTop=scrollController.getScrollTop();_this.scrollLeft=_this.origScrollLeft=scrollController.getScrollLeft();_this.scrollWidth=scrollController.getScrollWidth();_this.scrollHeight=scrollController.getScrollHeight();_this.clientWidth=scrollController.getClientWidth();_this.clientHeight=scrollController.getClientHeight();_this.clientRect=_this.computeClientRect();if(_this.doesListening){_this.getEventTarget().addEventListener('scroll',_this.handleScroll);}
return _this;}
ScrollGeomCache.prototype.destroy=function(){if(this.doesListening){this.getEventTarget().removeEventListener('scroll',this.handleScroll);}};ScrollGeomCache.prototype.getScrollTop=function(){return this.scrollTop;};ScrollGeomCache.prototype.getScrollLeft=function(){return this.scrollLeft;};ScrollGeomCache.prototype.setScrollTop=function(top){this.scrollController.setScrollTop(top);if(!this.doesListening){this.scrollTop=Math.max(Math.min(top,this.getMaxScrollTop()),0);this.handleScrollChange();}};ScrollGeomCache.prototype.setScrollLeft=function(top){this.scrollController.setScrollLeft(top);if(!this.doesListening){this.scrollLeft=Math.max(Math.min(top,this.getMaxScrollLeft()),0);this.handleScrollChange();}};ScrollGeomCache.prototype.getClientWidth=function(){return this.clientWidth;};ScrollGeomCache.prototype.getClientHeight=function(){return this.clientHeight;};ScrollGeomCache.prototype.getScrollWidth=function(){return this.scrollWidth;};ScrollGeomCache.prototype.getScrollHeight=function(){return this.scrollHeight;};ScrollGeomCache.prototype.handleScrollChange=function(){};return ScrollGeomCache;}(core.ScrollController));var ElementScrollGeomCache=(function(_super){__extends(ElementScrollGeomCache,_super);function ElementScrollGeomCache(el,doesListening){return _super.call(this,new core.ElementScrollController(el),doesListening)||this;}
ElementScrollGeomCache.prototype.getEventTarget=function(){return this.scrollController.el;};ElementScrollGeomCache.prototype.computeClientRect=function(){return core.computeInnerRect(this.scrollController.el);};return ElementScrollGeomCache;}(ScrollGeomCache));var WindowScrollGeomCache=(function(_super){__extends(WindowScrollGeomCache,_super);function WindowScrollGeomCache(doesListening){return _super.call(this,new core.WindowScrollController(),doesListening)||this;}
WindowScrollGeomCache.prototype.getEventTarget=function(){return window;};WindowScrollGeomCache.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight};};WindowScrollGeomCache.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect();};return WindowScrollGeomCache;}(ScrollGeomCache));var getTime=typeof performance==='function'?performance.now:Date.now;var AutoScroller=(function(){function AutoScroller(){var _this=this;this.isEnabled=true;this.scrollQuery=[window,'.fc-scroller'];this.edgeThreshold=50;this.maxVelocity=300;this.pointerScreenX=null;this.pointerScreenY=null;this.isAnimating=false;this.scrollCaches=null;this.everMovedUp=false;this.everMovedDown=false;this.everMovedLeft=false;this.everMovedRight=false;this.animate=function(){if(_this.isAnimating){var edge=_this.computeBestEdge(_this.pointerScreenX+window.pageXOffset,_this.pointerScreenY+window.pageYOffset);if(edge){var now=getTime();_this.handleSide(edge,(now-_this.msSinceRequest)/1000);_this.requestAnimation(now);}
else{_this.isAnimating=false;}}};}
AutoScroller.prototype.start=function(pageX,pageY){if(this.isEnabled){this.scrollCaches=this.buildCaches();this.pointerScreenX=null;this.pointerScreenY=null;this.everMovedUp=false;this.everMovedDown=false;this.everMovedLeft=false;this.everMovedRight=false;this.handleMove(pageX,pageY);}};AutoScroller.prototype.handleMove=function(pageX,pageY){if(this.isEnabled){var pointerScreenX=pageX-window.pageXOffset;var pointerScreenY=pageY-window.pageYOffset;var yDelta=this.pointerScreenY===null?0:pointerScreenY-this.pointerScreenY;var xDelta=this.pointerScreenX===null?0:pointerScreenX-this.pointerScreenX;if(yDelta<0){this.everMovedUp=true;}
else if(yDelta>0){this.everMovedDown=true;}
if(xDelta<0){this.everMovedLeft=true;}
else if(xDelta>0){this.everMovedRight=true;}
this.pointerScreenX=pointerScreenX;this.pointerScreenY=pointerScreenY;if(!this.isAnimating){this.isAnimating=true;this.requestAnimation(getTime());}}};AutoScroller.prototype.stop=function(){if(this.isEnabled){this.isAnimating=false;for(var _i=0,_a=this.scrollCaches;_i<_a.length;_i++){var scrollCache=_a[_i];scrollCache.destroy();}
this.scrollCaches=null;}};AutoScroller.prototype.requestAnimation=function(now){this.msSinceRequest=now;requestAnimationFrame(this.animate);};AutoScroller.prototype.handleSide=function(edge,seconds){var scrollCache=edge.scrollCache;var edgeThreshold=this.edgeThreshold;var invDistance=edgeThreshold-edge.distance;var velocity=(invDistance*invDistance)/(edgeThreshold*edgeThreshold)*this.maxVelocity*seconds;var sign=1;switch(edge.name){case 'left':sign=-1;case 'right':scrollCache.setScrollLeft(scrollCache.getScrollLeft()+velocity*sign);break;case 'top':sign=-1;case 'bottom':scrollCache.setScrollTop(scrollCache.getScrollTop()+velocity*sign);break;}};AutoScroller.prototype.computeBestEdge=function(left,top){var edgeThreshold=this.edgeThreshold;var bestSide=null;for(var _i=0,_a=this.scrollCaches;_i<_a.length;_i++){var scrollCache=_a[_i];var rect=scrollCache.clientRect;var leftDist=left-rect.left;var rightDist=rect.right-left;var topDist=top-rect.top;var bottomDist=rect.bottom-top;if(leftDist>=0&&rightDist>=0&&topDist>=0&&bottomDist>=0){if(topDist<=edgeThreshold&&this.everMovedUp&&scrollCache.canScrollUp()&&(!bestSide||bestSide.distance>topDist)){bestSide={scrollCache:scrollCache,name:'top',distance:topDist};}
if(bottomDist<=edgeThreshold&&this.everMovedDown&&scrollCache.canScrollDown()&&(!bestSide||bestSide.distance>bottomDist)){bestSide={scrollCache:scrollCache,name:'bottom',distance:bottomDist};}
if(leftDist<=edgeThreshold&&this.everMovedLeft&&scrollCache.canScrollLeft()&&(!bestSide||bestSide.distance>leftDist)){bestSide={scrollCache:scrollCache,name:'left',distance:leftDist};}
if(rightDist<=edgeThreshold&&this.everMovedRight&&scrollCache.canScrollRight()&&(!bestSide||bestSide.distance>rightDist)){bestSide={scrollCache:scrollCache,name:'right',distance:rightDist};}}}
return bestSide;};AutoScroller.prototype.buildCaches=function(){return this.queryScrollEls().map(function(el){if(el===window){return new WindowScrollGeomCache(false);}
else{return new ElementScrollGeomCache(el,false);}});};AutoScroller.prototype.queryScrollEls=function(){var els=[];for(var _i=0,_a=this.scrollQuery;_i<_a.length;_i++){var query=_a[_i];if(typeof query==='object'){els.push(query);}
else{els.push.apply(els,Array.prototype.slice.call(document.querySelectorAll(query)));}}
return els;};return AutoScroller;}());var FeaturefulElementDragging=(function(_super){__extends(FeaturefulElementDragging,_super);function FeaturefulElementDragging(containerEl){var _this=_super.call(this,containerEl)||this;_this.delay=null;_this.minDistance=0;_this.touchScrollAllowed=true;_this.mirrorNeedsRevert=false;_this.isInteracting=false;_this.isDragging=false;_this.isDelayEnded=false;_this.isDistanceSurpassed=false;_this.delayTimeoutId=null;_this.onPointerDown=function(ev){if(!_this.isDragging){_this.isInteracting=true;_this.isDelayEnded=false;_this.isDistanceSurpassed=false;core.preventSelection(document.body);core.preventContextMenu(document.body);if(!ev.isTouch){ev.origEvent.preventDefault();}
_this.emitter.trigger('pointerdown',ev);if(!_this.pointer.shouldIgnoreMove){_this.mirror.setIsVisible(false);_this.mirror.start(ev.subjectEl,ev.pageX,ev.pageY);_this.startDelay(ev);if(!_this.minDistance){_this.handleDistanceSurpassed(ev);}}}};_this.onPointerMove=function(ev){if(_this.isInteracting){_this.emitter.trigger('pointermove',ev);if(!_this.isDistanceSurpassed){var minDistance=_this.minDistance;var distanceSq=void 0;var deltaX=ev.deltaX,deltaY=ev.deltaY;distanceSq=deltaX*deltaX+deltaY*deltaY;if(distanceSq>=minDistance*minDistance){_this.handleDistanceSurpassed(ev);}}
if(_this.isDragging){if(ev.origEvent.type!=='scroll'){_this.mirror.handleMove(ev.pageX,ev.pageY);_this.autoScroller.handleMove(ev.pageX,ev.pageY);}
_this.emitter.trigger('dragmove',ev);}}};_this.onPointerUp=function(ev){if(_this.isInteracting){_this.isInteracting=false;core.allowSelection(document.body);core.allowContextMenu(document.body);_this.emitter.trigger('pointerup',ev);if(_this.isDragging){_this.autoScroller.stop();_this.tryStopDrag(ev);}
if(_this.delayTimeoutId){clearTimeout(_this.delayTimeoutId);_this.delayTimeoutId=null;}}};var pointer=_this.pointer=new PointerDragging(containerEl);pointer.emitter.on('pointerdown',_this.onPointerDown);pointer.emitter.on('pointermove',_this.onPointerMove);pointer.emitter.on('pointerup',_this.onPointerUp);_this.mirror=new ElementMirror();_this.autoScroller=new AutoScroller();return _this;}
FeaturefulElementDragging.prototype.destroy=function(){this.pointer.destroy();};FeaturefulElementDragging.prototype.startDelay=function(ev){var _this=this;if(typeof this.delay==='number'){this.delayTimeoutId=setTimeout(function(){_this.delayTimeoutId=null;_this.handleDelayEnd(ev);},this.delay);}
else{this.handleDelayEnd(ev);}};FeaturefulElementDragging.prototype.handleDelayEnd=function(ev){this.isDelayEnded=true;this.tryStartDrag(ev);};FeaturefulElementDragging.prototype.handleDistanceSurpassed=function(ev){this.isDistanceSurpassed=true;this.tryStartDrag(ev);};FeaturefulElementDragging.prototype.tryStartDrag=function(ev){if(this.isDelayEnded&&this.isDistanceSurpassed){if(!this.pointer.wasTouchScroll||this.touchScrollAllowed){this.isDragging=true;this.mirrorNeedsRevert=false;this.autoScroller.start(ev.pageX,ev.pageY);this.emitter.trigger('dragstart',ev);if(this.touchScrollAllowed===false){this.pointer.cancelTouchScroll();}}}};FeaturefulElementDragging.prototype.tryStopDrag=function(ev){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,ev));};FeaturefulElementDragging.prototype.stopDrag=function(ev){this.isDragging=false;this.emitter.trigger('dragend',ev);};FeaturefulElementDragging.prototype.setIgnoreMove=function(bool){this.pointer.shouldIgnoreMove=bool;};FeaturefulElementDragging.prototype.setMirrorIsVisible=function(bool){this.mirror.setIsVisible(bool);};FeaturefulElementDragging.prototype.setMirrorNeedsRevert=function(bool){this.mirrorNeedsRevert=bool;};FeaturefulElementDragging.prototype.setAutoScrollEnabled=function(bool){this.autoScroller.isEnabled=bool;};return FeaturefulElementDragging;}(core.ElementDragging));var OffsetTracker=(function(){function OffsetTracker(el){this.origRect=core.computeRect(el);this.scrollCaches=core.getClippingParents(el).map(function(el){return new ElementScrollGeomCache(el,true);});}
OffsetTracker.prototype.destroy=function(){for(var _i=0,_a=this.scrollCaches;_i<_a.length;_i++){var scrollCache=_a[_i];scrollCache.destroy();}};OffsetTracker.prototype.computeLeft=function(){var left=this.origRect.left;for(var _i=0,_a=this.scrollCaches;_i<_a.length;_i++){var scrollCache=_a[_i];left+=scrollCache.origScrollLeft-scrollCache.getScrollLeft();}
return left;};OffsetTracker.prototype.computeTop=function(){var top=this.origRect.top;for(var _i=0,_a=this.scrollCaches;_i<_a.length;_i++){var scrollCache=_a[_i];top+=scrollCache.origScrollTop-scrollCache.getScrollTop();}
return top;};OffsetTracker.prototype.isWithinClipping=function(pageX,pageY){var point={left:pageX,top:pageY};for(var _i=0,_a=this.scrollCaches;_i<_a.length;_i++){var scrollCache=_a[_i];if(!isIgnoredClipping(scrollCache.getEventTarget())&&!core.pointInsideRect(point,scrollCache.clientRect)){return false;}}
return true;};return OffsetTracker;}());function isIgnoredClipping(node){var tagName=node.tagName;return tagName==='HTML'||tagName==='BODY';}
var HitDragging=(function(){function HitDragging(dragging,droppableStore){var _this=this;this.useSubjectCenter=false;this.requireInitial=true;this.initialHit=null;this.movingHit=null;this.finalHit=null;this.handlePointerDown=function(ev){var dragging=_this.dragging;_this.initialHit=null;_this.movingHit=null;_this.finalHit=null;_this.prepareHits();_this.processFirstCoord(ev);if(_this.initialHit||!_this.requireInitial){dragging.setIgnoreMove(false);_this.emitter.trigger('pointerdown',ev);}
else{dragging.setIgnoreMove(true);}};this.handleDragStart=function(ev){_this.emitter.trigger('dragstart',ev);_this.handleMove(ev,true);};this.handleDragMove=function(ev){_this.emitter.trigger('dragmove',ev);_this.handleMove(ev);};this.handlePointerUp=function(ev){_this.releaseHits();_this.emitter.trigger('pointerup',ev);};this.handleDragEnd=function(ev){if(_this.movingHit){_this.emitter.trigger('hitupdate',null,true,ev);}
_this.finalHit=_this.movingHit;_this.movingHit=null;_this.emitter.trigger('dragend',ev);};this.droppableStore=droppableStore;dragging.emitter.on('pointerdown',this.handlePointerDown);dragging.emitter.on('dragstart',this.handleDragStart);dragging.emitter.on('dragmove',this.handleDragMove);dragging.emitter.on('pointerup',this.handlePointerUp);dragging.emitter.on('dragend',this.handleDragEnd);this.dragging=dragging;this.emitter=new core.EmitterMixin();}
HitDragging.prototype.processFirstCoord=function(ev){var origPoint={left:ev.pageX,top:ev.pageY};var adjustedPoint=origPoint;var subjectEl=ev.subjectEl;var subjectRect;if(subjectEl!==document){subjectRect=core.computeRect(subjectEl);adjustedPoint=core.constrainPoint(adjustedPoint,subjectRect);}
var initialHit=this.initialHit=this.queryHitForOffset(adjustedPoint.left,adjustedPoint.top);if(initialHit){if(this.useSubjectCenter&&subjectRect){var slicedSubjectRect=core.intersectRects(subjectRect,initialHit.rect);if(slicedSubjectRect){adjustedPoint=core.getRectCenter(slicedSubjectRect);}}
this.coordAdjust=core.diffPoints(adjustedPoint,origPoint);}
else{this.coordAdjust={left:0,top:0};}};HitDragging.prototype.handleMove=function(ev,forceHandle){var hit=this.queryHitForOffset(ev.pageX+this.coordAdjust.left,ev.pageY+this.coordAdjust.top);if(forceHandle||!isHitsEqual(this.movingHit,hit)){this.movingHit=hit;this.emitter.trigger('hitupdate',hit,false,ev);}};HitDragging.prototype.prepareHits=function(){this.offsetTrackers=core.mapHash(this.droppableStore,function(interactionSettings){interactionSettings.component.buildPositionCaches();return new OffsetTracker(interactionSettings.el);});};HitDragging.prototype.releaseHits=function(){var offsetTrackers=this.offsetTrackers;for(var id in offsetTrackers){offsetTrackers[id].destroy();}
this.offsetTrackers={};};HitDragging.prototype.queryHitForOffset=function(offsetLeft,offsetTop){var _a=this,droppableStore=_a.droppableStore,offsetTrackers=_a.offsetTrackers;var bestHit=null;for(var id in droppableStore){var component=droppableStore[id].component;var offsetTracker=offsetTrackers[id];if(offsetTracker.isWithinClipping(offsetLeft,offsetTop)){var originLeft=offsetTracker.computeLeft();var originTop=offsetTracker.computeTop();var positionLeft=offsetLeft-originLeft;var positionTop=offsetTop-originTop;var origRect=offsetTracker.origRect;var width=origRect.right-origRect.left;var height=origRect.bottom-origRect.top;if(positionLeft>=0&&positionLeft<width&&positionTop>=0&&positionTop<height){var hit=component.queryHit(positionLeft,positionTop,width,height);if(hit&&(!component.props.dateProfile||core.rangeContainsRange(component.props.dateProfile.activeRange,hit.dateSpan.range))&&(!bestHit||hit.layer>bestHit.layer)){hit.rect.left+=originLeft;hit.rect.right+=originLeft;hit.rect.top+=originTop;hit.rect.bottom+=originTop;bestHit=hit;}}}}
return bestHit;};return HitDragging;}());function isHitsEqual(hit0,hit1){if(!hit0&&!hit1){return true;}
if(Boolean(hit0)!==Boolean(hit1)){return false;}
return core.isDateSpansEqual(hit0.dateSpan,hit1.dateSpan);}
var DateClicking=(function(_super){__extends(DateClicking,_super);function DateClicking(settings){var _this=_super.call(this,settings)||this;_this.handlePointerDown=function(ev){var dragging=_this.dragging;dragging.setIgnoreMove(!_this.component.isValidDateDownEl(dragging.pointer.downEl));};_this.handleDragEnd=function(ev){var component=_this.component;var _a=component.context,calendar=_a.calendar,view=_a.view;var pointer=_this.dragging.pointer;if(!pointer.wasTouchScroll){var _b=_this.hitDragging,initialHit=_b.initialHit,finalHit=_b.finalHit;if(initialHit&&finalHit&&isHitsEqual(initialHit,finalHit)){calendar.triggerDateClick(initialHit.dateSpan,initialHit.dayEl,view,ev.origEvent);}}};var component=settings.component;_this.dragging=new FeaturefulElementDragging(component.el);_this.dragging.autoScroller.isEnabled=false;var hitDragging=_this.hitDragging=new HitDragging(_this.dragging,core.interactionSettingsToStore(settings));hitDragging.emitter.on('pointerdown',_this.handlePointerDown);hitDragging.emitter.on('dragend',_this.handleDragEnd);return _this;}
DateClicking.prototype.destroy=function(){this.dragging.destroy();};return DateClicking;}(core.Interaction));var DateSelecting=(function(_super){__extends(DateSelecting,_super);function DateSelecting(settings){var _this=_super.call(this,settings)||this;_this.dragSelection=null;_this.handlePointerDown=function(ev){var _a=_this,component=_a.component,dragging=_a.dragging;var options=component.context.options;var canSelect=options.selectable&&component.isValidDateDownEl(ev.origEvent.target);dragging.setIgnoreMove(!canSelect);dragging.delay=ev.isTouch?getComponentTouchDelay(component):null;};_this.handleDragStart=function(ev){_this.component.context.calendar.unselect(ev);};_this.handleHitUpdate=function(hit,isFinal){var calendar=_this.component.context.calendar;var dragSelection=null;var isInvalid=false;if(hit){dragSelection=joinHitsIntoSelection(_this.hitDragging.initialHit,hit,calendar.pluginSystem.hooks.dateSelectionTransformers);if(!dragSelection||!_this.component.isDateSelectionValid(dragSelection)){isInvalid=true;dragSelection=null;}}
if(dragSelection){calendar.dispatch({type:'SELECT_DATES',selection:dragSelection});}
else if(!isFinal){calendar.dispatch({type:'UNSELECT_DATES'});}
if(!isInvalid){core.enableCursor();}
else{core.disableCursor();}
if(!isFinal){_this.dragSelection=dragSelection;}};_this.handlePointerUp=function(pev){if(_this.dragSelection){_this.component.context.calendar.triggerDateSelect(_this.dragSelection,pev);_this.dragSelection=null;}};var component=settings.component;var options=component.context.options;var dragging=_this.dragging=new FeaturefulElementDragging(component.el);dragging.touchScrollAllowed=false;dragging.minDistance=options.selectMinDistance||0;dragging.autoScroller.isEnabled=options.dragScroll;var hitDragging=_this.hitDragging=new HitDragging(_this.dragging,core.interactionSettingsToStore(settings));hitDragging.emitter.on('pointerdown',_this.handlePointerDown);hitDragging.emitter.on('dragstart',_this.handleDragStart);hitDragging.emitter.on('hitupdate',_this.handleHitUpdate);hitDragging.emitter.on('pointerup',_this.handlePointerUp);return _this;}
DateSelecting.prototype.destroy=function(){this.dragging.destroy();};return DateSelecting;}(core.Interaction));function getComponentTouchDelay(component){var options=component.context.options;var delay=options.selectLongPressDelay;if(delay==null){delay=options.longPressDelay;}
return delay;}
function joinHitsIntoSelection(hit0,hit1,dateSelectionTransformers){var dateSpan0=hit0.dateSpan;var dateSpan1=hit1.dateSpan;var ms=[dateSpan0.range.start,dateSpan0.range.end,dateSpan1.range.start,dateSpan1.range.end];ms.sort(core.compareNumbers);var props={};for(var _i=0,dateSelectionTransformers_1=dateSelectionTransformers;_i<dateSelectionTransformers_1.length;_i++){var transformer=dateSelectionTransformers_1[_i];var res=transformer(hit0,hit1);if(res===false){return null;}
else if(res){__assign(props,res);}}
props.range={start:ms[0],end:ms[3]};props.allDay=dateSpan0.allDay;return props;}
var EventDragging=(function(_super){__extends(EventDragging,_super);function EventDragging(settings){var _this=_super.call(this,settings)||this;_this.subjectSeg=null;_this.isDragging=false;_this.eventRange=null;_this.relevantEvents=null;_this.receivingCalendar=null;_this.validMutation=null;_this.mutatedRelevantEvents=null;_this.handlePointerDown=function(ev){var origTarget=ev.origEvent.target;var _a=_this,component=_a.component,dragging=_a.dragging;var mirror=dragging.mirror;var options=component.context.options;var initialCalendar=component.context.calendar;var subjectSeg=_this.subjectSeg=core.getElSeg(ev.subjectEl);var eventRange=_this.eventRange=subjectSeg.eventRange;var eventInstanceId=eventRange.instance.instanceId;_this.relevantEvents=core.getRelevantEvents(initialCalendar.state.eventStore,eventInstanceId);dragging.minDistance=ev.isTouch?0:options.eventDragMinDistance;dragging.delay=(ev.isTouch&&eventInstanceId!==component.props.eventSelection)?getComponentTouchDelay$1(component):null;mirror.parentNode=initialCalendar.el;mirror.revertDuration=options.dragRevertDuration;var isValid=component.isValidSegDownEl(origTarget)&&!core.elementClosest(origTarget,'.fc-resizer');dragging.setIgnoreMove(!isValid);_this.isDragging=isValid&&ev.subjectEl.classList.contains('fc-draggable');};_this.handleDragStart=function(ev){var context=_this.component.context;var initialCalendar=context.calendar;var eventRange=_this.eventRange;var eventInstanceId=eventRange.instance.instanceId;if(ev.isTouch){if(eventInstanceId!==_this.component.props.eventSelection){initialCalendar.dispatch({type:'SELECT_EVENT',eventInstanceId:eventInstanceId});}}
else{initialCalendar.dispatch({type:'UNSELECT_EVENT'});}
if(_this.isDragging){initialCalendar.unselect(ev);initialCalendar.publiclyTrigger('eventDragStart',[{el:_this.subjectSeg.el,event:new core.EventApi(initialCalendar,eventRange.def,eventRange.instance),jsEvent:ev.origEvent,view:context.view}]);}};_this.handleHitUpdate=function(hit,isFinal){if(!_this.isDragging){return;}
var relevantEvents=_this.relevantEvents;var initialHit=_this.hitDragging.initialHit;var initialCalendar=_this.component.context.calendar;var receivingCalendar=null;var mutation=null;var mutatedRelevantEvents=null;var isInvalid=false;var interaction={affectedEvents:relevantEvents,mutatedEvents:core.createEmptyEventStore(),isEvent:true,origSeg:_this.subjectSeg};if(hit){var receivingComponent=hit.component;receivingCalendar=receivingComponent.context.calendar;var receivingOptions=receivingComponent.context.options;if(initialCalendar===receivingCalendar||receivingOptions.editable&&receivingOptions.droppable){mutation=computeEventMutation(initialHit,hit,receivingCalendar.pluginSystem.hooks.eventDragMutationMassagers);if(mutation){mutatedRelevantEvents=core.applyMutationToEventStore(relevantEvents,receivingCalendar.eventUiBases,mutation,receivingCalendar);interaction.mutatedEvents=mutatedRelevantEvents;if(!receivingComponent.isInteractionValid(interaction)){isInvalid=true;mutation=null;mutatedRelevantEvents=null;interaction.mutatedEvents=core.createEmptyEventStore();}}}
else{receivingCalendar=null;}}
_this.displayDrag(receivingCalendar,interaction);if(!isInvalid){core.enableCursor();}
else{core.disableCursor();}
if(!isFinal){if(initialCalendar===receivingCalendar&&isHitsEqual(initialHit,hit)){mutation=null;}
_this.dragging.setMirrorNeedsRevert(!mutation);_this.dragging.setMirrorIsVisible(!hit||!document.querySelector('.fc-mirror'));_this.receivingCalendar=receivingCalendar;_this.validMutation=mutation;_this.mutatedRelevantEvents=mutatedRelevantEvents;}};_this.handlePointerUp=function(){if(!_this.isDragging){_this.cleanup();}};_this.handleDragEnd=function(ev){if(_this.isDragging){var context=_this.component.context;var initialCalendar_1=context.calendar;var initialView=context.view;var _a=_this,receivingCalendar=_a.receivingCalendar,validMutation=_a.validMutation;var eventDef=_this.eventRange.def;var eventInstance=_this.eventRange.instance;var eventApi=new core.EventApi(initialCalendar_1,eventDef,eventInstance);var relevantEvents_1=_this.relevantEvents;var mutatedRelevantEvents=_this.mutatedRelevantEvents;var finalHit=_this.hitDragging.finalHit;_this.clearDrag();initialCalendar_1.publiclyTrigger('eventDragStop',[{el:_this.subjectSeg.el,event:eventApi,jsEvent:ev.origEvent,view:initialView}]);if(validMutation){if(receivingCalendar===initialCalendar_1){initialCalendar_1.dispatch({type:'MERGE_EVENTS',eventStore:mutatedRelevantEvents});var transformed={};for(var _i=0,_b=initialCalendar_1.pluginSystem.hooks.eventDropTransformers;_i<_b.length;_i++){var transformer=_b[_i];__assign(transformed,transformer(validMutation,initialCalendar_1));}
var eventDropArg=__assign({},transformed,{el:ev.subjectEl,delta:validMutation.datesDelta,oldEvent:eventApi,event:new core.EventApi(initialCalendar_1,mutatedRelevantEvents.defs[eventDef.defId],eventInstance?mutatedRelevantEvents.instances[eventInstance.instanceId]:null),revert:function(){initialCalendar_1.dispatch({type:'MERGE_EVENTS',eventStore:relevantEvents_1});},jsEvent:ev.origEvent,view:initialView});initialCalendar_1.publiclyTrigger('eventDrop',[eventDropArg]);}
else if(receivingCalendar){initialCalendar_1.publiclyTrigger('eventLeave',[{draggedEl:ev.subjectEl,event:eventApi,view:initialView}]);initialCalendar_1.dispatch({type:'REMOVE_EVENT_INSTANCES',instances:_this.mutatedRelevantEvents.instances});receivingCalendar.dispatch({type:'MERGE_EVENTS',eventStore:_this.mutatedRelevantEvents});if(ev.isTouch){receivingCalendar.dispatch({type:'SELECT_EVENT',eventInstanceId:eventInstance.instanceId});}
var dropArg=__assign({},receivingCalendar.buildDatePointApi(finalHit.dateSpan),{draggedEl:ev.subjectEl,jsEvent:ev.origEvent,view:finalHit.component});receivingCalendar.publiclyTrigger('drop',[dropArg]);receivingCalendar.publiclyTrigger('eventReceive',[{draggedEl:ev.subjectEl,event:new core.EventApi(receivingCalendar,mutatedRelevantEvents.defs[eventDef.defId],mutatedRelevantEvents.instances[eventInstance.instanceId]),view:finalHit.component}]);}}
else{initialCalendar_1.publiclyTrigger('_noEventDrop');}}
_this.cleanup();};var component=_this.component;var options=component.context.options;var dragging=_this.dragging=new FeaturefulElementDragging(component.el);dragging.pointer.selector=EventDragging.SELECTOR;dragging.touchScrollAllowed=false;dragging.autoScroller.isEnabled=options.dragScroll;var hitDragging=_this.hitDragging=new HitDragging(_this.dragging,core.interactionSettingsStore);hitDragging.useSubjectCenter=settings.useEventCenter;hitDragging.emitter.on('pointerdown',_this.handlePointerDown);hitDragging.emitter.on('dragstart',_this.handleDragStart);hitDragging.emitter.on('hitupdate',_this.handleHitUpdate);hitDragging.emitter.on('pointerup',_this.handlePointerUp);hitDragging.emitter.on('dragend',_this.handleDragEnd);return _this;}
EventDragging.prototype.destroy=function(){this.dragging.destroy();};EventDragging.prototype.displayDrag=function(nextCalendar,state){var initialCalendar=this.component.context.calendar;var prevCalendar=this.receivingCalendar;if(prevCalendar&&prevCalendar!==nextCalendar){if(prevCalendar===initialCalendar){prevCalendar.dispatch({type:'SET_EVENT_DRAG',state:{affectedEvents:state.affectedEvents,mutatedEvents:core.createEmptyEventStore(),isEvent:true,origSeg:state.origSeg}});}
else{prevCalendar.dispatch({type:'UNSET_EVENT_DRAG'});}}
if(nextCalendar){nextCalendar.dispatch({type:'SET_EVENT_DRAG',state:state});}};EventDragging.prototype.clearDrag=function(){var initialCalendar=this.component.context.calendar;var receivingCalendar=this.receivingCalendar;if(receivingCalendar){receivingCalendar.dispatch({type:'UNSET_EVENT_DRAG'});}
if(initialCalendar!==receivingCalendar){initialCalendar.dispatch({type:'UNSET_EVENT_DRAG'});}};EventDragging.prototype.cleanup=function(){this.subjectSeg=null;this.isDragging=false;this.eventRange=null;this.relevantEvents=null;this.receivingCalendar=null;this.validMutation=null;this.mutatedRelevantEvents=null;};EventDragging.SELECTOR='.fc-draggable, .fc-resizable';return EventDragging;}(core.Interaction));function computeEventMutation(hit0,hit1,massagers){var dateSpan0=hit0.dateSpan;var dateSpan1=hit1.dateSpan;var date0=dateSpan0.range.start;var date1=dateSpan1.range.start;var standardProps={};if(dateSpan0.allDay!==dateSpan1.allDay){standardProps.allDay=dateSpan1.allDay;standardProps.hasEnd=hit1.component.context.options.allDayMaintainDuration;if(dateSpan1.allDay){date0=core.startOfDay(date0);}}
var delta=core.diffDates(date0,date1,hit0.component.context.dateEnv,hit0.component===hit1.component?hit0.component.largeUnit:null);if(delta.milliseconds){standardProps.allDay=false;}
var mutation={datesDelta:delta,standardProps:standardProps};for(var _i=0,massagers_1=massagers;_i<massagers_1.length;_i++){var massager=massagers_1[_i];massager(mutation,hit0,hit1);}
return mutation;}
function getComponentTouchDelay$1(component){var options=component.context.options;var delay=options.eventLongPressDelay;if(delay==null){delay=options.longPressDelay;}
return delay;}
var EventDragging$1=(function(_super){__extends(EventDragging,_super);function EventDragging(settings){var _this=_super.call(this,settings)||this;_this.draggingSeg=null;_this.eventRange=null;_this.relevantEvents=null;_this.validMutation=null;_this.mutatedRelevantEvents=null;_this.handlePointerDown=function(ev){var component=_this.component;var seg=_this.querySeg(ev);var eventRange=_this.eventRange=seg.eventRange;_this.dragging.minDistance=component.context.options.eventDragMinDistance;_this.dragging.setIgnoreMove(!_this.component.isValidSegDownEl(ev.origEvent.target)||(ev.isTouch&&_this.component.props.eventSelection!==eventRange.instance.instanceId));};_this.handleDragStart=function(ev){var _a=_this.component.context,calendar=_a.calendar,view=_a.view;var eventRange=_this.eventRange;_this.relevantEvents=core.getRelevantEvents(calendar.state.eventStore,_this.eventRange.instance.instanceId);_this.draggingSeg=_this.querySeg(ev);calendar.unselect();calendar.publiclyTrigger('eventResizeStart',[{el:_this.draggingSeg.el,event:new core.EventApi(calendar,eventRange.def,eventRange.instance),jsEvent:ev.origEvent,view:view}]);};_this.handleHitUpdate=function(hit,isFinal,ev){var calendar=_this.component.context.calendar;var relevantEvents=_this.relevantEvents;var initialHit=_this.hitDragging.initialHit;var eventInstance=_this.eventRange.instance;var mutation=null;var mutatedRelevantEvents=null;var isInvalid=false;var interaction={affectedEvents:relevantEvents,mutatedEvents:core.createEmptyEventStore(),isEvent:true,origSeg:_this.draggingSeg};if(hit){mutation=computeMutation(initialHit,hit,ev.subjectEl.classList.contains('fc-start-resizer'),eventInstance.range,calendar.pluginSystem.hooks.eventResizeJoinTransforms);}
if(mutation){mutatedRelevantEvents=core.applyMutationToEventStore(relevantEvents,calendar.eventUiBases,mutation,calendar);interaction.mutatedEvents=mutatedRelevantEvents;if(!_this.component.isInteractionValid(interaction)){isInvalid=true;mutation=null;mutatedRelevantEvents=null;interaction.mutatedEvents=null;}}
if(mutatedRelevantEvents){calendar.dispatch({type:'SET_EVENT_RESIZE',state:interaction});}
else{calendar.dispatch({type:'UNSET_EVENT_RESIZE'});}
if(!isInvalid){core.enableCursor();}
else{core.disableCursor();}
if(!isFinal){if(mutation&&isHitsEqual(initialHit,hit)){mutation=null;}
_this.validMutation=mutation;_this.mutatedRelevantEvents=mutatedRelevantEvents;}};_this.handleDragEnd=function(ev){var _a=_this.component.context,calendar=_a.calendar,view=_a.view;var eventDef=_this.eventRange.def;var eventInstance=_this.eventRange.instance;var eventApi=new core.EventApi(calendar,eventDef,eventInstance);var relevantEvents=_this.relevantEvents;var mutatedRelevantEvents=_this.mutatedRelevantEvents;calendar.publiclyTrigger('eventResizeStop',[{el:_this.draggingSeg.el,event:eventApi,jsEvent:ev.origEvent,view:view}]);if(_this.validMutation){calendar.dispatch({type:'MERGE_EVENTS',eventStore:mutatedRelevantEvents});calendar.publiclyTrigger('eventResize',[{el:_this.draggingSeg.el,startDelta:_this.validMutation.startDelta||core.createDuration(0),endDelta:_this.validMutation.endDelta||core.createDuration(0),prevEvent:eventApi,event:new core.EventApi(calendar,mutatedRelevantEvents.defs[eventDef.defId],eventInstance?mutatedRelevantEvents.instances[eventInstance.instanceId]:null),revert:function(){calendar.dispatch({type:'MERGE_EVENTS',eventStore:relevantEvents});},jsEvent:ev.origEvent,view:view}]);}
else{calendar.publiclyTrigger('_noEventResize');}
_this.draggingSeg=null;_this.relevantEvents=null;_this.validMutation=null;};var component=settings.component;var dragging=_this.dragging=new FeaturefulElementDragging(component.el);dragging.pointer.selector='.fc-resizer';dragging.touchScrollAllowed=false;dragging.autoScroller.isEnabled=component.context.options.dragScroll;var hitDragging=_this.hitDragging=new HitDragging(_this.dragging,core.interactionSettingsToStore(settings));hitDragging.emitter.on('pointerdown',_this.handlePointerDown);hitDragging.emitter.on('dragstart',_this.handleDragStart);hitDragging.emitter.on('hitupdate',_this.handleHitUpdate);hitDragging.emitter.on('dragend',_this.handleDragEnd);return _this;}
EventDragging.prototype.destroy=function(){this.dragging.destroy();};EventDragging.prototype.querySeg=function(ev){return core.getElSeg(core.elementClosest(ev.subjectEl,this.component.fgSegSelector));};return EventDragging;}(core.Interaction));function computeMutation(hit0,hit1,isFromStart,instanceRange,transforms){var dateEnv=hit0.component.context.dateEnv;var date0=hit0.dateSpan.range.start;var date1=hit1.dateSpan.range.start;var delta=core.diffDates(date0,date1,dateEnv,hit0.component.largeUnit);var props={};for(var _i=0,transforms_1=transforms;_i<transforms_1.length;_i++){var transform=transforms_1[_i];var res=transform(hit0,hit1);if(res===false){return null;}
else if(res){__assign(props,res);}}
if(isFromStart){if(dateEnv.add(instanceRange.start,delta)<instanceRange.end){props.startDelta=delta;return props;}}
else{if(dateEnv.add(instanceRange.end,delta)>instanceRange.start){props.endDelta=delta;return props;}}
return null;}
var UnselectAuto=(function(){function UnselectAuto(calendar){var _this=this;this.isRecentPointerDateSelect=false;this.onSelect=function(selectInfo){if(selectInfo.jsEvent){_this.isRecentPointerDateSelect=true;}};this.onDocumentPointerUp=function(pev){var _a=_this,calendar=_a.calendar,documentPointer=_a.documentPointer;var state=calendar.state;if(!documentPointer.wasTouchScroll){if(state.dateSelection&&!_this.isRecentPointerDateSelect){var unselectAuto=calendar.viewOpt('unselectAuto');var unselectCancel=calendar.viewOpt('unselectCancel');if(unselectAuto&&(!unselectAuto||!core.elementClosest(documentPointer.downEl,unselectCancel))){calendar.unselect(pev);}}
if(state.eventSelection&&!core.elementClosest(documentPointer.downEl,EventDragging.SELECTOR)){calendar.dispatch({type:'UNSELECT_EVENT'});}}
_this.isRecentPointerDateSelect=false;};this.calendar=calendar;var documentPointer=this.documentPointer=new PointerDragging(document);documentPointer.shouldIgnoreMove=true;documentPointer.shouldWatchScroll=false;documentPointer.emitter.on('pointerup',this.onDocumentPointerUp);calendar.on('select',this.onSelect);}
UnselectAuto.prototype.destroy=function(){this.calendar.off('select',this.onSelect);this.documentPointer.destroy();};return UnselectAuto;}());var ExternalElementDragging=(function(){function ExternalElementDragging(dragging,suppliedDragMeta){var _this=this;this.receivingCalendar=null;this.droppableEvent=null;this.suppliedDragMeta=null;this.dragMeta=null;this.handleDragStart=function(ev){_this.dragMeta=_this.buildDragMeta(ev.subjectEl);};this.handleHitUpdate=function(hit,isFinal,ev){var dragging=_this.hitDragging.dragging;var receivingCalendar=null;var droppableEvent=null;var isInvalid=false;var interaction={affectedEvents:core.createEmptyEventStore(),mutatedEvents:core.createEmptyEventStore(),isEvent:_this.dragMeta.create,origSeg:null};if(hit){receivingCalendar=hit.component.context.calendar;if(_this.canDropElOnCalendar(ev.subjectEl,receivingCalendar)){droppableEvent=computeEventForDateSpan(hit.dateSpan,_this.dragMeta,receivingCalendar);interaction.mutatedEvents=core.eventTupleToStore(droppableEvent);isInvalid=!core.isInteractionValid(interaction,receivingCalendar);if(isInvalid){interaction.mutatedEvents=core.createEmptyEventStore();droppableEvent=null;}}}
_this.displayDrag(receivingCalendar,interaction);dragging.setMirrorIsVisible(isFinal||!droppableEvent||!document.querySelector('.fc-mirror'));if(!isInvalid){core.enableCursor();}
else{core.disableCursor();}
if(!isFinal){dragging.setMirrorNeedsRevert(!droppableEvent);_this.receivingCalendar=receivingCalendar;_this.droppableEvent=droppableEvent;}};this.handleDragEnd=function(pev){var _a=_this,receivingCalendar=_a.receivingCalendar,droppableEvent=_a.droppableEvent;_this.clearDrag();if(receivingCalendar&&droppableEvent){var finalHit=_this.hitDragging.finalHit;var finalView=finalHit.component.context.view;var dragMeta=_this.dragMeta;var arg=__assign({},receivingCalendar.buildDatePointApi(finalHit.dateSpan),{draggedEl:pev.subjectEl,jsEvent:pev.origEvent,view:finalView});receivingCalendar.publiclyTrigger('drop',[arg]);if(dragMeta.create){receivingCalendar.dispatch({type:'MERGE_EVENTS',eventStore:core.eventTupleToStore(droppableEvent)});if(pev.isTouch){receivingCalendar.dispatch({type:'SELECT_EVENT',eventInstanceId:droppableEvent.instance.instanceId});}
receivingCalendar.publiclyTrigger('eventReceive',[{draggedEl:pev.subjectEl,event:new core.EventApi(receivingCalendar,droppableEvent.def,droppableEvent.instance),view:finalView}]);}}
_this.receivingCalendar=null;_this.droppableEvent=null;};var hitDragging=this.hitDragging=new HitDragging(dragging,core.interactionSettingsStore);hitDragging.requireInitial=false;hitDragging.emitter.on('dragstart',this.handleDragStart);hitDragging.emitter.on('hitupdate',this.handleHitUpdate);hitDragging.emitter.on('dragend',this.handleDragEnd);this.suppliedDragMeta=suppliedDragMeta;}
ExternalElementDragging.prototype.buildDragMeta=function(subjectEl){if(typeof this.suppliedDragMeta==='object'){return core.parseDragMeta(this.suppliedDragMeta);}
else if(typeof this.suppliedDragMeta==='function'){return core.parseDragMeta(this.suppliedDragMeta(subjectEl));}
else{return getDragMetaFromEl(subjectEl);}};ExternalElementDragging.prototype.displayDrag=function(nextCalendar,state){var prevCalendar=this.receivingCalendar;if(prevCalendar&&prevCalendar!==nextCalendar){prevCalendar.dispatch({type:'UNSET_EVENT_DRAG'});}
if(nextCalendar){nextCalendar.dispatch({type:'SET_EVENT_DRAG',state:state});}};ExternalElementDragging.prototype.clearDrag=function(){if(this.receivingCalendar){this.receivingCalendar.dispatch({type:'UNSET_EVENT_DRAG'});}};ExternalElementDragging.prototype.canDropElOnCalendar=function(el,receivingCalendar){var dropAccept=receivingCalendar.opt('dropAccept');if(typeof dropAccept==='function'){return dropAccept(el);}
else if(typeof dropAccept==='string'&&dropAccept){return Boolean(core.elementMatches(el,dropAccept));}
return true;};return ExternalElementDragging;}());function computeEventForDateSpan(dateSpan,dragMeta,calendar){var defProps=__assign({},dragMeta.leftoverProps);for(var _i=0,_a=calendar.pluginSystem.hooks.externalDefTransforms;_i<_a.length;_i++){var transform=_a[_i];__assign(defProps,transform(dateSpan,dragMeta));}
var def=core.parseEventDef(defProps,dragMeta.sourceId,dateSpan.allDay,calendar.opt('forceEventDuration')||Boolean(dragMeta.duration),calendar);var start=dateSpan.range.start;if(dateSpan.allDay&&dragMeta.startTime){start=calendar.dateEnv.add(start,dragMeta.startTime);}
var end=dragMeta.duration?calendar.dateEnv.add(start,dragMeta.duration):calendar.getDefaultEventEnd(dateSpan.allDay,start);var instance=core.createEventInstance(def.defId,{start:start,end:end});return{def:def,instance:instance};}
function getDragMetaFromEl(el){var str=getEmbeddedElData(el,'event');var obj=str?JSON.parse(str):{create:false};return core.parseDragMeta(obj);}
core.config.dataAttrPrefix='';function getEmbeddedElData(el,name){var prefix=core.config.dataAttrPrefix;var prefixedName=(prefix?prefix+'-':'')+name;return el.getAttribute('data-'+prefixedName)||'';}
var ExternalDraggable=(function(){function ExternalDraggable(el,settings){var _this=this;if(settings===void 0){settings={};}
this.handlePointerDown=function(ev){var dragging=_this.dragging;var _a=_this.settings,minDistance=_a.minDistance,longPressDelay=_a.longPressDelay;dragging.minDistance=minDistance!=null?minDistance:(ev.isTouch?0:core.globalDefaults.eventDragMinDistance);dragging.delay=ev.isTouch?(longPressDelay!=null?longPressDelay:core.globalDefaults.longPressDelay):0;};this.handleDragStart=function(ev){if(ev.isTouch&&_this.dragging.delay&&ev.subjectEl.classList.contains('fc-event')){_this.dragging.mirror.getMirrorEl().classList.add('fc-selected');}};this.settings=settings;var dragging=this.dragging=new FeaturefulElementDragging(el);dragging.touchScrollAllowed=false;if(settings.itemSelector!=null){dragging.pointer.selector=settings.itemSelector;}
if(settings.appendTo!=null){dragging.mirror.parentNode=settings.appendTo;}
dragging.emitter.on('pointerdown',this.handlePointerDown);dragging.emitter.on('dragstart',this.handleDragStart);new ExternalElementDragging(dragging,settings.eventData);}
ExternalDraggable.prototype.destroy=function(){this.dragging.destroy();};return ExternalDraggable;}());var InferredElementDragging=(function(_super){__extends(InferredElementDragging,_super);function InferredElementDragging(containerEl){var _this=_super.call(this,containerEl)||this;_this.shouldIgnoreMove=false;_this.mirrorSelector='';_this.currentMirrorEl=null;_this.handlePointerDown=function(ev){_this.emitter.trigger('pointerdown',ev);if(!_this.shouldIgnoreMove){_this.emitter.trigger('dragstart',ev);}};_this.handlePointerMove=function(ev){if(!_this.shouldIgnoreMove){_this.emitter.trigger('dragmove',ev);}};_this.handlePointerUp=function(ev){_this.emitter.trigger('pointerup',ev);if(!_this.shouldIgnoreMove){_this.emitter.trigger('dragend',ev);}};var pointer=_this.pointer=new PointerDragging(containerEl);pointer.emitter.on('pointerdown',_this.handlePointerDown);pointer.emitter.on('pointermove',_this.handlePointerMove);pointer.emitter.on('pointerup',_this.handlePointerUp);return _this;}
InferredElementDragging.prototype.destroy=function(){this.pointer.destroy();};InferredElementDragging.prototype.setIgnoreMove=function(bool){this.shouldIgnoreMove=bool;};InferredElementDragging.prototype.setMirrorIsVisible=function(bool){if(bool){if(this.currentMirrorEl){this.currentMirrorEl.style.visibility='';this.currentMirrorEl=null;}}
else{var mirrorEl=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;if(mirrorEl){this.currentMirrorEl=mirrorEl;mirrorEl.style.visibility='hidden';}}};return InferredElementDragging;}(core.ElementDragging));var ThirdPartyDraggable=(function(){function ThirdPartyDraggable(containerOrSettings,settings){var containerEl=document;if(containerOrSettings===document||containerOrSettings instanceof Element){containerEl=containerOrSettings;settings=settings||{};}
else{settings=(containerOrSettings||{});}
var dragging=this.dragging=new InferredElementDragging(containerEl);if(typeof settings.itemSelector==='string'){dragging.pointer.selector=settings.itemSelector;}
else if(containerEl===document){dragging.pointer.selector='[data-event]';}
if(typeof settings.mirrorSelector==='string'){dragging.mirrorSelector=settings.mirrorSelector;}
new ExternalElementDragging(dragging,settings.eventData);}
ThirdPartyDraggable.prototype.destroy=function(){this.dragging.destroy();};return ThirdPartyDraggable;}());var main=core.createPlugin({componentInteractions:[DateClicking,DateSelecting,EventDragging,EventDragging$1],calendarInteractions:[UnselectAuto],elementDraggingImpl:FeaturefulElementDragging});exports.Draggable=ExternalDraggable;exports.FeaturefulElementDragging=FeaturefulElementDragging;exports.PointerDragging=PointerDragging;exports.ThirdPartyDraggable=ThirdPartyDraggable;exports.default=main;Object.defineProperty(exports,'__esModule',{value:true});}));/*!
FullCalendar RRule Plugin v4.4.2
Docs & License: https://fullcalendar.io/
(c) 2019 Adam Shaw
*/(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports,require('rrule'),require('@fullcalendar/core')):typeof define==='function'&&define.amd?define(['exports','rrule','@fullcalendar/core'],factory):(global=global||self,factory(global.FullCalendarRrule={},global.rrule,global.FullCalendar));}(this,function(exports,rrule,core){'use strict';/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}
return t;};return __assign.apply(this,arguments);};var EVENT_DEF_PROPS={rrule:null,duration:core.createDuration};var recurring={parse:function(rawEvent,leftoverProps,dateEnv){if(rawEvent.rrule!=null){var props=core.refineProps(rawEvent,EVENT_DEF_PROPS,{},leftoverProps);var parsed=parseRRule(props.rrule,dateEnv);if(parsed){return{typeData:parsed.rrule,allDayGuess:parsed.allDayGuess,duration:props.duration};}}
return null;},expand:function(rrule,framingRange){return rrule.between(framingRange.start,framingRange.end,true).filter(function(date){return date.valueOf()<framingRange.end.valueOf();});}};var main=core.createPlugin({recurringTypes:[recurring]});function parseRRule(input,dateEnv){var allDayGuess=null;var rrule$1;if(typeof input==='string'){rrule$1=rrule.rrulestr(input);}
else if(typeof input==='object'&&input){var refined=__assign({},input);if(typeof refined.dtstart==='string'){var dtstartMeta=dateEnv.createMarkerMeta(refined.dtstart);if(dtstartMeta){refined.dtstart=dtstartMeta.marker;allDayGuess=dtstartMeta.isTimeUnspecified;}
else{delete refined.dtstart;}}
if(typeof refined.until==='string'){refined.until=dateEnv.createMarker(refined.until);}
if(refined.freq!=null){refined.freq=convertConstant(refined.freq);}
if(refined.wkst!=null){refined.wkst=convertConstant(refined.wkst);}
else{refined.wkst=(dateEnv.weekDow-1+7)%7;}
if(refined.byweekday!=null){refined.byweekday=convertConstants(refined.byweekday);}
rrule$1=new rrule.RRule(refined);}
if(rrule$1){return{rrule:rrule$1,allDayGuess:allDayGuess};}
return null;}
function convertConstants(input){if(Array.isArray(input)){return input.map(convertConstant);}
return convertConstant(input);}
function convertConstant(input){if(typeof input==='string'){return rrule.RRule[input.toUpperCase()];}
return input;}
exports.default=main;Object.defineProperty(exports,'__esModule',{value:true});}));(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports,require('@fullcalendar/core')):typeof define==='function'&&define.amd?define(['exports','@fullcalendar/core'],factory):(global=global||self,factory(global.FullCalendarVue={},global.FullCalendar));}(this,(function(exports,core){'use strict';function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function(obj){return typeof obj;};}else{_typeof=function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}
return _typeof(obj);}
function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}
function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}
function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function(){};return{s:F,n:function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function(e){throw e;},f:F};}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}
var normalCompletion=true,didErr=false,err;return{s:function(){it=o[Symbol.iterator]();},n:function(){var step=it.next();normalCompletion=step.done;return step;},e:function(e){didErr=true;err=e;},f:function(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}
var isArray=Array.isArray;var keyList=Object.keys;var hasProp=Object.prototype.hasOwnProperty;var fastDeepEqual=function equal(a,b){if(a===b)return true;if(a&&b&&_typeof(a)=='object'&&_typeof(b)=='object'){var arrA=isArray(a),arrB=isArray(b),i,length,key;if(arrA&&arrB){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;){if(!equal(a[i],b[i]))return false;}
return true;}
if(arrA!=arrB)return false;var dateA=a instanceof Date,dateB=b instanceof Date;if(dateA!=dateB)return false;if(dateA&&dateB)return a.getTime()==b.getTime();var regexpA=a instanceof RegExp,regexpB=b instanceof RegExp;if(regexpA!=regexpB)return false;if(regexpA&&regexpB)return a.toString()==b.toString();var keys=keyList(a);length=keys.length;if(length!==keyList(b).length)return false;for(i=length;i--!==0;){if(!hasProp.call(b,keys[i]))return false;}
for(i=length;i--!==0;){key=keys[i];if(!equal(a[key],b[key]))return false;}
return true;}
return a!==a&&b!==b;};var hasOwnProperty=Object.prototype.hasOwnProperty;function deepCopy(input){if(Array.isArray(input)){return input.map(deepCopy);}else if(input instanceof Date){return new Date(input.valueOf());}else if(_typeof(input)==='object'&&input){return mapHash(input,deepCopy);}else{return input;}}
function mapHash(input,func){var output={};for(var key in input){if(hasOwnProperty.call(input,key)){output[key]=func(input[key],key);}}
return output;}
var PROP_DEFS={header:{},footer:{},customButtons:{},buttonIcons:{},themeSystem:{},bootstrapFontAwesome:{},firstDay:{},dir:{},weekends:{},hiddenDays:{},fixedWeekCount:{},weekNumbers:{},weekNumbersWithinDays:{},weekNumberCalculation:{},businessHours:{},showNonCurrentDates:{},height:{},contentHeight:{},aspectRatio:{},handleWindowResize:{},windowResizeDelay:{},eventLimit:{},eventLimitClick:{},timeZone:{},now:{},defaultView:{},allDaySlot:{},allDayText:{},slotDuration:{},slotLabelFormat:{},slotLabelInterval:{},snapDuration:{},scrollTime:{},minTime:{},maxTime:{},slotEventOverlap:{},listDayFormat:{},listDayAltFormat:{},noEventsMessage:{},defaultDate:{},nowIndicator:{},visibleRange:{},validRange:{},dateIncrement:{},dateAlignment:{},duration:{},dayCount:{},locales:{},locale:{},eventTimeFormat:{},columnHeader:{},columnHeaderFormat:{},columnHeaderText:{},columnHeaderHtml:{},titleFormat:{},weekLabel:{},displayEventTime:{},displayEventEnd:{},eventLimitText:{},dayPopoverFormat:{},navLinks:{},navLinkDayClick:{},navLinkWeekClick:{},selectable:{},selectMirror:{},unselectAuto:{},unselectCancel:{},defaultAllDayEventDuration:{},defaultTimedEventDuration:{},cmdFormatter:{},defaultRangeSeparator:{},selectConstraint:{},selectOverlap:{},selectAllow:{},editable:{},eventStartEditable:{},eventDurationEditable:{},eventConstraint:{},eventOverlap:{},eventAllow:{},eventClassName:{},eventClassNames:{},eventBackgroundColor:{},eventBorderColor:{},eventTextColor:{},eventColor:{},events:{},eventSources:{},allDayDefault:{},startParam:{},endParam:{},lazyFetching:{},nextDayThreshold:{},eventOrder:{},rerenderDelay:{},dragRevertDuration:{},dragScroll:{},longPressDelay:{},eventLongPressDelay:{},droppable:{},dropAccept:{},eventDataTransform:{},allDayMaintainDuration:{},eventResizableFromStart:{},timeGridEventMinHeight:{},allDayHtml:{},eventDragMinDistance:{},eventResourceEditable:{},eventSourceFailure:{},eventSourceSuccess:{},forceEventDuration:{},progressiveEventRendering:{},selectLongPressDelay:{},selectMinDistance:{},timeZoneParam:{},titleRangeSeparator:{},buttonText:{},views:{},plugins:{},schedulerLicenseKey:{},resources:{},resourceLabelText:{},resourceOrder:{},filterResourcesWithEvents:{},resourceText:{},resourceGroupField:{},resourceGroupText:{},resourceAreaWidth:{},resourceColumns:{},resourcesInitiallyExpanded:{},slotWidth:{},datesAboveResources:{},googleCalendarApiKey:{},refetchResourcesOnNavigate:{},datesRender:{},datesDestroy:{},dayRender:{},eventRender:{},eventDestroy:{},viewSkeletonRender:{},viewSkeletonDestroy:{},resourceRender:{}};var PROP_IS_DEEP={header:true,footer:true,events:true,eventSources:true,resources:true};var EMISSION_NAMES=['windowResize','dateClick','eventClick','eventMouseEnter','eventMouseLeave','select','unselect','loading','eventPositioned','_eventsPositioned','eventDragStart','eventDragStop','eventDrop','eventResizeStart','eventResizeStop','eventResize','drop','eventReceive','eventLeave','_destroyed','datesRender','datesDestroy','dayRender','eventRender','eventDestroy','viewSkeletonRender','viewSkeletonDestroy','resourceRender'];var EMISSION_USE_PROP={datesRender:true,datesDestroy:true,dayRender:true,eventRender:true,eventDestroy:true,viewSkeletonRender:true,viewSkeletonDestroy:true,resourceRender:true};var FullCalendarComponent={props:PROP_DEFS,data:function data(){return{renderId:0,deepCopies:{}};},render:function render(createElement){return createElement('div',{attrs:{'data-fc-render-id':this.renderId}});},mounted:function mounted(){warnDeprecatedListeners(this.$listeners);this.$options.calendar=new core.Calendar(this.$el,this.buildCalendarOptions());this.$options.calendar.render();},beforeUpdate:function beforeUpdate(){this.renderDirty();},beforeDestroy:function beforeDestroy(){this.$options.calendar.destroy();},watch:mapHash(PROP_DEFS,buildPropWatcher),methods:{buildCalendarOptions:function buildCalendarOptions(){var _this=this;var options={};var _iterator=_createForOfIteratorHelper(EMISSION_NAMES),_step;try{var _loop=function _loop(){var emissionName=_step.value;options[emissionName]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
_this.$emit.apply(_this,[emissionName].concat(args));};};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}
for(var propName in PROP_DEFS){var propVal=this[propName];if(propVal!==undefined){if(PROP_IS_DEEP[propName]){propVal=deepCopy(propVal);this.deepCopies[propName]=propVal;}
options[propName]=propVal;}}
return options;},recordDirtyOption:function recordDirtyOption(optionName,newVal){(this.$options.dirtyOptions||(this.$options.dirtyOptions={}))[optionName]=newVal;this.renderId++;},renderDirty:function renderDirty(){var dirtyOptions=this.$options.dirtyOptions;if(dirtyOptions){this.$options.dirtyOptions=null;this.$options.calendar.mutateOptions(dirtyOptions,[],false,fastDeepEqual);}},getApi:function getApi(){return this.$options.calendar;}}};function buildPropWatcher(propDef,propName){if(PROP_IS_DEEP[propName]){return{deep:true,handler:function handler(newVal){var oldVal=this.deepCopies[propName];if(!fastDeepEqual(newVal,oldVal)){newVal=deepCopy(newVal);this.deepCopies[propName]=newVal;this.recordDirtyOption(propName,newVal);}}};}else{return function(newVal){this.recordDirtyOption(propName,newVal);};}}
function warnDeprecatedListeners(listenerHash){for(var emissionName in listenerHash){if(EMISSION_USE_PROP[emissionName]){console.warn('Use of '+emissionName+' as an event is deprecated. Please convert to a prop.');}}}
var installed=false;function install(Vue){if(!installed){installed=true;Vue.component('FullCalendar',FullCalendarComponent);}}
var GlobalVue;if(typeof window!=='undefined'){GlobalVue=window.Vue;}else if(typeof global!=='undefined'){GlobalVue=global.Vue;}
if(GlobalVue){GlobalVue.use({install:install});}
exports.default=FullCalendarComponent;exports.install=install;Object.defineProperty(exports,'__esModule',{value:true});})));(function(container){var entity;var nop=function(){};var nopHandler={done:nop,fail:nop,always:nop};var exports={nop:nopHandler,Schedules:{all:{done:function(res,message){return res;},fail:function(xhr,message){},always:nop}}}
exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');};container.register('Textmagic::CalendarBundle::Api::Handlers',exports);})(global.AHServiceContainer);(function(container){var entity,vue;var exports={init:function(){vue=container.get('Textmagic::FrameworkBundle::VueComponent');entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');},run:function(options){var user=entity('Textmagic::CoreBundle::User');user.setCredentials(options.user.login,options.user.api_key);user.set('isUsingAmPm',options.user.isUsingAmPm);user.set('timezone',options.user.timezone);vue.register(container.match('^Textmagic::CalendarBundle::Components::'),'all');var calendarPreview=container.get('Textmagic::CalendarBundle::Components::CalendarPreview');calendarPreview.components={"full-calendar":global.FullCalendarVue};var defaultDate=container.get('Textmagic::CalendarBundle::Component::External').getSubmitData().schedule.params.startDateTime;var vm=vue.renderAndMount(calendarPreview,{defaultDate:moment(defaultDate)},{},options.el);global.Vue.config.devtools=true;return vm;}};container.register('Textmagic::CalendarBundle::AppPreview',exports);})(global.AHServiceContainer);(function(container){var entity,vue;var exports={init:function(){vue=container.get('Textmagic::FrameworkBundle::VueComponent');entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');},run:function(options){var user=entity('Textmagic::CoreBundle::User');var app=entity('Textmagic::CalendarBundle::App');app.setReplyOptionsLabelClasses(options.replyOptionsLabelClasses);app.setReplyOptionsTitles(options.replyOptionsTitles);user.setCredentials(options.user.login,options.user.api_key);user.set('isUsingAmPm',options.user.isUsingAmPm);user.set('timezone',options.user.timezone);user.set('currencySign',options.user.currencySign);vue.register(container.match('^Textmagic::CalendarBundle::Components::'),'all');var Calendar=container.get('Textmagic::CalendarBundle::Components::Calendar');var dayProps=function(route){var date=moment.tz(route.params.date,options.user.timezone);if(!date.isValid()){throw Error('Invalid date');}
return{defaultDate:date,defaultView:constants.DAY_VIEW};};var weekMonthProps=function(route){var date=moment.tz(route.params.date,options.user.timezone);if(!date.isValid()){throw Error('Invalid date');}
if(route.params.view&&route.params.view==='month'){return{defaultDate:date,defaultView:constants.MONTH_VIEW};}else{return{defaultDate:date,defaultView:constants.WEEK_VIEW};}};var routes=[{path:'/',component:Calendar,name:'calendarRoot'},{path:'/day/:date/:time?',component:Calendar,props:dayProps,name:'calendarDay'},{path:'/week/:date/:time',component:Calendar,props:weekMonthProps,name:'calendarWeekTime'},{path:'/:view/:date',component:Calendar,name:'calendarGeneral',props:weekMonthProps},];var router=new VueRouter({mode:'history',routes:routes,base:options.baseUrl});new global.Vue({components:{"full-calendar":global.FullCalendarVue},router:router,el:options.selectors[0]});global.Vue.config.devtools=true}};container.register('Textmagic::CalendarBundle::App',exports);})(global.AHServiceContainer);(function(container){var exports={recountScheduleTab:function(){global.recountScheduleTab();},getSubmitData:function(){if(!global.getSubmitData){throw new Error('Does not exist required function `getSubmitData`');}
return global.getSubmitData();}};container.register('Textmagic::CalendarBundle::Component::External',exports);})(global.AHServiceContainer);(function(container){var nop=function(){};var exports={template:'#aggregated-calendar-event',props:{click:{type:Function,default:nop},event:Object},data:function(){return{isHovered:false};},computed:{classes:function(){if(this.$props.event.extendedProps.contactName){return['tm-calendar-aggregated-event-only-one-group'];}
return[];},title:function(){return this.$props.event.title;},style:function(){return{background:this.isHovered?container.get('Textmagic::CoreBundle::Services::Color').lightenDarkenColor(this.$props.event.backgroundColor,-20):this.$props.event.backgroundColor,border:this.$props.event.borderColor}}},methods:{onHover:function(isHovered){this.isHovered=isHovered;}}};container.register('Textmagic::CalendarBundle::Components::AggregatedEvent',exports);})(global.AHServiceContainer);(function(container){var entity,exports={template:'#calendar-header',data:function(){return{calendar:entity('Calendar'),userTimezone:entity('Textmagic::CoreBundle::User').raw.timezone,entity:entity('CalendarHeader')};},computed:{viewTypes:function(){return constants;},isShowTodayButton:function(){return this.$data.calendar.get('defaultView').raw===constants.DAY_VIEW&&this.$data.entity.raw.header.left.indexOf('todayCustom')>=0&&!this.$data.calendar.get('defaultDate').raw.isSame(moment.tz(new Date,this.$data.userTimezone),'day');},view:function(){return this.$data.calendar.get('defaultView').raw;}},methods:{onDay:function(){if(this.$data.calendar.isDayView()){return;}
entity('App').setIsLoading(true);var date=entity('Calendar').get('defaultDate').raw;this.$router.push('/day/'+date.format('YYYY-MM-DD'));},onWeek:function(){if(this.$data.calendar.isWeekView()){return;}
entity('App').setIsLoading(true);var date=entity('Calendar').get('defaultDate').raw;this.$router.push('/week/'+date.format('YYYY-MM-DD'));},onMonth:function(){if(this.$data.calendar.isMonthView()){return;}
entity('App').setIsLoading(true);var date=entity('Calendar').get('defaultDate').raw;this.$router.push('/month/'+date.format('YYYY-MM-DD'));},onPrev:function(){var view,clone,date=entity('Calendar').get('defaultDate').raw;entity('App').setIsLoading(true);if(this.$data.calendar.isMonthView()){clone=date.subtract(1,'month').clone();view='month';}else if(this.$data.calendar.isWeekView()){clone=date.subtract(1,'week').clone();view='week';}else if(this.$data.calendar.isDayView()){clone=date.subtract(1,'day').clone();view='day';}
var now=moment.tz(new Date,this.$data.userTimezone);if(clone.unix()<now.unix()){clone=now;}
this.$router.push('/'+view+'/'+clone.format('YYYY-MM-DD'));},onNext:function(){var date=entity('Calendar').get('defaultDate').raw,view;entity('App').setIsLoading(true);if(this.$data.calendar.isMonthView()){date.add(1,'month');view='month';}else if(this.$data.calendar.isWeekView()){date.add(1,'week');view='week';}else if(this.$data.calendar.isDayView()){date.add(1,'day');view='day';}
this.$router.push('/'+view+'/'+date.format('YYYY-MM-DD'));},onToday:function(){var today=moment.tz(new Date,this.$data.userTimezone);entity('App').setIsLoading(true);this.$router.push('/day/'+today.format('YYYY-MM-DD'));}}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');};container.register('Textmagic::CalendarBundle::Components::CalendarHeader',exports);})(global.AHServiceContainer);(function(container){var exports={template:'#calendar-top-cell',props:{view:String,date:{validator:function(date){return moment.isMoment(date);}}},computed:{viewTypes:function(){return constants;}}};container.register('Textmagic::CalendarBundle::Components::CalendarTopCell',exports);})(global.AHServiceContainer);(function(container){var entity,exports={template:'#modal-overflowed-events-pagination',props:{event:Object,timezone:String,needAmPm:Boolean},data:function(){return{modal:entity('ModalOverflowedEvents')};},computed:{itemsCount:function(){return entity('ModalOverflowedEvents').getEventsByKey(this.$props.event.extendedProps.key,this.$props.needAmPm,this.$props.timezone).raw.length;}},methods:{onNext:function(){entity('ModalOverflowedEvents').moveForwardOffset();},onPrev:function(){entity('ModalOverflowedEvents').moveBackwardOffset();},onChangeLimit:function(e){entity('ModalOverflowedEvents').setOffset(0);entity('ModalOverflowedEvents').setLimit(parseInt(e.target.value));}}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');};container.register('Textmagic::CalendarBundle::Components::ModalOverflowedEventsPagination',exports);})(global.AHServiceContainer);(function(container){var exports={template:'#calendar-header-uncontrolled',computed:{viewTypes:function(){return constants;},isShowTodayButton:function(){return this.$props.view===constants.DAY_VIEW&&this.$props.header.left.indexOf('todayCustom')>=0&&!this.$props.defaultDate.isSame(moment.tz(new Date,this.$props.userTimezone),'day');}},props:{calendarTitle:{type:String},view:{type:String},defaultDate:{validator:function(date){return moment.isMoment(date);}},header:{type:Object},userTimezone:{type:String},onDay:{type:Function},onWeek:{type:Function},onMonth:{type:Function},onPrev:{type:Function},onNext:{type:Function},onToday:{type:Function}}};container.register('Textmagic::CalendarBundle::Components::CalendarHeaderUncontrolled',exports);})(global.AHServiceContainer);var constants={MONTH_VIEW:'dayGridMonth',WEEK_VIEW:'timeGridWeek',DAY_VIEW:'timeGridDay'};constants=Object.freeze(constants);(function(container){var fetcher,entity,exports={template:'#calendar',props:{defaultDate:{validator:function(date){return moment.isMoment(date);}},defaultView:{default:constants.MONTH_VIEW,type:String}},data:function(){var calendar=entity('Calendar');calendar.setDefaultDate(this.$props.defaultDate.tz(this.timezone()));calendar.setDefaultView(this.$props.defaultView);return{calendar:calendar,calendarPlugins:['momentTimezone','timeGrid','dayGrid','interaction','rrule','bootstrap']}},mounted:function(){entity('CalendarHeader').setCalendarTitle(this.$refs.fullCalendar.getApi().view.title);if(this.isDayView()){fetcher.fetchDay(entity('Calendar').get('defaultDate').raw,(function(){var date=entity('Calendar').get('defaultDate').raw;if(this.$route.params.time){this.$refs.fullCalendar.getApi().scrollToTime(this.$route.params.time);}else{var earliest=this.getEarliestEventDay(date.tz(this.timezone()),this.timezone());if(earliest.raw){var scrollToTime=moment(earliest.raw.start).tz(this.timezone());this.$refs.fullCalendar.getApi().scrollToTime(scrollToTime.format('HH:mm'));}}}).bind(this));}else{fetcher.fetch(entity('Calendar').get('defaultDate').raw,(function(){if(this.isWeekView()){if(this.$route.params.time){this.$refs.fullCalendar.getApi().scrollToTime(this.$route.params.time);}else{var earliest=this.getEarliestEventWeek({start:moment.tz(this.$refs.fullCalendar.getApi().view.activeStart,this.timezone()),end:moment.tz(this.$refs.fullCalendar.getApi().view.activeEnd,this.timezone())});if(earliest.raw){var scrollToTime=moment.tz(earliest.raw.start,this.timezone());this.$refs.fullCalendar.getApi().scrollToTime(scrollToTime.format('HH:mm'));}}}}).bind(this));}},updated:function(){var clone,date=entity('Calendar').get('defaultDate').raw;if(this.isMonthView()){clone=date.clone();if(clone.subtract(1,'month').isBefore(moment.tz(new Date,this.timezone()),'month')){entity('CalendarHeader').excludePrev();}else{entity('CalendarHeader').includePrev();}}else if(this.isWeekView()){clone=date.clone();if(clone.subtract(1,'week').isBefore(moment.tz(new Date,this.timezone()),'week')){entity('CalendarHeader').excludePrev();}else{entity('CalendarHeader').includePrev();}}else if(this.isDayView()){clone=date.clone();if(clone.subtract(1,'day').isBefore(moment.tz(new Date,this.timezone()),'day')){entity('CalendarHeader').excludePrev();}else{entity('CalendarHeader').includePrev();}}},computed:{cevents:function(){var filterable=false;if(this.$refs.fullCalendar){filterable={start:moment.tz(this.$refs.fullCalendar.getApi().view.activeStart,this.timezone()),end:moment.tz(this.$refs.fullCalendar.getApi().view.activeEnd,this.timezone())};}
if(this.isMonthView()){return this.calendar.get('aggregatedEvents').map(function(event){return entity('Calendar').toCalendarAggregatedEvent(event,this.timezone());},this).filter(function(event){if(!filterable){return true;}
return moment(event.start).unix()>=filterable.start.unix()&&moment(event.start).unix()<=filterable.end.unix();});}else if(this.isWeekView()){return this.calendar.get('aggregatedHalfAnHourEvents').filter(function(event){if(!filterable){return true;}
return moment(event.start).unix()>=filterable.start.unix()&&moment(event.start).unix()<=filterable.end.unix();}).map(function(event){return entity('Calendar').toCalendarAggregatedHalfAnHourEvents(event,this.timezone());},this);}else{var overflowedEventsByHalOfHour=this.calendar.get('overflowedEventsByHalOfHour').filter(function(event){var now=entity('Calendar').get('defaultDate').raw;return moment.tz(event.start,this.timezone()).isSame(now,'day');},this);overflowedEventsByHalOfHour=overflowedEventsByHalOfHour.map(function(event){return entity('Calendar').toCalendarAggregatedHalfAnHourEventsSeeMore(event);});var events=this.calendar.get('events').filter(function(event){var now=entity('Calendar').get('defaultDate').raw;return moment.tz(event.start,this.timezone()).isSame(now,'day');},this).map((function(event){return entity('Calendar').toCalendarEvent(event,this.needAmPm(),this.timezone())}).bind(this));events=events.raw.sort(function(eventA,eventB){if(eventA.dateUnix===eventB.dateUnix){return 0;}
return eventA.dateUnix>eventB.dateUnix?1:-1;});events=global.Sugar.Array(events);return events.union(overflowedEventsByHalOfHour.raw);}},slotLabelFormat:function(){if(this.needAmPm()){return{hour:'numeric',minute:'2-digit',meridiem:'short',hour12:true}}else{return{hour:'2-digit',minute:'2-digit',meridiem:false,hour12:false}}},userTimezone:function(){return this.timezone();}},methods:{viewSkeletonRender:function(dayRenderInfo){var tz=this.timezone(),selectedDay=moment.tz(dayRenderInfo.view.activeStart,tz),now=moment.tz(new Date,tz);dayRenderInfo.el.querySelectorAll('.fc-time-grid .fc-slats tr').forEach(function(el){var slotTime=moment.tz(selectedDay.format('YYYY-MM-DD')+' '+el.dataset.time,tz);if(slotTime.unix()>=now.unix()){el.classList.add('fc-future');}else{el.classList.add('fc-past');}});},eventRender:function(info){var c,props={event:info.event,needAmPm:this.needAmPm()},data={};if(this.isMonthView()){c=container.get('Textmagic::CalendarBundle::Components::AggregatedEvent');}else if(this.isWeekView()){c=container.get('Textmagic::CalendarBundle::Components::AggregatedHalfAnHourEvent');}else{if(info.event.extendedProps.type==='aggregatedEventSeeMore'){c=container.get('Textmagic::CalendarBundle::Components::AggregatedHalfAnHourEventSeeMore');props.timezone=this.timezone();}else{c=container.get('Textmagic::CalendarBundle::Components::Event');props.detailUrl=info.event.extendedProps.detailUrl;props.editUrl=info.event.extendedProps.editUrl;props.timezone=this.timezone();}}
return container.get('Textmagic::FrameworkBundle::VueComponent').renderAndMountToVirtual(c,props,data).$el;},onEventClick:function(info){var date=moment(info.event.start).tz(this.timezone());if(this.isMonthView()){this.$router.push('/day/'+date.format('YYYY-MM-DD'));}else if(this.isWeekView()){this.$router.push('/day/'+date.format('YYYY-MM-DD')+'/'+date.format('HH:mm'));}},getEarliestEventWeek:function(week){if(!moment.isMoment(week.start)||!moment.isMoment(week.end)){throw new Error('Pass to `getEarliestEventWeek` Moment Date object');}
return this.cevents.filter(function(event){return moment(event.start).unix()>=week.start.unix()&&moment(event.start).unix()<=week.end.unix();}).sortBy(function(event){return moment(event.start).unix()}).at(0);},getEarliestEventDay:function(date,timezone){if(!moment.isMoment(date)){throw new Error('Pass to `getEarliestEventDay` Moment Date object');}
return this.cevents.filter(function(event){return moment(event.start).tz(timezone).isSame(date,'day')}).sortBy(function(event){return moment(event.start).unix()}).at(0);},isMonthView:function(){return entity('Calendar').isMonthView();},isWeekView:function(){return entity('Calendar').isWeekView();},isDayView:function(){return entity('Calendar').isDayView();},columnHeaderHtml:function(date){return container.get('Textmagic::FrameworkBundle::VueComponent').renderAndMountToVirtual(container.get('Textmagic::CalendarBundle::Components::CalendarTopCell'),{view:entity('Calendar').get('defaultView').raw,date:moment.tz(date,this.timezone())}).$el.outerHTML;},needAmPm:function(){var user=entity('Textmagic::CoreBundle::User');return user.raw.isUsingAmPm;},timezone:function(){var user=entity('Textmagic::CoreBundle::User');return user.raw.timezone;}}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');fetcher=container.get('Textmagic::CalendarBundle::Services::EventFetcher');};container.register('Textmagic::CalendarBundle::Components::Calendar',exports);})(global.AHServiceContainer);(function(container){var nop=function(){};var exports={template:'#aggregated-calendar-half-an-hour-event',props:{click:{type:Function,default:nop},event:Object},data:function(){return{isHovered:false};},computed:{classes:function(){if(this.$props.event.extendedProps.contactName){return['tm-calendar-aggregated-event-only-one-group'];}
return[];},title:function(){return this.$props.event.title;},style:function(){return{left:0,right:0,background:this.isHovered?container.get('Textmagic::CoreBundle::Services::Color').lightenDarkenColor(this.$props.event.backgroundColor,-20):this.$props.event.backgroundColor,border:this.$props.event.borderColor}}},methods:{onHover:function(isHovered){this.isHovered=isHovered;}}};container.register('Textmagic::CalendarBundle::Components::AggregatedHalfAnHourEvent',exports);})(global.AHServiceContainer);var constants={MONTH_VIEW:'dayGridMonth',WEEK_VIEW:'timeGridWeek',DAY_VIEW:'timeGridDay'};constants=Object.freeze(constants);(function(container){var fetcher,entity,exports={template:'#calendar-preview',props:{defaultDate:{validator:function(date){return moment.isMoment(date);}},defaultView:{default:constants.MONTH_VIEW,type:String}},data:function(){var calendar=entity('Calendar');calendar.setDefaultDate(this.$props.defaultDate.tz(this.timezone()));calendar.setDefaultView(this.$props.defaultView);return{calendar:calendar,calendarHeader:entity('CalendarHeader'),calendarPlugins:['momentTimezone','timeGrid','dayGrid','interaction','rrule','bootstrap']}},mounted:function(){this.$nextTick((function(){entity('CalendarHeader').setCalendarTitle(this.$refs.fullCalendar.getApi().view.title);}).bind(this));},updated:function(){this.fetchPreview(entity('Calendar').get('defaultDate').raw,(function(){this.compute();entity('App').setIsLoading(false);}).bind(this));},computed:{cevents:function(){var events=[];if(this.isMonthView()){return entity('Calendar').get('previewAggregatedEvents').filter(function(event){return event.recipientsCount>0;}).map(function(event){return entity('Calendar').toCalendarAggregatedPreviewEvent(event);});}else if(this.isWeekView()){events=entity('Calendar').get('previewAggregatedHalfAnHourEvents');}else{events=entity('Calendar').get('previewEvents');}
return events.filter(function(event){return event.recipientsCount>0;}).map((function(event){return entity('Calendar').toCalendarPreviewEvent(event,this.timezone(),this.needAmPm());}).bind(this));},slotLabelFormat:function(){if(this.needAmPm()){return{hour:'numeric',minute:'2-digit',meridiem:'short',hour12:true}}else{return{hour:'2-digit',minute:'2-digit',meridiem:false,hour12:false}}},userTimezone:function(){return this.timezone();}},methods:{fetchPreview:function(date,callback){var submitData=container.get('Textmagic::CalendarBundle::Component::External').getSubmitData(),schedulerValue=submitData.schedule.params,timezone=submitData.schedule.tzid,previewSchedulerValue=schedulerValue.recurrencePattern
+timezone
+schedulerValue.startDateTime
+JSON.stringify(submitData.recipients);if(entity('Calendar').get('previewSchedulerValue').raw===previewSchedulerValue&&date.isSame(entity('Calendar').get('defaultDate').raw)){typeof callback!=='undefined'?callback():null;return false;}
if(date.isSame(entity('Calendar').get('defaultDate').raw)){entity('Calendar').removeEvents();}
entity('App').setIsLoading(true);entity('Calendar').set('previewSchedulerValue',previewSchedulerValue);fetcher.fetchPreview(date,{year:date.format('YYYY'),month:date.format('MMMM'),rrule:schedulerValue.recurrencePattern,startDateTime:schedulerValue.startDateTime,timeZone:timezone,recipients:submitData.recipients},callback);},compute:function(){var clone,date=entity('Calendar').get('defaultDate').raw;if(this.isMonthView()){clone=date.clone();if(clone.subtract(1,'month').isBefore(moment.tz(new Date,this.timezone()),'month')){entity('CalendarHeader').excludePrev();}else{entity('CalendarHeader').includePrev();}}else if(this.isWeekView()){clone=date.clone();if(clone.subtract(1,'week').isBefore(moment.tz(new Date,this.timezone()),'week')){entity('CalendarHeader').excludePrev();}else{entity('CalendarHeader').includePrev();}}else if(this.isDayView()){clone=date.clone();if(clone.subtract(1,'day').isBefore(moment.tz(new Date,this.timezone()),'day')){entity('CalendarHeader').excludePrev();}else{entity('CalendarHeader').includePrev();}}},onDay:function(){this.changeView(constants.DAY_VIEW);this.compute();this.moveToEarliest();},onWeek:function(){this.changeView(constants.WEEK_VIEW);this.compute();this.moveToEarliest();},onMonth:function(){this.changeView(constants.MONTH_VIEW);this.compute();},onPrev:function(){var defaultDate=entity('Calendar').get('defaultDate').raw,date;if(this.isMonthView()){date=defaultDate.clone().subtract(1,'month');}else if(this.isWeekView()){date=defaultDate.clone().subtract(1,'week');}else if(this.isDayView()){date=defaultDate.clone().subtract(1,'day');}
this.fetchPreview(date,(function(){this.$refs.fullCalendar.getApi().prev();entity('CalendarHeader').setCalendarTitle(this.$refs.fullCalendar.getApi().view.title);entity('Calendar').set('defaultDate',date);this.compute();entity('App').setIsLoading(false);this.moveToEarliest();}).bind(this));},onNext:function(){var defaultDate=entity('Calendar').get('defaultDate').raw,date;if(this.isMonthView()){date=defaultDate.clone().add(1,'month');}else if(this.isWeekView()){date=defaultDate.clone().add(1,'week');}else if(this.isDayView()){date=defaultDate.clone().add(1,'day');}
this.fetchPreview(date,(function(){this.$refs.fullCalendar.getApi().next();entity('CalendarHeader').setCalendarTitle(this.$refs.fullCalendar.getApi().view.title);entity('Calendar').set('defaultDate',date);this.compute();entity('App').setIsLoading(false);this.moveToEarliest();}).bind(this));},onToday:function(){var date=moment.tz(new Date,this.timezone());this.fetchPreview(date,(function(){this.$refs.fullCalendar.getApi().today();entity('CalendarHeader').setCalendarTitle(this.$refs.fullCalendar.getApi().view.title);entity('Calendar').set('defaultDate',date);this.compute();entity('App').setIsLoading(false);this.moveToEarliest();}).bind(this));},moveToEarliest:function(){var date=entity('Calendar').get('defaultDate').raw;if(this.isWeekView()){var earliestWeek=this.getEarliestEventWeek({start:moment.tz(this.$refs.fullCalendar.getApi().view.activeStart,this.timezone()),end:moment.tz(this.$refs.fullCalendar.getApi().view.activeEnd,this.timezone())});if(earliestWeek.raw){var scrollToTimeWeek=moment.tz(earliestWeek.raw.start,this.timezone());this.$refs.fullCalendar.getApi().scrollToTime(scrollToTimeWeek.format('HH:mm'));}}else if(this.isDayView()){var earliestDay=this.getEarliestEventDay(date.tz(this.timezone()),this.timezone());if(earliestDay.raw){var scrollToTimeDay=moment(earliestDay.raw.start).tz(this.timezone());this.$refs.fullCalendar.getApi().scrollToTime(scrollToTimeDay.format('HH:mm'));}}},viewSkeletonRender:function(dayRenderInfo){var tz=this.timezone(),selectedDay=moment.tz(dayRenderInfo.view.activeStart,tz),now=moment.tz(new Date,tz);dayRenderInfo.el.querySelectorAll('.fc-time-grid .fc-slats tr').forEach(function(el){var slotTime=moment.tz(selectedDay.format('YYYY-MM-DD')+' '+el.dataset.time,tz);if(slotTime.unix()>=now.unix()){el.classList.add('fc-future');}else{el.classList.add('fc-past');}});},eventRender:function(info){var c,props={event:info.event,needAmPm:this.needAmPm(),styleObj:{'background-color':info.event.backgroundColor}},data={};if(this.isMonthView()){c=container.get('Textmagic::CalendarBundle::Components::AggregatedEvent');}else if(this.isWeekView()){c=container.get('Textmagic::CalendarBundle::Components::AggregatedHalfAnHourEvent');}else{c=container.get('Textmagic::CalendarBundle::Components::EventPreview');props.title=info.event.title;props.time=info.event.extendedProps.dateFormatted;}
return container.get('Textmagic::FrameworkBundle::VueComponent').renderAndMountToVirtual(c,props,data).$el;},isMonthView:function(){return entity('Calendar').isMonthView();},isWeekView:function(){return entity('Calendar').isWeekView();},isDayView:function(){return entity('Calendar').isDayView();},columnHeaderHtml:function(date){return container.get('Textmagic::FrameworkBundle::VueComponent').renderAndMountToVirtual(container.get('Textmagic::CalendarBundle::Components::CalendarTopCell'),{view:entity('Calendar').get('defaultView').raw,date:this.isDayView()?moment.tz(this.$refs.fullCalendar.getApi().view.activeStart,this.timezone()):moment.tz(date,this.timezone())}).$el.outerHTML;},changeView:function(view){entity('Calendar').setDefaultView(view);if(view===constants.DAY_VIEW){this.$refs.fullCalendar.getApi().changeView(view,entity('Calendar').get('defaultDate').raw.toDate());}else{this.$refs.fullCalendar.getApi().changeView(view);}
entity('CalendarHeader').setCalendarTitle(this.$refs.fullCalendar.getApi().view.title);},needAmPm:function(){var user=entity('Textmagic::CoreBundle::User');return user.raw.isUsingAmPm;},timezone:function(){var user=entity('Textmagic::CoreBundle::User');return user.raw.timezone;},getEarliestEventWeek:function(week){if(!moment.isMoment(week.start)||!moment.isMoment(week.end)){throw new Error('Pass to `getEarliestEventWeek` Moment Date object');}
return this.cevents.filter(function(event){return moment(event.start).unix()>=week.start.unix()&&moment(event.start).unix()<=week.end.unix();}).sortBy(function(event){return moment(event.start).unix()}).at(0);},getEarliestEventDay:function(date,timezone){if(!moment.isMoment(date)){throw new Error('Pass to `getEarliestEventDay` Moment Date object');}
return this.cevents.filter(function(event){return moment(event.start).tz(timezone).isSame(date,'day')}).sortBy(function(event){return moment(event.start).unix()}).at(0);},}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');fetcher=container.get('Textmagic::CalendarBundle::Services::EventFetcher');};container.register('Textmagic::CalendarBundle::Components::CalendarPreview',exports);})(global.AHServiceContainer);(function(container){var entity,exports={template:'#calendar-event',props:{detailUrl:String,editUrl:String,event:Object,timezone:String,needAmPm:Boolean,forceDropdownDirection:String},mounted:function(){this.$nextTick(function(){var containerWidth=this.$el.clientWidth-35;var timeWidth=this.$el.querySelector('.calendar-event-time').offsetWidth;this.$el.querySelector('.calendar-event-first-line-cut').style.width=(containerWidth-timeWidth)+'px';this.$el.querySelector('.fc-title').style.width=containerWidth+'px';})},data:function(){return{isHovered:false};},methods:{onClickDropdownItem:function(item){if(item.id==='detail'){this.onClick();}else if(item.id==='delete'){entity('Textmagic::CoreBundle::ModalsStack').open('delete-event-dialog',{id:parseInt(item.eventId),forceClearStack:true});}else if(item.id==='edit'){global.location.href=this.$props.editUrl;}},onClick:function(){var event=this.$props.event;entity('Textmagic::CoreBundle::ModalsStack').open('modal-event',{id:event.id.toString()});},onHover:function(isHovered){this.isHovered=isHovered;}},computed:{time:function(){return this.$props.event.extendedProps.dateFormatted+'&nbsp; - &nbsp;';},style:function(){var eventsInRow=entity('Calendar').getEventsInRow(this.$props.event.extendedProps.key);var baseStyle={background:this.isHovered?container.get('Textmagic::CoreBundle::Services::Color').lightenDarkenColor(this.$props.event.backgroundColor,-20):this.$props.event.backgroundColor,border:this.$props.event.borderColor+' solid 1px','z-index':0};if(eventsInRow===2){return global.Sugar.Object.defaults({'max-width':'50%'},baseStyle)}
return baseStyle;},eventId:function(){return this.$props.event.id;},text:function(){var text=this.$props.event.extendedProps.text;if(this.$props.event.extendedProps.isMMS){text=text.replace('<media',' <media');}
text=new global.Sugar.String(text).stripTags().raw;return text;},title:function(){return this.$props.event.title;},dropdownClass:function(){if(this.$props.forceDropdownDirection&&this.$props.forceDropdownDirection==='up'){return 'dropdown-toggle-up';}
return parseInt(moment.tz(this.$props.event.start,this.$props.timezone).format('HH'))>20?'dropdown-toggle-up':'';},dropdownItems:function(){if(this.$props.event.extendedProps.isMMS){return[{icon:'eye',id:'detail',name:'View Details'},{icon:'trash',id:'delete',name:'Delete',eventId:this.$props.event.id},]}
return[{icon:'eye',id:'detail',name:'View Details'},{icon:'pencil',id:'edit',name:'Edit'},{icon:'trash',id:'delete',name:'Delete',eventId:this.$props.event.id},]}}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');};container.register('Textmagic::CalendarBundle::Components::Event',exports);})(global.AHServiceContainer);(function(container){var exports={template:'#calendar-preview-event',props:{event:Object,timezone:String,needAmPm:Boolean,onClick:{type:Function,default:function(){}},onHover:{type:Function,default:function(){}},time:String,styleObj:{type:Object,default:function(){return{};}},text:String,title:String,}};container.register('Textmagic::CalendarBundle::Components::EventPreview',exports);})(global.AHServiceContainer);(function(container){var entity,exports={template:'#modal-event',props:{id:{type:String}},data:function(){return{isLoading:false,replyOptionsTitles:entity('App').get('replyOptionsTitles').raw,replyOptionsLabelClasses:entity('App').get('replyOptionsLabelClasses').raw};},methods:{onClose:function(){entity('Textmagic::CoreBundle::ModalsStack').close('modal-event');},onClickBackdrop:function(){this.onClose();},needAmPm:function(){var user=entity('Textmagic::CoreBundle::User');return user.raw.isUsingAmPm;},timezone:function(){var user=entity('Textmagic::CoreBundle::User');return user.raw.timezone;},onClickDelete:function(){entity('Textmagic::CoreBundle::ModalsStack').open('delete-event-dialog',{id:parseInt(this.$props.id),forceClearStack:true});}},mounted:function(){var id=parseInt(this.$props.id);if(isNaN(id)){return;}
if(typeof entity('Calendar').getMessageIcs(id)==='undefined'){container.get('Textmagic::CalendarBundle::Services::EventFetcher').fetchMessagesIcs(id).then((function(response){entity('Calendar').appendMessageIcs(response);}).bind(this)).fail(function(){container.get('Textmagic::CoreBundle::Component::External').alertNoty('Internal error. Please contact our support - support@textmagic.com',{type:'error'});}).always((function(){this.isLoading=false;}).bind(this));}else{this.isLoading=false;}},computed:{cstyle:function(){var id=parseInt(this.$props.id);if(isNaN(id)){return false;}
var messagesIcs=entity('Calendar').getMessageIcs(id);if(typeof messagesIcs==='undefined'){return{height:'calc(100vh - 132px)'}}else{return{};}},messagesIcs:function(){var id=parseInt(this.$props.id);if(isNaN(id)){return false;}
var messagesIcs=entity('Calendar').getMessageIcs(id);if(typeof messagesIcs==='undefined'){return false;}
var tz=this.timezone(),createdAt=moment(messagesIcs.createdAt).tz(tz),nextSend=moment(messagesIcs.nextSend).tz(tz),firstOccurrence=moment(messagesIcs.firstOccurrence).tz(tz),end=messagesIcs.end===null?'Never':moment(messagesIcs.end).tz(tz),from=messagesIcs.from===null?'Default sender settings':'+'+messagesIcs.from,text=messagesIcs.text,textSrc=false,totalPrice=new global.Sugar.Number(messagesIcs.totalPrice);createdAt=this.needAmPm()?createdAt.format('MM/DD/YY hh:mm A'):createdAt.format('MM/DD/YY HH:mm');nextSend=this.needAmPm()?nextSend.format('dddd, MM/DD/YY hh:mm A (UTC Z: ')+tz+')':nextSend.format('dddd, MM/DD/YY HH:mm (UTC Z: ')+tz+')';firstOccurrence=this.needAmPm()?firstOccurrence.format('MM/DD/YY hh:mm A (UTC Z: ')+tz+')':firstOccurrence.format('MM/DD/YY HH:mm (UTC Z: ')+tz+')';if(moment.isMoment(end)){end=this.needAmPm()?end.format('MM/DD/YY hh:mm A (UTC Z: ')+tz+')':end.format('MM/DD/YY HH:mm (UTC Z: ')+tz+')';}
if(text.substring(0,6)==='<audio'){var div=global.document.createElement('div');div.innerHTML=text;textSrc=div.querySelector('audio').src;text=new global.Sugar.String(text);text=text.stripTags().raw;}
return global.Sugar.Object.defaults({createdAt:createdAt,nextSend:nextSend,firstOccurrence:firstOccurrence,end:end,from:from,text:text,textSrc:textSrc,totalPrice:totalPrice.format(3).raw},messagesIcs);}}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');};container.register('Textmagic::CalendarBundle::Components::ModalEvent',exports);})(global.AHServiceContainer);(function(container){var nop=function(){};var entity,exports={template:'#aggregated-calendar-half-an-hour-event-see-more',props:{event:Object,timezone:String,needAmPm:Boolean},data:function(){return{isHovered:false,isLoading:false,events:entity('CalendarOverflowedEvents')};},computed:{title:function(){return this.$props.event.title;},style:function(){var cstyle={border:this.$props.event.borderColor};cstyle.background=this.isHovered?container.get('Textmagic::CoreBundle::Services::Color').lightenDarkenColor(this.$props.event.backgroundColor,-20):this.$props.event.backgroundColor;return cstyle},dropdownClass:function(){return parseInt(moment.tz(this.$props.event.start,this.$props.timezone).format('HH'))>20?'dropdown-toggle-up':'';}},methods:{onHover:function(isHovered){this.isHovered=isHovered;},onClick:function(){var props=this.$props;props.title=this.title;entity('Textmagic::CoreBundle::ModalsStack').open('modal-overflowed-events',props);},onClickDropdownItem:function(item){this.onClick();}}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');};container.register('Textmagic::CalendarBundle::Components::AggregatedHalfAnHourEventSeeMore',exports);})(global.AHServiceContainer);(function(container){var entity,fetcher,apiHandler,apiCalls,exports=[{template:'#delete-event-dialog',props:{id:Number,forceClearStack:{type:Boolean,default:false}},methods:{onAgreeDeleteEvent:function(){apiCalls().Schedule.delete(this.$props.id).then((function(){if(this.$props.forceClearStack){entity('Textmagic::CoreBundle::ModalsStack').clear();}else{entity('Textmagic::CoreBundle::ModalsStack').close('delete-event-dialog');}
this.removeEvents();container.get('Textmagic::CalendarBundle::Component::External').recountScheduleTab();if(entity('Calendar').isDayView()){fetcher.fetchDay(entity('Calendar').get('defaultDate').raw);}else{fetcher.fetch(entity('Calendar').get('defaultDate').raw);}}).bind(this)).fail(function(){container.get('Textmagic::CoreBundle::Component::External').alertNoty('Internal error. Please contact our support - support@textmagic.com',{type:'error'});});},onDisagreeDeleteEvent:function(){entity('Textmagic::CoreBundle::ModalsStack').close('delete-event-dialog');},removeEvents:function(){entity('Calendar').removeEvents();}}}];exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');apiHandler=container.get('Textmagic::CalendarBundle::Api::Handlers');apiCalls=container.get('Textmagic::CoreBundle::Api::Calls').setHandler(apiHandler);fetcher=container.get('Textmagic::CalendarBundle::Services::EventFetcher');};container.register('Textmagic::CoreBundle::Components::DeleteEventDialog',exports);})(global.AHServiceContainer);(function(container){var entity,exports={template:'#calendar-loader',data:function(){return{app:entity('App')}}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');};container.register('Textmagic::CalendarBundle::Components::CalendarLoader',exports);})(global.AHServiceContainer);(function(container){var entity,exports={template:'#modal-overflowed-events',props:{event:Object,timezone:String,needAmPm:Boolean,title:String},data:function(){return{isLoading:false,modal:entity('ModalOverflowedEvents')};},computed:{ctitle:function(){var start=moment.tz(this.$props.event.start,this.timezone),end=moment.tz(this.$props.event.end,this.timezone).add(1,'second'),startFormatted=this.needAmPm?start.format('h:mma'):start.format('H:mm'),endFormatted=this.needAmPm?end.format('h:mma'):end.format('H:mm');return this.title+'&nbsp;('+startFormatted+'&nbsp;-&nbsp;'+endFormatted+')'},cevents:function(){return entity('ModalOverflowedEvents').getEventsByKeyPaginated(this.$props.event.extendedProps.key,this.$props.needAmPm,this.$props.timezone).raw;},cstyle:function(){if(this.isLoading){return{height:'calc(100vh - 132px)'}}else{return{};}}},methods:{onClose:function(){entity('Textmagic::CoreBundle::ModalsStack').close('modal-overflowed-events');},onClickBackdrop:function(){this.onClose();}},mounted:function(){if(entity('ModalOverflowedEvents').getActiveKey()!==this.$props.event.extendedProps.key){entity('ModalOverflowedEvents').resetPagination();}
if(entity('ModalOverflowedEvents').getEventsByKey(this.$props.event.extendedProps.key,this.$props.needAmPm,this.$props.timezone).raw.length>0){entity('ModalOverflowedEvents').setActiveKey(this.$props.event.extendedProps.key);return;}
this.isLoading=true;container.get('Textmagic::CalendarBundle::Services::EventFetcher').fetchOccurrencesHalfAnHour({start:moment(this.$props.event.start,this.timezone).format('YYYY-MM-DD\THH:mm:ssZZ'),end:moment(this.$props.event.end,this.timezone).format('YYYY-MM-DD\THH:mm:ssZZ')}).then((function(response){entity('ModalOverflowedEvents').setActiveKey(this.$props.event.extendedProps.key);entity('ModalOverflowedEvents').appendUniqueEvents(response);}).bind(this)).fail(function(){container.get('Textmagic::CoreBundle::Component::External').alertNoty('Internal error. Please contact our support - support@textmagic.com',{type:'error'});}).always((function(){this.isLoading=false;}).bind(this));}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');};container.register('Textmagic::CalendarBundle::Components::ModalOverflowedEvents',exports);})(global.AHServiceContainer);(function(container){var entity,exports={template:'#app-calendar'};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');};container.register('Textmagic::CalendarBundle::Components::App',exports);})(global.AHServiceContainer);(function(container){var entity;var exports={init:function(){entity=container.get('Textmagic::FrameworkBundle::Entity'),entity({name:'Textmagic::CalendarBundle::CalendarHeader',initState:{header:{left:['prev','next','todayCustom'],center:['title'],right:['month','week','customDay']},calendarTitle:''},methods:[this]});},excludePrev:function(){var header=this.get('header').raw;header.left=header.left.filter(function(item){return item!=='prev';});this.set('header',header);},includePrev:function(){var header=this.get('header').raw;header.left.push('prev');this.set('header',header);},excludeNext:function(){var header=this.get('header').raw;header.left=header.left.filter(function(item){return item!=='next';});this.set('header',header);},includeNext:function(){var header=this.get('header').raw;header.left.push('next');this.set('header',header);},setCalendarTitle:function(title){this.set('calendarTitle',title);}};container.register('Textmagic::CalendarBundle::Repository::CalendarHeader',exports);})(global.AHServiceContainer);(function(container){var entity,eventColors=['#60D4EA','#93E3BA','#A791F8','#EDD587','#DBA1E3','#EB93A9','#BCDC71','#FF826A','#EC739C','#EA7176','#F9D465','#C77BD5','#F9BB60','#EC88C0','#6BBDFF','#DBE483','#8691CD','#B4D58D','#FC6978','#94A7F8','#79BD77','#EA7966','#6A737F','#7AA2D9','#59A9B3','#85909E','#F1876E','#F16E98','#E3905B','#D29CDE','#BF4B6C','#4CE5D8','#6ABFBB','#EF9283','#A7D96D','#E281A6'];var exports={init:function(){entity=container.get('Textmagic::FrameworkBundle::Entity'),entity({name:'Textmagic::CalendarBundle::Calendar',initState:{aggregatedEvents:[],aggregatedHalfAnHourEvents:[],overflowedEventsByHalOfHour:[],events:[],defaultDate:moment(),defaultView:constants.MONTH_VIEW,messagesIcs:[],loadedMonths:[],loadedDays:[],grid:[],previewSchedulerValue:false,previewEvents:[],previewAggregatedEvents:[],previewAggregatedHalfAnHourEvents:[],},methods:[this]});},setDefaultDate:function(newDefaultDate){this.set('defaultDate',newDefaultDate);},setDefaultView:function(newDefaultView){this.set('defaultView',newDefaultView);},removeEvents:function(){entity('Textmagic::CalendarBundle::Calendar').get('events').remove(function(){return true;});entity('Textmagic::CalendarBundle::Calendar').get('aggregatedEvents').remove(function(){return true;});entity('Textmagic::CalendarBundle::Calendar').get('aggregatedHalfAnHourEvents').remove(function(){return true;});entity('Textmagic::CalendarBundle::Calendar').get('overflowedEventsByHalOfHour').remove(function(){return true;});entity('Textmagic::CalendarBundle::Calendar').get('loadedMonths').remove(function(){return true;});entity('Textmagic::CalendarBundle::Calendar').get('loadedDays').remove(function(){return true;});entity('Textmagic::CalendarBundle::ModalOverflowedEvents').get('events').remove(function(){return true;});entity('Textmagic::CalendarBundle::Calendar').get('previewEvents').remove(function(){return true;});entity('Textmagic::CalendarBundle::Calendar').get('previewAggregatedEvents').remove(function(){return true;});entity('Textmagic::CalendarBundle::Calendar').get('previewAggregatedHalfAnHourEvents').remove(function(){return true;});},appendPreviewEvents:function(events){var index=events.map(function(e){return e.key;});entity('Textmagic::CalendarBundle::Calendar').get('previewEvents').remove(function(event){return index.indexOf(event.key)>-1;});entity('Textmagic::CalendarBundle::Calendar').get('previewEvents').append(events);},appendAggregatedPreviewEvents:function(events){var index=events.map(function(e){return e.key;});entity('Textmagic::CalendarBundle::Calendar').get('previewAggregatedEvents').remove(function(event){return index.indexOf(event.key)>-1;});entity('Textmagic::CalendarBundle::Calendar').get('previewAggregatedEvents').append(events);},appendAggregatedHalfAnHourPreviewEvents:function(events){var index=events.map(function(e){return e.key;});entity('Textmagic::CalendarBundle::Calendar').get('previewAggregatedHalfAnHourEvents').remove(function(event){return index.indexOf(event.key)>-1;});entity('Textmagic::CalendarBundle::Calendar').get('previewAggregatedHalfAnHourEvents').append(events);},appendUniqueEvents:function(events){var index=events.map(function(e){return e.id+e.dtstart;});entity('Textmagic::CalendarBundle::Calendar').get('events').remove(function(event){return index.indexOf(event.id+event.dtstart)>-1;});entity('Textmagic::CalendarBundle::Calendar').get('events').append(events);},appendUniqueAggregatedEvents:function(events){var keys=events.map(function(e){return e.key;});entity('Textmagic::CalendarBundle::Calendar').get('aggregatedEvents').remove(function(aEvent){return keys.indexOf(aEvent.key)>-1;});entity('Textmagic::CalendarBundle::Calendar').get('aggregatedEvents').append(events);},appendUniqueAggregatedByHalfOfHourEvents:function(events){var starts=events.map(function(e){return e.start;});entity('Textmagic::CalendarBundle::Calendar').get('aggregatedHalfAnHourEvents').remove(function(aEvent){return starts.indexOf(aEvent.start)>-1;});entity('Textmagic::CalendarBundle::Calendar').get('aggregatedHalfAnHourEvents').append(events);},appendUniqueOverflowedEventsByHalOfHour:function(events){var keys=events.map(function(e){return e.key;});entity('Textmagic::CalendarBundle::Calendar').get('overflowedEventsByHalOfHour').remove(function(aEvent){return keys.indexOf(aEvent.key)>-1;});entity('Textmagic::CalendarBundle::Calendar').get('overflowedEventsByHalOfHour').append(events);},toCalendarPreviewEvent:function(event,timezone,needAmPm){var m=event.dtstart?this.dtStartToMoment(event.dtstart,timezone):moment(event.start).tz(timezone);;return{title:this.getAggregatedEventTitle(event),backgroundColor:'#3a87ad',borderColor:'#3a87ad',start:event.start,dateFormatted:needAmPm?m.format('h:mma'):m.format('H:mm'),end:event.end,key:event.key};},toCalendarAggregatedPreviewEvent:function(event){return{title:this.getAggregatedEventTitle(event),backgroundColor:'#3a87ad',borderColor:'#3a87ad',allDay:true,rrule:event.dtstart,key:event.key};},toCalendarAggregatedEvent:function(event,timezone){var base={title:this.getAggregatedEventTitle(event),backgroundColor:'#3a87ad',borderColor:'#3a87ad',allDay:true,rrule:event.dtstart,type:'aggregatedEvent',key:event.key,start:this.dtStartToMoment(event.dtstart,timezone)};if(event.contactName){base.contactName=event.contactName;}
return base;},toCalendarAggregatedHalfAnHourEvents:function(event){var base={title:this.getAggregatedEventTitle(event),backgroundColor:'#3a87ad',borderColor:'#3a87ad',start:event.start,end:event.end,type:'aggregatedEvent',recipientsCount:event.recipientsCount,key:event.key};if(event.contactName){base.contactName=event.contactName;}
return base;},toCalendarAggregatedHalfAnHourEventsSeeMore:function(event){return{title:this.getAggregatedEventTitle(event),backgroundColor:'#3a87ad',borderColor:'#3a87ad',start:event.start,end:event.end,type:'aggregatedEventSeeMore',key:event.key};},toCalendarEventOverflowed:function(event,needAmPm,timezone){var key=event.key;event=this.toCalendarEvent(event,needAmPm,timezone);event.key=event.id+key;event.extendedProps={dateFormatted:event.dateFormatted,text:event.text,isMMS:event.isMMS}
return event;},toCalendarEvent:function(event,needAmPm,timezone){var m=moment(event.dtstart).tz(timezone);return{id:event.id,title:this.getEventTitle(event),text:this.getEventText(event),backgroundColor:this.getEventColor(event.id),borderColor:this.getEventColor(event.id),start:event.start,end:event.end,dateFormatted:needAmPm?m.format('h:mma'):m.format('H:mm'),dateUnix:m.unix(),detailUrl:event.detailUrl,editUrl:event.editUrl,type:'singleEvent',key:event.key,isMMS:event.isMMS};},getEventColor:function(id){return eventColors[id%36];},getEventTitle:function(event){return event.group?event.group+' ('+event.recipientsCount+')':event.contactName;},getEventText:function(event){return event.text;},getAggregatedEventTitle:function(event){if(event.contactName){return event.contactName+' ('+event.recipientsCount+')';}
var base=event.recipientsCount+' scheduled\n message';return event.recipientsCount>1?base+'s':base;},markMonthAsLoaded:function(date){if(!moment.isMoment(date)){throw new Error('Pass to `isLoaded` Moment Date object');}
entity('Textmagic::CalendarBundle::Calendar').get('loadedMonths').append(date.format('MMMM')+'-'+date.format('YYYY'));},markDayAsLoaded:function(date){if(!moment.isMoment(date)){throw new Error('Pass to `isLoaded` Moment Date object');}
entity('Textmagic::CalendarBundle::Calendar').get('loadedDays').append(date.format('YYYY-MMMM-DD'));},isLoadedMonth:function(date){if(!moment.isMoment(date)){throw new Error('Pass to `isLoaded` Moment Date object');}
var loadedMonths=entity('Textmagic::CalendarBundle::Calendar').get('loadedMonths');return loadedMonths.indexOf(date.format('MMMM')+'-'+date.format('YYYY'))>-1;},isLoadedDay:function(date){if(!moment.isMoment(date)){throw new Error('Pass to `isLoaded` Moment Date object');}
var loadedDays=entity('Textmagic::CalendarBundle::Calendar').get('loadedDays');return loadedDays.indexOf(date.format('YYYY-MMMM-DD'))>-1;},appendMessageIcs:function(messageIcs){this.get('messagesIcs').append(messageIcs);},getMessageIcs:function(id){return this.get('messagesIcs').filter(function(messageIcs){return messageIcs.id===id;}).shift().raw},isMonthView:function(){return this.get('defaultView').raw==constants.MONTH_VIEW;},isWeekView:function(){return this.get('defaultView').raw==constants.WEEK_VIEW;},isDayView:function(){return this.get('defaultView').raw==constants.DAY_VIEW;},setGrid:function(grid){this.set('grid',grid);},getEventsInRow:function(key){var grid=this.get('grid').raw;return grid[key];},dtStartToMoment:function(dtstart,timezone){return moment.tz(dtstart.replace('DTSTART:',''),timezone);}};container.register('Textmagic::CalendarBundle::Repository::Calendar',exports);})(global.AHServiceContainer);var DEFAULT_LIMIT=10;(function(container){var entity;var exports={init:function(){entity=container.get('Textmagic::FrameworkBundle::Entity');entity({name:'Textmagic::CalendarBundle::ModalOverflowedEvents',initState:{events:[],limit:DEFAULT_LIMIT,offset:0,activeKey:false},methods:[this]});},setActiveKey:function(activeKey){this.set('activeKey',activeKey);return this;},getActiveKey:function(){return this.get('activeKey').raw;},setLimit:function(limit){this.set('limit',limit);return this;},setOffset:function(offset){this.set('offset',offset);return this;},moveForwardOffset:function(){var offset=this.get('offset').raw,limit=this.get('limit').raw;offset=offset+limit;if(offset<=this.get('events').count().raw){console.log('setOffset'+offset);this.setOffset(offset);}},moveBackwardOffset:function(){var offset=this.get('offset').raw,limit=this.get('limit').raw;offset=offset-limit;if(offset>=0){this.setOffset(offset)}},resetPagination:function(){this.set('limit',DEFAULT_LIMIT);this.set('offset',0);},appendUniqueEvents:function(events){var index=events.map(function(e){return e.id+e.dtstart;});this.get('events').remove(function(event){return index.indexOf(event.id+event.dtstart)>-1;});this.get('events').append(events);},getEventsByKey:function(key,needAmPm,timezone){return this.get('events').filter(function(event){return event.key===key;}).sortBy(function(event){return moment(event.dtstart).unix();}).map(function(event){return entity('Textmagic::CalendarBundle::Calendar').toCalendarEventOverflowed(event,needAmPm,timezone);})},getEventsByKeyPaginated:function(key,needAmPm,timezone){var offset=this.get('offset').raw,limit=this.get('limit').raw;return this.get('events').filter(function(event){return event.key===key;}).sortBy(function(event){return moment(event.dtstart).unix();}).from(offset).to(limit).map(function(event){return entity('Textmagic::CalendarBundle::Calendar').toCalendarEventOverflowed(event,needAmPm,timezone);})}};container.register('Textmagic::CalendarBundle::Repository::ModalOverflowedEvents',exports);})(global.AHServiceContainer);(function(container){var entity;var exports={init:function(){entity=container.get('Textmagic::FrameworkBundle::Entity');entity({name:'Textmagic::CalendarBundle::App',initState:{isLoading:false,replyOptionsLabelClasses:{},replyOptionsTitles:{}},methods:[this]});},setIsLoading:function(bool){this.set('isLoading',bool);},setReplyOptionsLabelClasses:function(replyOptionsLabelClasses){this.set('replyOptionsLabelClasses',replyOptionsLabelClasses);},setReplyOptionsTitles:function(replyOptionsTitles){this.set('replyOptionsTitles',replyOptionsTitles);}};container.register('Textmagic::CalendarBundle::Repository::CalendarApp',exports);})(global.AHServiceContainer);(function(container){var entity,apiHandler,apiCalls,exports={fetch:function(date,callback){if(entity('Calendar').isLoadedMonth(date)){entity('App').setIsLoading(false);return typeof callback==='undefined'?false:callback();}
entity('App').setIsLoading(true);return this.fetchCalendar(date).then(function(response){entity('Calendar').appendUniqueAggregatedEvents(response.aggregatedByDay);entity('Calendar').appendUniqueAggregatedByHalfOfHourEvents(response.aggregatedByHalfOfHour);if(typeof callback==="function"){callback();}
entity('Calendar').markMonthAsLoaded(date);return response;}).fail(function(){container.get('Textmagic::CoreBundle::Component::External').alertNoty('Internal error. Please contact our support - support@textmagic.com',{type:'error'});}).always(function(){entity('App').setIsLoading(false);});},fetchMessagesIcs:function(id){return apiCalls().Schedule.getMessagesIcs(id);},fetchOccurrencesHalfAnHour:function(params){return apiCalls().Schedule.getOccurrencesHalfAnHour(params);},fetchCalendar:function(date){if(!moment.isMoment(date)){throw new Error('Pass instance of `moment` please');}
return apiCalls().Schedule.calendar({year:date.format('YYYY'),month:date.format('MMMM')})},fetchDay:function(date,callback){if(!moment.isMoment(date)){throw new Error('Pass instance of `moment` please');}
if(entity('Calendar').isLoadedDay(date)){entity('App').setIsLoading(false);return typeof callback==='undefined'?false:callback();}
entity('App').setIsLoading(true);return apiCalls().Schedule.getOccurrencesDay({start:date.clone().startOf('day').format('YYYY-MM-DD\THH:mm:ssZZ'),end:date.clone().endOf('day').format('YYYY-MM-DD\THH:mm:ssZZ')}).then(function(response){entity('Calendar').appendUniqueEvents(response.occurrences);entity('Calendar').appendUniqueOverflowedEventsByHalOfHour(response.overflowedEventsByHalOfHour);entity('Calendar').setGrid(response.grid);if(typeof callback==="function"){callback();}
entity('Calendar').markDayAsLoaded(date);return response;}).fail(function(){container.get('Textmagic::CoreBundle::Component::External').alertNoty('Internal error. Please contact our support - support@textmagic.com',{type:'error'});}).always(function(){entity('App').setIsLoading(false);})},fetchPreview:function(date,params,callback){if(entity('Calendar').isLoadedMonth(date)){typeof callback!=='undefined'?callback():null;return;}
return apiCalls().Schedule.scheduleCalendarPreview(params).then(function(response){entity('Calendar').markMonthAsLoaded(date);entity('Calendar').appendPreviewEvents(response.occurrences);entity('Calendar').appendAggregatedPreviewEvents(response.aggregatedByDay);entity('Calendar').appendAggregatedHalfAnHourPreviewEvents(response.aggregatedByHalfOfHour);typeof callback!=='undefined'?callback():null;return response;}).fail(function(){container.get('Textmagic::CoreBundle::Component::External').alertNoty('Internal error. Please contact our support - support@textmagic.com',{type:'error'});})}};exports.init=function(){entity=container.get('Textmagic::FrameworkBundle::Entity').useBundle('Textmagic::CalendarBundle');apiHandler=container.get('Textmagic::CalendarBundle::Api::Handlers');apiCalls=container.get('Textmagic::CoreBundle::Api::Calls').setHandler(apiHandler);};container.register('Textmagic::CalendarBundle::Services::EventFetcher',exports);})(global.AHServiceContainer);