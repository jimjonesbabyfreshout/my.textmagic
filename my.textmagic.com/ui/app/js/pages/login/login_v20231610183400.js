var Login=function(afterLoginPath){var $this=this;$this.afterLoginPath=afterLoginPath;$this.init();$this.loginForm.find('input[type=password]').on('keyup',function(e){var closestFormGroup=$(this).closest('.form-group'),helpBlock=closestFormGroup.find('.help-block');if(e.originalEvent.getModifierState('CapsLock')){closestFormGroup.removeClass('has-success');closestFormGroup.addClass('has-warning');helpBlock.text('Please note: Caps Lock is on.');}else{closestFormGroup.removeClass('has-warning');helpBlock.text('');}});$this.loginButton.on('click',function(e){e.preventDefault();var $formValid=true;if(!$this.username.val().length){$this.username.closest('.form-group').addClass('has-error').find('.help-block').html('Please enter a valid email/username.');$formValid=false;}
if(!$this.password.val().length){$this.password.closest('.form-group').addClass('has-error').find('.help-block').html('Please enter a valid password.');$formValid=false;}
if($formValid){if(typeof jQuery.fn.btn==='function'){$(this).btn('disable');}
if(typeof $('body').spin==='function'){$('body').spin('enable','<strong class="title">Logging you in securely...</strong><p class="descr text-muted">If this page appears for more than 5 seconds, <a href="'+$this.afterLoginPath+'">click here</a> to reload.</p>',{length:17,width:4,radius:14,top:'-46px',left:'-24px'});}
$this.loginForm.submit();return true;}});};Login.prototype.init=function(){this.loginForm=$('#logInFrm');this.loginButton=$('#logInBtn');this.username=$('#_username');this.password=$('#_password');this.capsLock=$('#_capslock');};