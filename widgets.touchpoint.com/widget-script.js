(function(){"use strict";const i=t=>typeof t=="object"&&t!==null,g=t=>i(t)&&t.eventId==="settings",l=t=>i(t)&&t.eventId==="toggle",_=t=>i(t)&&t.eventId==="getParentUrl",h="2147483647",E={"pointer-events":"all",background:"none",border:"0px",float:"none",position:"absolute",inset:"0px",width:"100%",height:"100%",margin:"0px",padding:"0px","min-height":"0px"},w={border:"0px","background-color":"transparent","pointer-events":"none","z-index":h,position:"fixed",width:"0px",height:"0px",overflow:"hidden",opacity:"1",right:"0px",bottom:"0px","max-width":"100%","max-height":"100%"},f="192px",m="78px",u="__tp-widget-id__",I="__tp-widget-preview__",x="__tp-widget__",d="tp-widget-opened",r="tp-widget-preview-mode";let e=null,s,a=!1;const{container:c}=b();window.addEventListener("message",t=>{g(t.data)&&(e=t.data.settings,s=t.data.isPreviewMode,o(c)),l(t.data)&&(a=t.data.opened,o(c)),_(t.data)&&T(t)});function T(t){var p;const n={eventId:"sendParentUrl",requestUrl:window.location.href};(p=t.source)==null||p.postMessage(n,{targetOrigin:t.origin})}function b(){const t=A(),n=D();return t.appendChild(n),document.body.appendChild(t),{container:t,iframe:n}}function A(){const t=document.createElement("div");return t.id=x,o(t),t}function o(t){e?a?(t.classList.add(d),Object.assign(t.style,{width:e.width,height:e.height,bottom:"0px",right:"10px",overflow:"hidden"})):(t.classList.remove(d),setTimeout(()=>{Object.assign(t.style,{width:f,height:m,bottom:"0px",right:"10px",overflow:s?"visible":"hidden"})},750)):Object.assign(t.style,w),s?t.classList.add(r):t.classList.remove(r)}function D(){const t=document.createElement("iframe");return Object.assign(t.style,E),t.src=`https://widgets.touchpoint.com/${window[u]}?preview=${window[I]||"false"}`,t}})();
